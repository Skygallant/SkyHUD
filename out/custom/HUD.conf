name: Sky HUD
slots:
  altimeter:
    name: altimeter
    class: TelemeterUnit
    select: null
    type:
      events: []
      methods: []
  core:
    name: core
    class: CoreUnit
    select: null
    type:
      events: []
      methods: []
  disk:
    name: disk
    class: DataBankUnit
    select: null
    type:
      events: []
      methods: []
  warp:
    name: warp
    class: WarpDriveUnit
    select: null
    type:
      events: []
      methods: []
  switch:
    name: switch
    class: PressureTile
    select: null
    type:
      events: []
      methods: []
  rx:
    name: rx
    class: Receiver
    select: null
    type:
      events: []
      methods: []
  tx:
    name: tx
    class: Emitter
    select: null
    type:
      events: []
      methods: []
handlers:
  altimeter: {}
  core: {}
  disk: {}
  warp: {}
  switch:
    onPressed():
      lua: switch:triggerEvent('onPressed')
    onReleased():
      lua: switch:triggerEvent('onReleased')
  rx:
    "onReceived(channel,message)":
      lua: rx:triggerEvent('onReceived',channel,message)
  tx:
    "onSent(channel,message)":
      lua: tx:triggerEvent('onSent',channel,message)
  library:
    onStart():
      lua: >-
        ;(function()

        local a={}local b=0;function library.addEventHandlers(c)if not c or c.onEvent and c.triggerEvent then return false end;b=b+1;a[b]=c;local d,e,f='table','function','thread'if d~=type(c)then error('You can only add event handlers to table objects!')end;local g={}local function h(c)local i=type(c)return e==i or d==i and h(getmetatable(c).__call)or f==i end;c.onEvent=function(self,j,k,l)if not h(k)then error('Event handler must be a function, a callable object or a thread!')end;l=l or self;if d~=type(l)then error('The value of self must be a table!')end;if not g[j]then g[j]={_=0}end;local m=f==type(k)and function(...)coroutine.resume(k,...)end or k;local k=g[j]local n=k._+1;k[n]={m,l}k._=n;return n end;c.clearEvent=function(self,j,o)if g[j]and g[j][o]then g[j][o]=nil end end;c.clearAllEvents=function(self)g={}end;c.triggerEvent=function(self,j,...)local p=g[j]if p then for q=1,p._ do local k=p[q]if k then k[1](k[2],...)end end end end;return true end;function library.clearAllEventHandlers()for q=1,b do local c=a[q]if c and c.clearAllEvents then c:clearAllEvents()end end end

        end)()

        ;(function()

        local a=DULibrary or{}function a.getLinks(b,c)local d={}if not b then b={}end;for e,f in pairs(unit.getOutPlugs())do local g=unit[f.name]if'table'==type(g)and'function'==type(g.getClass)then local h=true;for i,j in pairs(b)do if not('function'==type(g[i])and j==g[i]():sub(1,#j))then h=false;break end end;if h then if c then table.insert(d,g)else d[f.name]=g end end end end;return d end;function a.getLinksByClass(k,c)return a.getLinks({getClass=k},c)end;function a.getLinkByClass(k)return a.getLinksByClass(k,true)[1]end;function a.getCoreUnit()return a.getLinkByClass('CoreUnit')end;function a.getLinkByName(l)local m=a.getCoreUnit()if not m then error('getLinkByName requires a linked CoreUnit to work')end;local d=a.getLinks()for n,o in pairs(d)do if l==m.getElementNameById(o.getLocalId())then return o end end end

        end)()

        package.preload['AR_Library:../libs/@EasternGamer/AR-Library/src/ARImport.lua']=(function()

        function LinkedList(a,b)local c={}local d={}local e=0;local f,g,h,i=b..'Remove',b..'Add',b..'index',b..'ref'c[f]=function(j)local k,d=e,d;if k>1 then if j[h]==-1 then return end;local l,m=d[k],j[h]d[m]=l;d[k]=nil;l[h]=m;e=k-1;j[h]=-1;j[i]=nil elseif k==1 then d[1]=nil;e=0;j[h]=-1;j[i]=nil end end;c[g]=function(j,n)local h,i=h,i;if j[h]and j[h]~=-1 then if not j[i]==c or n then j[i][f](j)else return end end;local k=e+1;d[k]=j;j[h]=k;j[i]=c;e=k end;c[b..'GetData']=function()return d,e end;return c end;local math=math;local o,p,q,type=math.sin,math.cos,math.rad,type;function RotMatrixToQuat(r,s,t)local u,v,w=r[1],s[2],t[3]local x=u+v+w;if x>0 then local y=0.5/(x+1)^0.5;return(s[3]-t[2])*y,(t[1]-r[3])*y,(r[2]-s[1])*y,0.25/y elseif u>v and u>w then local y=1/(2*(1+u-v-w)^0.5)return 0.25/y,(s[1]+r[2])*y,(t[1]+r[3])*y,(s[3]-t[2])*y elseif v>w then local y=1/(2*(1+v-u-w)^0.5)return(s[1]+r[2])*y,0.25/y,(t[2]+s[3])*y,(t[1]-r[3])*y else local y=1/(2*(1+w-u-v)^0.5)return(t[1]+r[3])*y,(t[2]+s[3])*y,0.25/y,(r[2]-s[1])*y end end;function GetQuaternion(z,A,B,C)if type(z)=='number'then if C==nil then if z==z and A==A and B==B then local q,o,p=q,o,p;z,A,B=-q(z*0.5),q(A*0.5),-q(B*0.5)local D,E,F=o(z),o(A),o(B)local G,H,I=p(z),p(A),p(B)return D*H*I-G*E*F,G*E*I+D*H*F,G*H*F-D*E*I,G*H*I+D*E*F else return 0,0,0,1 end else return z,A,B,C end elseif type(z)=='table'then if#z==3 then return RotMatrixToQuat(z,A,B)elseif#z==4 then return z[1],z[2],z[3],z[4]else print('Unsupported Rotation!')end end end;function QuaternionMultiply(J,K,L,M,N,O,P,Q)return J*Q+M*N+K*P-L*O,K*Q+M*O+L*N-J*P,L*Q+M*P+J*O-K*N,M*Q-J*N-K*O-L*P end;function RotatePoint(J,K,L,M,R,S,T,U,V,W)local X,Y,Z=2*(J*S-K*R),2*(J*T-L*R),2*(K*T-L*S)return R+K*X+L*Y+M*Z+U,S-J*X-M*Y+L*Z+V,T+M*X-J*Y-K*Z+W end;function getRotationManager(_,a0,a)local print,type,a1,a2,a3,a4=DUSystem.print,type,table.unpack,QuaternionMultiply,RotatePoint,GetQuaternion;local a5,a6,a7=nil,false,false;local a8=nil;local a9,aa,ab=a0[1],a0[2],a0[3]local ac=false;local ad=math.random()*0.00001;local ae,af,ag,ah=0,0,0,1;local ai,aj,ak,al=0,0,0,1;local am,an,ao=0,1,0;local ap={}local aq=LinkedList(a,'sub')local ar={}local as={0,0,0,1,a9,aa,ab,a9,aa,ab}local function at(au,av,aw,ax,ay,az,aA,aB,aC,aD)if not au then au,av,aw,ax,ay,az,aA,aB,aC,aD=a1(as)else as={au,av,aw,ax,ay,az,aA,aB,aC,aD}end;local aE,aF,aG;if not ac then aE,aF,aG=a9-ay,aa-az,ab-aA else aE,aF,aG=a9,aa,ab end;if ax~=1 and ax~=-1 then a0[1],a0[2],a0[3]=a3(au,av,aw,-ax,aE,aF,aG,aB,aC,aD)if al~=1 then au,av,aw,ax=a2(au,av,aw,ax,ai,aj,ak,al)end else a0[1],a0[2],a0[3]=aB+aE,aC+aF,aD+aG;if al~=1 then au,av,aw,ax=ai,aj,ak,al end end;_[1],_[2],_[3],_[4]=au,av,aw,ax;if a7 then am,an,ao=2*(au*av+aw*ax),1-2*(au*au+aw*aw),2*(av*aw-au*ax)end;local aH,aI=aq.subGetData()for aJ=1,aI do aH[aJ].update(au,av,aw,ax,a9,aa,ab,a0[1],a0[2],a0[3])end;a6=false end;ar.update=at;local function aK()if not a5 then at()else a5.bubble()end end;local function aL()local aM,aN,aO,aP=a4(ae,af,ag,ah)if aM~=ai or aN~=aj or aO~=ak or aP~=al then ai,aj,ak,al=aM,aN,aO,aP;aK()ar.bubble()return true end;return false end;function ar.enableNormal()a7=true end;function ar.disableNormal()a7=false end;function ar.setSuperManager(aQ)a5=aQ;if not aQ then as={0,0,0,1,a9,aa,ab,a9,aa,ab}a6=true end end;function ar.addToQueue(aR)if not a6 then ap[#ap+1]=aR end end;function ar.addSubRotation(aQ)aQ.setSuperManager(ar)aq.subAdd(aQ,true)ar.bubble()end;function ar.remove()if a5 then a5.removeSubRotation(ar)ar.setSuperManager(false)ar.bubble()end end;function ar.removeSubRotation(aS)aS.setSuperManager(false)aq.subRemove(aS)end;function ar.bubble()if a5 and not a6 then ap={}a6=true;a5.addToQueue(at)else a6=true end end;function ar.checkUpdate()local aT=a6;if aT then at()ap={}else for aJ=1,#ap do ap[aJ]()end;ap={}end;return aT end;local a8=ar.bubble;local function aU(aV,aW)aV.update=at;function aV.getPosition()return a9,aa,ab end;function aV.getRotationManger()return ar end;function aV.getSubRotationData()return aq.subGetData()end;aV.checkUpdate=ar.checkUpdate;function aV.setPosition(aM,aN,aO)if not(aM~=aM or aN~=aN or aO~=aO)then local aX=aN+ad;if a9~=aM or aa~=aX or ab~=aO then a9,aa,ab=aM,aX,aO;a8()return true end end;return false end;function aV.getNormal()return am,an,ao end;function aV.rotateXYZ(aY,aZ,a_,b0)if aY and aZ and a_ then ae,af,ag,ah=aY,aZ,a_,b0;aL()if aW then aW()end else if type(aY)=='table'then if#aY==3 then ae,af,ag,ah=aY[1],aY[2],aY[3],nil;local b1=aL()if aW then aW()end;goto b2 end end;print('Invalid format. Must be three angles, or right, forward and up vectors, or a quaternion. Use radians if angles.')::b2::return false end end;function aV.rotateX(aY)ae=aY;ah=nil;aL()if aW then aW()end end;function aV.rotateY(aZ)af=aZ;ah=nil;aL()if aW then aW()end end;function aV.rotateZ(a_)ag=a_;ah=nil;aL()if aW then aW()end end;function aV.setPositionIsRelative(b3)ac=b3;a8()end;function aV.getRotation()return ai,aj,ak,al end end;ar.assignFunctions=aU;return ar end;local b4=math.atan;local a1,pairs,print=table.unpack,pairs,DUSystem.print;local b5={lowercase=false,uppercase=true,[10]={{},16,'',10},[32]={{},10,'',32},[33]={{4,0,3,2,5,2,4,4,4,12},10,'M%g %gL%g %gL%g %gZ M%g %gL%g %g',33},[34]={{2,10,2,6,6,10,6,6},6,'M%g %gL%g %g M%g %gL%g %g',34},[35]={{0,4,8,4,6,2,6,10,8,8,0,8,2,10,2,2},10,'M%g %gL%g %g M%g %gL%g %g M%g %gL%g %g M%g %gL%g %g',35},[36]={{6,2,2,6,6,10,4,12,4,0},6,'M%g %gL%g %gL%g %g M%g %gL%g %g',36},[37]={{0,0,8,12,2,10,2,8,6,4,6,2},10,'M%g %gL%g %g M%g %gL%g %g M%g %gL%g %g',37},[38]={{8,0,4,12,8,8,0,4,4,0,8,4},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',38},[39]={{0,8,0,12},2,'M%g %gL%g %g',39},[40]={{6,0,2,4,2,8,6,12},8,'M%g %gL%g %gL%g %gL%g %g',40},[41]={{2,0,6,4,6,8,2,12},8,'M%g %gL%g %gL%g %gL%g %g',41},[42]={{0,0,4,12,8,0,0,8,8,8,0,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',42},[43]={{1,6,7,6,4,9,4,3},10,'M%g %gL%g %gM%g %gL%g %g',43},[44]={{0,-2,2,1},4,'M%g %gL%g %g',44},[45]={{2,6,6,6},10,'M%g %gL%g %g',45},[46]={{0,0,1,0},3,'M%g %gL%g %g',46},[47]={{2,0,10,12},12,'M%g %gL%g %g',47},[48]={{1,0,9,0,9,12,1,12,1,0,9,12},10,'M%g %gL%g %gL%g %gL%g %gZ M%g %gL%g %g',48},[49]={{5,0,5,12,3,10},10,'M%g %gL%g %gL%g %g',49},[50]={{1,12,9,12,9,7,1,5,1,0,9,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',50},[51]={{1,12,9,12,9,0,1,0,1,6,9,6},10,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',51},[52]={{1,12,1,6,9,6,9,12,9,0},10,'M%g %gL%g %gL%g %g M%g %gL%g %g',52},[53]={{1,0,9,0,9,6,1,7,1,12,9,12},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',53},[54]={{1,12,1,0,9,0,9,5,1,7},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',54},[55]={{1,12,9,12,9,6,5,0},10,'M%g %gL%g %gL%g %gL%g %g',55},[56]={{1,0,9,0,9,12,1,12,1,6,9,6},10,'M%g %gL%g %gL%g %gL%g %gZ M%g %gL%g %g',56},[57]={{9,0,9,12,1,12,1,7,9,5},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',57},[58]={{4,9,4,7,4,5,4,3},2,'M%g %gL%g %g M%g %gL%g %g',58},[59]={{4,9,4,7,4,5,1,2},5,'M%g %gL%g %g M%g %gL%g %g',59},[60]={{6,0,2,6,6,12},6,'M%g %gL%g %gL%g %g',60},[61]={{1,4,7,4,1,8,7,8},8,'M%g %gL%g %g M%g %gL%g %g',61},[62]={{2,0,6,6,2,12},6,'M%g %gL%g %gL%g %g',62},[63]={{0,8,4,12,8,8,4,4,4,1,4,0},10,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',63},[64]={{8,4,4,0,0,4,0,8,4,12,8,8,4,4,3,6},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',64},[65]={{0,0,0,8,4,12,8,8,8,0,0,4,8,4},10,'M%g %gL%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',65},[66]={{0,0,0,12,4,12,8,10,4,6,8,2,4,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %gL%g %gZ',66},[67]={{8,0,0,0,0,12,8,12},10,'M%g %gL%g %gL%g %gL%g %g',67},[68]={{0,0,0,12,4,12,8,8,8,4,4,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %gZ',68},[69]={{8,0,0,0,0,12,8,12,0,6,6,6},10,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',69},[70]={{0,0,0,12,8,12,0,6,6,6},10,'M%g %gL%g %gL%g %g M%g %gL%g %g',70},[71]={{6,6,8,4,8,0,0,0,0,12,8,12},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',71},[72]={{0,0,0,12,0,6,8,6,8,12,8,0},10,'M%g %gL%g %g M%g %gL%g %g M%g %gL%g %g',72},[73]={{0,0,8,0,4,0,4,12,0,12,8,12},10,'M%g %gL%g %g M%g %gL%g %g M%g %gL%g %g',73},[74]={{0,4,4,0,8,0,8,12},10,'M%g %gL%g %gL%g %gL%g %g',74},[75]={{0,0,0,12,8,12,0,6,6,0},10,'M%g %gL%g %g M%g %gL%g %gL%g %g',75},[76]={{8,0,0,0,0,12},10,'M%g %gL%g %gL%g %g',76},[77]={{0,0,0,12,4,8,8,12,8,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',77},[78]={{0,0,0,12,8,0,8,12},10,'M%g %gL%g %gL%g %gL%g %g',78},[79]={{0,0,0,12,8,12,8,0},10,'M%g %gL%g %gL%g %gL%g %gZ',79},[80]={{0,0,0,12,8,12,8,6,0,5},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',80},[81]={{0,0,0,12,8,12,8,4,4,4,8,0},10,'M%g %gL%g %gL%g %gL%g %gZ M%g %gL%g %g',81},[82]={{0,0,0,12,8,12,8,6,0,5,4,5,8,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',82},[83]={{0,2,2,0,8,0,8,5,0,7,0,12,6,12,8,10},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',83},[84]={{0,12,8,12,4,12,4,0},10,'M%g %gL%g %g M%g %gL%g %g',84},[85]={{0,12,0,2,4,0,8,2,8,12},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',85},[86]={{0,12,4,0,8,12},10,'M%g %gL%g %gL%g %g',86},[87]={{0,12,2,0,4,4,6,0,8,12},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',87},[88]={{0,0,8,12,0,12,8,0},10,'M%g %gL%g %g M%g %gL%g %g',88},[89]={{0,12,4,6,8,12,4,6,4,0},10,'M%g %gL%g %gL%g %g M%g %gL%g %g',89},[90]={{0,12,8,12,0,0,8,0,2,6,6,6},10,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',90},[91]={{6,0,2,0,2,12,6,12},6,'M%g %gL%g %gL%g %gL%g %g',91},[92]={{1,12,9,0},10,'M%g %gL%g %g',92},[93]={{2,0,6,0,6,12,2,12},6,'M%g %gL%g %gL%g %gL%g %g',93},[94]={{2,6,4,12,6,6},6,'M%g %gL%g %gL%g %g',94},[95]={{0,0,8,0},10,'M%g %gL%g %g',95},[96]={{2,12,6,8},6,'M%g %gL%g %g',96},[123]={{6,0,4,2,4,10,6,12,2,6,4,6},6,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',123},[124]={{4,0,4,5,4,6,4,12},6,'M%g %gL%g %g M%g %gL%g %g',124},[125]={{4,0,6,2,6,10,4,12,6,6,8,6},6,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',125},[126]={{0,4,2,8,6,4,8,8},10,'M%g %gL%g %gL%g %gL%g %g',126}}STROKE_LINE_CAP={butt='butt',round='round',square='square'}STROKE_LINE_JOIN={miter='miter',miterclip='miter-clip',round='round',bevel='bevel',arcs='arcs'}function SetDefaultFont(b6)local b7=pcall(function()return require('Fonts/'..b6)end)if b7 then b5=require('Fonts/'..b6)else print('ERROR: Font \''..b6 ..'\' not found!')end end;function PathBuilder()local b8={}local b9=1;local ba={}local bb=1;local table=table;local bc,bd,pairs,print=table.concat,table.insert,pairs,print;local be={Id={nil,nil,'id','%s'},Class={nil,nil,'class','%s'},Style={nil,nil,'style','%s'},Fill={nil,nil,'fill','%s'},FillOpacity={nil,nil,'fill-opacity','%g'},Stroke={nil,nil,'stroke','%s'},StrokeOpacity={nil,nil,'stroke-opacity','%g'},StrokeWidth={nil,nil,'stroke-width','%gpx'},StrokeLineCap={nil,nil,'stroke-linecap','%s'},StrokeLineJoin={nil,nil,'stroke-linejoin','%s'},StrokeMiterLimit={nil,nil,'stroke-miterlimit','%g'},StrokeDashArray={nil,nil,'stroke-dasharray','%s'},StrokeDashOffset={nil,nil,'stroke-dashoffset','%s'}}local bf={}local bg=0;function bf.moveTo(z,A)bg=1;b8[b9],b8[b9+1],ba[bb]=z,A,'M%g %g'bb=bb+1;b9=b9+2;return bf end;function bf.lineTo(z,A)b8[b9],b8[b9+1],ba[bb]=z,A,'L%g %g'bb=bb+1;b9=b9+2;return bf end;function bf.cubicCurve(bh,bi,bj,bk,z,A)bg=2;b8[b9],b8[b9+1],b8[b9+2],b8[b9+3],b8[b9+4],b8[b9+5],ba[bb]=bh,bi,bj,bk,z,A,'C%g %g %g %g %g %g'bb=bb+1;b9=b9+6;return bf end;function bf.smoothCubicCurve(bh,bi,z,A)if bg==2 then b8[b9],b8[b9+1],b8[b9+2],b8[b9+3],ba[bb]=bh,bi,z,A,'S%g %g %g %g'bb=bb+1;b9=b9+4 else print('Invalid command for Smooth Cubic Curve, preceed with a cubic.')end;return bf end;function bf.quadCurve(bh,bi,z,A)bg=3;b8[b9],b8[b9+1],b8[b9+2],b8[b9+3],ba[bb]=bh,bi,z,A,'Q%g %g %g %g'bb=bb+1;b9=b9+4;return bf end;function bf.smoothQuadCurve(z,A)if bg==3 then b8[b9],b8[b9+1],ba[bb]=z,A,'T%g %g'bb=bb+1;b9=b9+2 else print('Invalid command for Smooth Quad Curve, preceed with a quad.')end;return bf end;function bf.closePath()bg=0;ba[bb]='Z'bb=bb+1;return bf end;for bl,bm in pairs(be)do bf['set'..bl]=function(bn,bo)local bp=be[bl]bp[1],bp[2]=bn,bo;return bf end end;function bf.getPoints()return b8 end;function bf.getResult()local bq={}local br={['sizes']=bq}local bs=1;local bt,bu={'<path '},2;for bl,bm in pairs(be)do if bm[1]then if bm[2]then if bl=='StrokeWidth'then bq[1]=bm[1]bu=bu+1;bd(bt,2,'stroke-width="'..bm[4]..'" ')else br[bs]=bm[1]bs=bs+1;bt[bu]=bm[3]..'="'..bm[4]..'" 'bu=bu+1 end elseif bm[2]==false or bm[2]==nil then if bl=='StrokeWidth'then bu=bu+1;bd(bt,2,'stroke-width="'..bm[1]..'px" ')else bt[bu]=bm[3]..'="'..bm[1]..'" 'bu=bu+1 end end end end;bt[bu]='d="'bt[bu+1]=bc(ba)bt[bu+2]='"/>'return bc(bt),br,b8 end;return bf end;function LoadUIModule(self,bv,bw)local bx=math.random;function self.setUIElements(by)by=by or 1;local bz,a1=table.remove,table.unpack;local function bA(bB,bC,bD)local bE=#bB;if bE>=60 then return false end;if bD==1 then return{{a1(bB)},{a1(bC)}}else local bF,bG={},{}for aJ=1,bE do bF[aJ]=bB[aJ]*bD;bG[aJ]=bC[aJ]*bD end;return{bF,bG}end end;local bH=LinkedList('Draw','draw')local bI=LinkedList('Action','action')bv[by]={bH,bI}local self={}local function bJ(z,A,B)if not(z and A and B)then print('Invalid coordinate set for UI element, defaulting to 0, 0, 0.')z,A,B=0,0,0 end;local bK=false;local bL=math.huge;local bM,bN,bO,bP=-bL,bL,-bL,bL;local bQ=1;local bR,bS={},{}local bT={false,false,false,false,false,false,false}local bU={0,0,0,1}local bV={z,A,B}local bW=getRotationManager(bU,bV,'Element')bw.addSubRotation(bW)local bX={false,false,false,bT,1,false,bR,bS,bV,false,bU,false}function bX.addSubElement(bY)bW.addSubRotation(bY.getRotationManger())end;function bX.removeSubElement(bY,bZ)bW.removeSubRotation(bY.getRotationManger())if bZ then bY.remove(bZ)else bw.addSubRotation(bY.getRotationManager())end end;function bX.remove(bZ)if not bK then local b_,bE=bW.getSubRotationData()for aJ=1,bE do bX.removeSubElement(b_[aJ],bZ)end;bH.drawRemove(bX)bI.actionRemove(bX)bW.remove()bK=true else print('Error: Trying to remove an already removed element.')end end;local function c0(z,A)if z>bM then bM=z end;if z<bN then bN=z end;if A>bO then bO=A end;if A<bP then bP=A end end;function bX.addPoint(z,A)local c1=#bR+1;if z and A then c0(z,A)bR[c1],bS[c1]=z,A else if type(z)=='table'and#z>0 then local z,A=z[1],z[2]c0(z,A)bR[c1],bS[c1]=z,A else print('Invalid format for point.')end end end;function bX.addPoints(b8)local c2,c3=bR,bS;if b8 then local c4=#b8;if c4>0 then local c5=type(b8[1])if c5=='number'then local c6=#c2;local c7=1;for aJ=1,c4,2 do local c8=c6+c7;local z,A=b8[aJ],b8[aJ+1]c0(z,A)c2[c8],c3[c8]=z,A;c7=c7+1 end elseif c5=='table'then local c6=#c2;for aJ=1,c4 do local c8=c6+aJ;local c9=b8[aJ]local z,A=c9[1],c9[2]c0(z,A)c2[c8],c3[c8]=z,A end else print('No compatible format found.')end end end end;function bX.getRotationManager()return bW end;bW.assignFunctions(bX)bX.setPositionIsRelative(true)local function ca(cb)local cc=select(2,cb:gsub("%%",""))local c4=#bX[7]*2;local cd=bX[6]local ce=0;if cd then ce=ce+#cd;local bq=cd.sizes;if bq then ce=ce+#bq end end;ce=c4+ce;if ce~=cc then print('Input Parity Failed for '..bX.toString()..'. It has '..cc..' in the draw string while it has '..ce..' values stored for access, with '..c4 ..' being point data. Try set the draw string last.')end end;local function cf()local cg=bX[2]if cg then if not bX[3]then bX[3]=bX[2]end;if not bX[1]then bX[1]=bX[2]end end;bX[12]=cg;bX.showDraw()end;local function ch()bX.showActionable()end;function bX.setHoverDraw(ci)bX[1]=ci;ca(ci)cf()end;function bX.setDefaultDraw(cj)bX[2]=cj;ca(cj)cf()end;function bX.setClickDraw(ck)bX[3]=ck;ca(ck)cf()end;function bX.setClickAction(cl)bT[1]=cl;ch()end;function bX.setHoldAction(cl)bT[2]=cl;ch()end;function bX.setEnterAction(cl)bT[3]=cl;ch()end;function bX.setLeaveAction(cl)bT[4]=cl;ch()end;function bX.setHoverAction(cl)bT[5]=cl;ch()end;function bX.setScale(bD)bX[5]=bD end;function bX.getMaxValues()return bM,bN,bO,bP end;function bX.hideDraw()bH.drawRemove(bX)end;function bX.showDraw()bH.drawAdd(bX)end;function bX.hideActionable()bI.actionRemove(bX)bW.disableNormal()end;function bX.showActionable()bI.actionAdd(bX)bW.enableNormal()end;local cm,cn=0,0;function bX.move(co,cp,cq,cr)if not cq then for aJ=1,#bR do bR[aJ]=bR[aJ]-cm+co;bS[aJ]=bS[aJ]-cn+cp end;bM,bN,bO,bP=bM+co,bN+co,bO+cp,bP+cp else for aJ=1,#cq do local c8=cq[aJ]bR[c8]=bR[c8]-cm+co;bS[c8]=bS[c8]-cn+cp end end;cm=co;cn=cp;if cr then bX.setBounds(bA(bR,bS,bQ))end end;local cs,ct;function bX.moveTo(co,cp,cq,cr,cu)if not cq then print('ERROR: No indices specified!')else if not cs then cs={a1(bR)}ct={a1(bS)}end;for aJ=1,#cq do local c8=cq[aJ]if not cu then bR[c8]=co;bS[c8]=cp else bR[c8]=cs[c8]+co;bS[c8]=ct[c8]+cp end end end;if cr then bX.setBounds(bA(bR,bS,bQ))end end;function bX.setDrawData(cd)bX[6]=cd end;function bX.getDrawData()return bX[6]end;function bX.setSizes(bq)if not bX[6]then bX[6]={['sizes']=bq}else bX[6].sizes=bq end end;function bX.getPoints()return bX[7],bX[8]end;function bX.setPoints(bB,bC)if not bC then bX.addPoints(bB)else bR,bS=bB,bC;bX[7],bX[8]=bB,bC end end;function bX.setBounds(cv)bX[10]=cv end;function bX.setBoundsScale(cw)bQ=cw end;function bX.usePathBuilder(cx)local cb,br,b8=cx.getResult()bX.addPoints(b8)bX.setDrawData(br)bX.setDefaultDraw(cb)end;function bX.toString()local cy='Generic'if bX.setFontSize then cy='Text'elseif bX.setText then cy='Button'elseif bX.getProgress then cy='Progress Bar'end;return'['..cy..'] '..bX[2]end;function bX.build(cz,cA)if bX[2]then if not cz then if cA or cA==nil then bX.setBounds(bA(bR,bS,bQ))else bX.setBounds(false)end end else print("Element Malformed: No default draw.")end end;return bX end;local pcall,require=pcall,require;function self.createText(aM,aN,aO,b6)local bc,cB,cC,cD=table.concat,string.byte,string.upper,string.lower;local cE=bJ(aM,aN,aO)local cF=b5;if b6 then local b7=pcall(function()return require('Fonts/'..b6)end)if b7 then cF=require('Fonts/'..b6)else DUSystem.print('ERROR: Font \''..b6 ..'\' not found! Defaulting')end end;local cG,cH,cI,cJ={},{},0,''local cd={['sizes']={0.08333333333},'white',1}local cK,cL='middle','middle'local cM=1;local cN,cO=0,0;local bM,bN,bO,bP=cE.getMaxValues()cE.setDrawData(cd)local cP=cE.getMaxValues;function cE.getMaxValues()return bM,bN,bO,bP end;function cE.getText()return cJ end;local function cQ(cR)cJ=cR;if not cF.lowercase and cF.uppercase then cR=cC(cR)elseif cF.lowercase and not cF.uppercase then cR=cD(cR)end;local b1={cB(cR,1,#cR)}cG={}local cS=cF;for bl=1,#b1 do local cT=b1[bl]cG[bl]=cS[cT]end end;local function cU()cH={0}local cV=1;local cW,aX=0,0;local cX=cd.sizes[1]/cM;for bl=1,#cG do local cY=cG[bl]if cY[4]==10 then aX=aX+cY[2]*cX;if cK=="middle"then cW=-cW*0.5 elseif cK=="end"then cW=-cW elseif cK=="start"then cW=0 end;cH[cV]=cW;cV=cV+1;cW=0 else cW=cW+cY[2]*cX end end;if cK=="middle"then cW=-cW*0.5 elseif cK=="end"then cW=-cW elseif cK=="start"then cW=0 end;if cL=='middle'then aX=aX+12*cX;cI=-aX*0.5 elseif cL=='top'then aX=aX+12*cX;cI=-aX elseif cL=='bottom'then cI=0 end;cH[cV]=cW end;local function c0(z,A)if z>bM then bM=z end;if z<bN then bN=z end;if A>bO then bO=A end;if A<bP then bP=A end end;local function cZ()local c_=cI+cO;local d0,cV=cH[1]+cN,1;local cX=cd.sizes[1]/cM;local bB,bC,d1={},{},{'<path stroke-width="%gpx" stroke="%s" stroke-opacity="%g" fill="none" d="'}local cc=1;local d2=#cG;bM,bN,bO,bP=cP()for bl=1,d2 do local cY=cG[bl]d1[bl+1]=cY[3]local d3,d4=cY[1],cY[2]for d5=1,#d3,2 do local z,A=d3[d5]*cX+d0,d3[d5+1]*cX+c_;c0(z,A)bB[cc]=z;bC[cc]=A;cc=cc+1 end;d0=d0+d4*cX;if cY[4]==10 then cV=cV+1;d0=cH[cV]+cN;c_=c_-d4*cX end end;d1[d2+2]='"/>'cE.setPoints(bB,bC)cE.setDefaultDraw(bc(d1))end;function cE.setText(cR)cQ(cR)cU()cZ()end;cE.usePathBuilder=nil;function cE.setWeight(bD)local bq=cd.sizes;bq[1]=bq[1]/cM;cM=bD or cM;bq[1]=bq[1]*cM;if#cG>0 then cZ()end end;local d6=cE.move;local d7,d8=0,0;function cE.move(z,A)cN=cN-d7+z;cO=cO-d8+A;d7=z;d8=A;d6(z,A)end;function cE.setFontSize(bE)local bq=cd.sizes;bq[1]=bE*0.08333333333;if#cG>0 then cU()cZ()end end;function cE.setAlignmentX(d9)cK=d9;if#cG>0 then cU()cZ()end end;function cE.setAlignmentY(da)cL=da;if#cG>0 then cU()cZ()end end;function cE.setFontColor(db)cd[1]=db end;function cE.setOpacity(dc)cd[2]=dc end;return cE end;function self.createButton(N,O,P)local cE=bJ(N,O,P)local dd=nil;function cE.setText(cR,de,df,dg)de,df,dg=de or 0,df or-0.001,dg or 0;if not dd then dd=self.createText(N+de,O+df,P+dg)cE.addSubElement(dd)else dd.setPosition(N+de,O+df,P+dg)end;local bM,bN,bO,bP=cE.getMaxValues()local dh=bO-bP;local di=bM-bN;dd.setText(cR)local dj,dk,dl,dm=dd.getMaxValues()local dn=dl-dm;local dp=dj-dk;local dq,dr=dn/dh,dp/di;if dq<dr then local bE=dn/dr;dd.setFontSize(bE*0.85)else local bE=dn/dq;dd.setFontSize(bE*0.75)end;return dd end;function cE.getText()return dd.getText()end;local ds=cE.move;function cE.move(co,cp,cq,cr)ds(co,cp,cq,cr)if dd then dd.move(co,cp)end end;return cE end;function self.createProgressBar(dt,du,dv)local dw=bJ(dt,du,dv)local dx=bJ(0,0,0)dx.setPositionIsRelative(true)dw.addSubElement(dx)local dy={}local dz={}local dA={}local dB=100;function dw.getIntervals()return dA end;function dw.getProgress(a9)local b8=dx.getPoints()if a9 then local b9=dA[1]local dC=b9[1]local dD=(a9-b8[dy[1]])/dC;if dD<0 then return 0.001 elseif dD>100 then return 100 else return dD end end;return dB end;local function dE()local dF=#dy;local dG=#dz;local bB,bC=dx.getPoints()if#bB>0 then if dF==dG and dF>0 then for aJ=1,dF do local dH=dy[aJ]local dI=dz[aJ]local dJ=(bB[dI]-bB[dH])*0.01;local dK=(bC[dI]-bC[dH])*0.01;dA[aJ]={dJ,dK}end end end end;function dw.setStartIndices(cq)dy=cq;dE()end;function dw.setEndIndices(cq)dz=cq;dE()end;local dL=dw.addPoints;function dw.addPoints(b8)dL(b8)dE()end;function dw.setProgress(dD)dB=dD or 0;if dB<0 then dB=0 end;if dB==0 then dx.hide()else if dw.isShown()then dx.show()end end;if dB>100 then dB=100 end;local bB,bC=dx.getPoints()for aJ=1,#dz do local b9=dA[aJ]local dH=dy[aJ]local dI=dz[aJ]bB[dI]=bB[dH]+b9[1]*dB;bC[dI]=bC[dH]+b9[2]*dB end end;local dM=dw.show;local dN=dw.hide;function dw.hide()dN()dx.hide()end;function dw.show()if dB~=0 then dx.show()end;dM()end;dw.setFillPoints=dx.addPoints;dw.getFillDrawData=dx.getDrawData;dw.setFillDrawData=dx.setDrawData;dw.setFillDraw=dx.setDefaultDraw;dw.setFillOffsetPosition=dx.setPosition;function dw.usePathBuilder(cx)local cb,br,b8=cx.getResult()dw.addPoints(b8)dw.setDrawData(br)dw.setDefaultDraw(cb)end;function dw.useFillPathBuilder(cx)local cb,br,b8=cx.getResult()dw.setFillPoints(b8)dw.setFillDrawData(br)dw.setFillDraw(cb)end;return dw end;self.createCustomDraw=bJ;return self end end;function ProcessOrientations(dO,dP,dQ,dR,dS,dT,dU)return function(dV)local dW=dV[11]local dX,dY,dZ,d_=dW[1],dW[2],dW[3],dW[4]local e0=dX..','..dY..','..dZ..','..d_;local e1=dO[e0]if e1 then goto e2 end;do local dP,dQ,dR,dS,dT,dU=dP,dQ,dR,dS,dT,dU;local de,df,dg,e3=dX*dS+d_*dP+dY*dR-dZ*dQ,dY*dS+d_*dQ+dZ*dP-dX*dR,dZ*dS+d_*dR+dX*dQ-dY*dP,d_*dS-dX*dP-dY*dQ-dZ*dR;local e4,e5,e6=df*df,de*dg,df*e3;e1={2*(0.5-e4-dg*dg)*dT,2*(e5-e6)*dT,2*(de*df-dg*e3),2*(df*dg+de*e3),2*(e5+e6)*dU,2*(0.5-de*de-e4)*dU}dO[e0]=e1 end::e2::return e1 end end;function ProcessUIModule(e7,bv,e8,e9,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en)local eo=table.move;for aJ=1,#bv do local ep=bv[aJ]local eq,bE=ep[1].drawGetData()for aJ=1,bE do local dV=eq[aJ]local er=dV[9]local es,et,eu=er[1],er[2],er[3]local ev=ed*es+ee*et+ef*eu+ek;if ev<0 then goto ew end;local ex={}local ey=1;local ez,eA=ea*es+eb*et+ec*eu+ej,eg*es+eh*et+ei*eu+el;local eB,eC,eD,eE,eF,eG=a1(em(dV))local bD,cd,bB,bC=dV[5],dV[6],dV[7],dV[8]local bq=cd.sizes;if bq then for eH=1,#bq do ex[ey]=b4(bq[eH],ev)*en;ey=ey+1 end end;local eI=#cd;eo(cd,1,eI,ey,ex)ey=ey+eI;for eJ=1,#bB do local dt,dv=bB[eJ]*bD,bC[eJ]*bD;local eK=eD*dt+eE*dv+ev;if eK<0 then goto ew end;ex[ey]=(eB*dt+eC*dv+ez)/eK;ex[ey+1]=(eF*dt+eG*dv+eA)/eK;ey=ey+2 end;e7=e7+1;e9[e7]=-ev;e8[-ev]=dV[12]:format(a1(ex))::ew::end end;return e7 end;function ProcessActionEvents(bv,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,em,eV,eW,eX,eY)local eZ,e_,f0={},{},0;for aJ=1,#bv do local ep=bv[aJ]local eq,bE=ep[2].actionGetData()for d5=1,bE do local dV=eq[d5]local er=dV[9]local f1,f2,f3=er[1],er[2],er[3]local f4=eO*f1+eP*f2+eQ*f3+eR;if f4<0 then goto ew end;f0=f0+1;local f5,f6,f7=eV-f1,eW-f2,eX-f3;local f8,f9,fa=dV.getNormal()local x=-(f5*f8+f6*f9+f7*fa)/(eS*f8+eT*f9+eU*fa)local function fb()local dV=dV;local e1,x=em(dV),x;local fc,fd,eK=f5+x*eS,f6+x*eT,f7+x*eU;local fe,ff,fg=fc+f1,fd+f2,eK+f3;if not e1[7]then local dW=dV[11]local dX,dY,dZ,d_=dW[1],dW[2],dW[3],dW[4]local fh,fi,fj=dX*dZ,dY*dY,dY*d_;e1[7],e1[8],e1[9],e1[10],e1[11],e1[12]=2*(0.5-fi-dZ*dZ),2*(dX*dY-dZ*d_),2*(fh+fj),2*(fh-fj),2*(dY*dZ+dX*d_),2*(0.5-dX*dX-fi)end;local fk=dV[10]local fl=false;local a9,ab=e1[7]*fc+e1[8]*fd+e1[9]*eK,e1[10]*fc+e1[11]*fd+e1[12]*eK;if type(fk)=="function"then fl=fk(a9,ab,x)else local fm,fn=fk[1],fk[2]local fo=#fm+1;local fp,fq=fm[1],fn[1]local fr=0;for fs=2,fo do local ft=fs%fo;if ft==0 then fr=1 end;local c8=ft+fr;local fu,fv=fm[c8],fn[c8]local bP,bO;if fq<fv then bP,bO=fq,fv else bP,bO=fv,fq end;if ab>bP and ab<=bO then local bM=fp>fu and fp or fu;if a9<=bM then if fq~=fv then if fp==fu or a9<=(ab-fq)*(fu-fp)/(fv-fq)+fp then fl=not fl end end end end;fp,fq=fu,fv end end;if not fl then return false end;local bT,fw,fx=dV[4],dV[3],dV[1]if not eL then local fy=bT[3]if fy then fy(dV,a9,ab,f1,f2,f3,fe,ff,fg)end;dV[12]=fx elseif dV==eL[1]then if eM then local fz=bT[1]if fz then fz(dV,a9,ab,f1,f2,f3,fe,ff,fg)eM=false end;dV[12]=fw elseif eN then local fA=bT[2]if fA then fA(dV,a9,ab,f1,f2,f3,fe,ff,fg)end;dV[12]=fw else local fB=bT[5]if fB then fB(dV,a9,ab,f1,f2,f3,fe,ff,fg)end;dV[12]=fx end else local fy=bT[3]if fy then fy(dV,a9,ab)end;dV[12]=fx;local fC=eL[2][4]eL[1][12]=eL[1][2]if fC then fC(eL[1],eL[3],eL[4])end end;return{dV,bT,a9,ab}end;e_[f0]=x;eZ[x]=fb::ew::end end;eY(e_)local fD=false;for fE=1,f0 do local b7=eZ[e_[fE]]()if b7 then fD=b7;break end end;if not fD and eL then local fC=eL[2][4]if fC then fC(eL[1],eL[3],eL[4])end end;return fD end;function Projector()local fF,fG,fH,math=DUConstruct,DUPlayer,DUSystem,math;local fI,fJ,fK={''},true,true;local fL,fM,fN=fH.getScreenWidth,fH.getScreenHeight,fH.getArkTime;local fO,fP,fQ,fR=fF.getWorldRight,fF.getWorldForward,fF.getWorldUp,fF.getWorldPosition;local fS=fH.getCameraPos;local fT,fU,fV=fH.getCameraForward,fH.getCameraRight,fH.getCameraUp;local fW,fX,fY=RotMatrixToQuat,DULibrary.systemResolution3,QuaternionMultiply;local function fZ(cN,cO,f_,g0,ai,aj,ak,al)if ai then return fY(cN,cO,f_,g0,ai,aj,ak,al)else return fX(cN,cO,f_,g0)end end;local g1,b4,q=math.tan,math.atan,math.rad;local g2=fH.getCameraHorizontalFov;local g3=0;local g4=LinkedList('Group','')local self={}function self.getSize(bE,g5,g6,g7)local g8=b4(bE,g5)*g3;if g6 then if g8>=g6 then return g6 else if g7 then if g8<g7 then return g7 end end;return g8 end end;return g8 end;function self.setSmooth(g9)fK=g9 end;function self.addObjectGroup(ga)g4.Add(ga)end;function self.removeObjectGroup(ga)g4.Remove(ga)end;function self.getSVG()local fN,b4,eY,gb,bc=fN,b4,table.sort,string.format,table.concat;local gc=fN()frameRender=not frameRender;local eM=false;if clicked then clicked=false;eM=true end;local eN=holding;local gd={}local ge,gf=fL(),fM()local gg=ge/gf;local gh=g1(q(g2()*0.5))local en=ge*0.5/gh;g3=en;local gi=1/gh;local gj=gi*gg;local dT,dU=gi*ge*0.5,-gj*gf*0.5;local gk,gl,gm,gn=fU(),fT(),fV(),fS()local go,gp,gq=gn[1],gn[2],gn[3]local eS,eT,eU,gr=fW(gk,gl,gm)local gs=fZ(gk,gl,gm,gn)local ea,eb,ec=gk[1]*dT,gk[2]*dT,gk[3]*dT;local ed,ee,ef=gl[1],gl[2],gl[3]local eg,eh,ei=gm[1]*dU,gm[2]*dU,gm[3]*dU;local ej,ek,el=-gs[1]*dT,-gs[2],-gs[3]*dU;local gt,gu=g4.GetData()local gv,gw,gx={},{},0;local gy=ProcessPureModule;local gz=ProcessUIModule;local gA=ProcessOrientations;local gB=ProcessActionEvents;if gy==nil then gy=function(e7)return e7 end end;if gz==nil then gz=function(e7)return e7 end;gA=function()end;gB=function()end end;local dO={}local gC=fN()-gc;local gD,gE,gF,gG,gH=0,0,0,0,0;for aJ=1,gu do local ga=gt[aJ]if ga.enabled==false then goto gI end;local gJ=ga.objects;local gK,gL=0,0;local e8,e9,e7={},{},0;local gM=true;for d5=1,#gJ do local gN=gJ[d5]if not gN[1]then goto gO end;gN.checkUpdate()local gP,gQ=gN[7],gN[8]local cN,cO,f_,g0=gP[1],gP[2],gP[3],gP[4]local gR=fZ(gk,gl,gm,gQ)local dP,dQ,dR,dS=fZ(cN,cO,f_,g0,eS,eT,eU,gr)local gS=gA(dO,eS,eT,eU,gr,dT,dU)local gT,gU,gV,gW,gX,gY,gZ,g_,h0=2*dP*dP,2*dP*dQ,2*dP*dR,2*dP*dS,2*dQ*dQ,2*dQ*dR,2*dQ*dS,2*dR*dR,2*dR*dS;local h1,h2,h3,h4=(1-gX-g_)*dT,(gU+h0)*dT,(gV-gZ)*dT,gR[1]*dT+ej;local eO,eP,eQ,eR=gU-h0,1-gT-g_,gY+gW,gR[2]+ek;local h5,h6,h7,h8=(gV+gZ)*dU,(gY-gW)*dU,(1-gT-gX)*dU,gR[3]*dU+el;dO[cN..','..cO..','..f_..','..g0]={h1,h3,eO,eQ,h5,h7}gK=gK+eR;local bv=gN[4]local h9=fN()gN.previousUI=gB(bv,gN.previousUI,eM,eN,eO,eP,eQ,eR,ed,ee,ef,gS,go,gp,gq,eY)local ha=fN()gE=gE+ha-h9;e7=gy(e7,gN[2],gN[3],e8,e9,h1,h2,h3,h4,eO,eP,eQ,eR,h5,h6,h7,h8)e7=gz(e7,bv,e8,e9,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,gS,en)gD=gD+fN()-ha::gO::end;local hb=fN()if ga.isZSorting then eY(e9)end;local hc=fN()gF=gF+hc-hb;local hd={}for he=1,e7 do hd[he]=e8[e9[he]]end;local hf=fN()gG=gG+hf-hc;if e7>0 then local hg=gK/gL;local hh=bc(hd)local hi,hj='',''if fK then hj='</div>'if frameRender then hi='<div class="second" style="visibility: hidden">'else hi='<style>.first{animation: f1 0.008s infinite linear;} .second{animation: f2 0.008s infinite linear;} @keyframes f1 {from {visibility: hidden;} to {visibility: hidden;}} @keyframes f2 {from {visibility: visible;} to { visibility: visible;}}</style><div class="first">'end end;local hk=('<style>svg{background:none;width:%gpx;height:%gpx;position:absolute;top:0px;left:0px;}'):format(ge,gf)local hl=('<svg viewbox="-%g -%g %g %g"'):format(ge*0.5,gf*0.5,ge,gf)gx=gx+1;gw[gx]=hg;if ga.glow then local bE;if ga.scale then bE=b4(ga.gRad,hg)*en else bE=ga.gRad end;gv[hg]=bc({hi,'<div class="',ga.class,'">',hk,ga.style,'.blur { filter: blur(',bE,'px) brightness(60%) saturate(3);',ga.gStyle,'}</style>',hl,' class="blur">',hh,'</svg>',hl,'>',hh,'</svg></div>',hj})else gv[hg]=bc({hi,'<div class="',ga.class,'">',hk,ga.style,'}</style>',hl,'>',hh,'</svg></div>',hj})end end;gH=gH+fN()-hf::gI::end;eY(gw)for aJ=1,gx do gd[aJ]=gv[gw[aJ]]end;if frameRender then fI[2]=bc(gd)return bc(fI),gC,gD,gE,gF,gG,gH else if fK then fI[1]=bc(gd)else fI[1]=''end;return nil end end;return self end;function LoadPureModule(self,hm,hn)function self.getMultiPointBuilder(by)local bf={}local ho=LinkedList('','')hn[#hn+1]=ho;function bf.addMultiPointSVG()local hp=false;local bR,bS,hq={},{},{}local hr={bR,bS,hq,false,false}local self={}local c1=1;function self.show()if not hp then hp=true;ho.Add(hr)end end;function self.hide()if hp then hp=false;ho.Remove(hr)end end;function self.addPoint(c9)bR[c1]=c9[1]bS[c1]=c9[2]hq[c1]=c9[3]c1=c1+1;return self end;function self.setPoints(hs)for aJ=1,#hs do local c9=hs[aJ]bR[aJ]=c9[1]bS[aJ]=c9[2]hq[aJ]=c9[3]end;c1=#hs+1;return self end;function self.setDrawFunction(ht)hr[4]=ht;return self end;function self.setData(hu)hr[5]=hu;return self end;function self.build()if c1>1 then ho.Add(hr)hp=true else print("WARNING! Malformed multi-point build operation, no points specified. Ignoring.")end end;return self end;return bf end;function self.getSinglePointBuilder(by)local bf={}local b8=LinkedList('','')hm[#hm+1]=b8;function bf.addSinglePointSVG()local hp=false;local hv={false,false,false,false,false}function self.setPosition(fc,fd,eK)if type(fc)=='table'then hv[1],hv[2],hv[3]=fc[1],fc[2],fc[3]else hv[1],hv[2],hv[3]=fc,fd,eK end;return self end;function self.setDrawFunction(ht)hv[4]=ht;return self end;function self.setData(hu)hv[5]=hu;return self end;function self.show()if~hp then hp=true end end;function self.hide()if hp then b8.Remove(hv)hp=false end end;function self.build()b8.Add(hv)hp=true;return self end;return self end;return bf end end;function ProcessPureModule(e7,hm,hn,e8,e9,h1,h2,h3,h4,eO,eP,eQ,eR,h5,h6,h7,h8)for hw=1,#hm do local hx=hm[hw]local hy,hz=hx.GetData()for hA=1,hz do local hm=hy[hA]local z,A,B=hm[1],hm[2],hm[3]local eK=eO*z+eP*A+eQ*B+eR;if eK<0 then goto hB end;e7=e7+1;e9[e7]=-eK;e8[-eK]=hm[4]((h1*z+h2*A+h3*B+h4)/eK,(h5*z+h6*A+h7*B+h8)/eK,eK,hm[5])::hB::end end;for hw=1,#hn do local hx=hn[hw]local hC,hD=hx.GetData()for hE=1,hD do local hn=hC[hE]local hF,hG,hH={},{},{}local bB,bC,hI=hn[1],hn[2],hn[3]local bE=#bB;local hJ=0;for c1=1,bE do local z,A,B=bB[c1],bC[c1],hI[c1]local eK=eO*z+eP*A+eQ*B+eR;if eK<0 then goto hB end;hF[c1],hG[c1]=(h1*z+h2*A+h3*B+h4)/eK,(h5*z+h6*A+h7*B+h8)/eK;hJ=hJ+eK end;local hK=-hJ/bE;e7=e7+1;e9[e7]=hK;e8[hK]=hn[4](hF,hG,hK,hn[5])::hB::end end;return e7 end;positionTypes={globalP=1,localP=2}orientationTypes={globalO=1,localO=2}local print=DUSystem.print;function ObjectGroup(gJ,hL,hM)local gJ=gJ or{}local self={style='',gStyle='',class='default',objects=gJ,transX=hL,transY=hM,enabled=true,glow=false,gRad=10,scale=false,isZSorting=true}function self.addObject(hN,hO)local hO=hO or#gJ+1;gJ[hO]=hN;return hO end;function self.removeObject(hO)gJ[hO]={}end;function self.hide()self.enabled=false end;function self.show()self.enabled=true end;function self.isEnabled()return self.enabled end;function self.setZSort(hP)self.isZSorting=hP end;function self.setClass(hQ)self.class=hQ end;function self.setStyle(hR)self.style=hR end;function self.setGlowStyle(hS)self.gStyle=hS end;function self.setGlow(hT,hU,bD)self.glow=hT;self.gRad=hU or self.gRad;self.scale=bD or false end;return self end;function Object(hV,hW)local hn,hm,bv={},{},{}local hV=hV;local hW=hW;local hX={0,0,0,1}local hY={0,0,0}local hZ=getRotationManager(hX,hY,'Object Rotation Handler')local h_={}local self={true,hn,hm,bv,hV,hW,hX,hY}hZ.assignFunctions(self)function self.hide()self[1]=false end;function self.show()self[1]=true end;local i0=LoadUIModule;if i0==nil then print('No UI Module installed.')i0=function()end end;local i1=LoadPureModule;if i1==nil then print('No Pure Module installed.')i1=function()end end;i1(self,hn,hm)i0(self,bv,hZ)function self.getRotationManager()return hZ end;function self.addSubObject(hN)hN.setPositionIsRelative(true)return hZ.addSubRotation(hN.getRotationManager())end;function self.removeSubObject(hO)hZ.removeSubRotation(hO)end;return self end;function ObjectBuilderLinear()local self={}function self.setPositionType(hV)local self={}local hV=hV;function self.setOrientationType(hW)local self={}local hW=hW;function self.build()return Object(hV,hW)end;return self end;return self end;return self end

        end)

        package.preload['Sky:atlas.lua']=(function()

        return{[0]={[1]={id=1,name={"Madis","Madis","Madis"},type={"Planet","Planète","Planet"},biosphere={"Barren","Désert","Karg"},classification={"Hyperthermoplanet","Hyperthermoplanète","Hyperthermoplanet"},habitability={"Low","Faible","Niedrig"},description={[[Madis is a barren wasteland of a rock; it sits closest to the sun and temperatures reach extreme highs during the day. The arkship geological survey reports high plateaus intermittently separated by small ravines.]],[[Madis est un rocher stérile. En tant que planète la plus proche du soleil, sa température est extrêmement élevée pendant la journée. L'étude géologique du Vaisseau-Arche signale de longues vallées rocheuses séparées ponctuellement par de petits ravins.]],[[Madis ist eine karge Felsenwüste und hat den engsten Orbit um die Sonne. Tagsüber herrschen extrem hohe Temperaturen. Die geologische Untersuchung des Archenschiffs berichtet von ausgedehnten felsigen Tälern, die ab und zu von kleinen Schluchten unterbrochen werden.]]},iconPath="gui/screen_unit/img/planets/madis.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=true,systemId=0,positionInSystem=1,satellites={10,11,12},center={17465536.00,22665536.00,-34464.00},gravity=3.5325,radius=44300.00,atmosphereThickness=12000.00,atmosphereRadius=56500.00,surfaceArea=24661376667,surfaceAverageAltitude=720.30,surfaceMaxAltitude=1261.97,surfaceMinAltitude=451.43,GM=6932495925.00,maxStaticAltitude=1460.00,ores={4234772167,262147665,3724036288,299255727,2029139010,4041459743},territories=30722},[10]={id=10,name={"Madis Moon 1","Madis Lune 1","Madis Mond 1"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/madis_moon_1.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=1,positionInSystem=1,satellites=nil,center={17448118.86,22966848.03,143079.98},gravity=0.7850,radius=10000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=78500000.00,surfaceArea=1256637056,surfaceAverageAltitude=191.685,surfaceMaxAltitude=458.48,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={299255727,4234772167,343766315,1050500112},territories=1472},[11]={id=11,name={"Madis Moon 2","Madis Lune 2","Madis Mond 2"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/madis_moon_2.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=1,positionInSystem=2,satellites=nil,center={17194626.00,22243633.88,-214962.81},gravity=0.9420,radius=12000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=135648000.00,surfaceArea=1809557376,surfaceAverageAltitude=-1825.951,surfaceMaxAltitude=651.737,surfaceMinAltitude=-4018.44,maxStaticAltitude=2500.00,ores={4234772167,3724036288,2289641763,3837858336},territories=1922},[12]={id=12,name={"Madis Moon 3","Madis Lune 3","Madis Mond 3"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/madis_moon_3.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=1,positionInSystem=3,satellites=nil,center={17520617.44,22184726.90,-309986.22},gravity=1.1775,radius=15000.00,atmosphereThickness=0,atmosphereRadius=0,GM=264937500.00,surfaceArea=2827433472,surfaceAverageAltitude=433.322,surfaceMaxAltitude=1112.76,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={3724036288,262147665,2029139010,1065079614},territories=3632},[2]={id=2,name={"Alioth","Alioth","Alioth"},type={"Planet","Planète","Planet"},biosphere={"Forest","Forêt","Wald"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"High","Élevée","Hoch"},description={[[Alioth is the planet selected by the arkship for landfall; it is a typical goldilocks planet where humanity may rebuild in the coming decades. The arkship geological survey reports mountainous regions alongside deep seas and lush forests. This is where it all starts.]],[[Alioth est la planète sélectionnée par le Vaisseau-Arche pour l'atterrissage. C'est une planète Boucles d'or classique où l'humanité pourra se reconstruire dans les décennies à venir. L'étude géologique du Vaisseau-Arche signale des zones montagneuses ainsi que des océans profonds et des forêts denses. C'est ici que tout commence.]],[[Alioth ist der Planet, den das Archenschiff für die Landung ausgewählt hat. Wie die Erde umkreist er seinen Stern in der habitablen Zone und ist der perfekte Ort, um in den kommenden Jahrzehnten den Wiederaufbau der Menschheit zu beginnen. Die geologische Untersuchung des Archenschiffs berichtet von bergigen Regionen neben tiefen Meeren und üppigen Wäldern. Hier fängt alles an.]]},iconPath="gui/screen_unit/img/planets/alioth.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=true,systemId=0,positionInSystem=2,satellites={21,22,26,27},center={-8.00,-8.00,-126303.00},gravity=9.8910,radius=126067.90,atmosphereThickness=6400.00,atmosphereRadius=132460.00,surfaceArea=199718780928,surfaceAverageAltitude=94.556,surfaceMaxAltitude=1091.73,surfaceMinAltitude=-548.89,GM=157198800627.69,maxStaticAltitude=1300.00,ores={299255727,3724036288,262147665,4234772167,3086347393,1050500112},territories=259472},[21]={id=21,name={"Alioth Moon 1","Alioth Lune 1","Alioth Mond 1"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/alioth_moon_1.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=2,positionInSystem=2,satellites=nil,center={457932.99,-1509009.24,115525.00},gravity=2.3550,radius=30000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=2119500000.00,surfaceArea=11309733888,surfaceAverageAltitude=43.665,surfaceMaxAltitude=305.16,surfaceMinAltitude=-176.382,maxStaticAltitude=2500.00,ores={299255727,3724036288,343766315,4041459743},territories=14522},[22]={id=22,name={"Alioth Moon 4","Alioth Lune 4","Alioth Mond 4"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/alioth_moon_4.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=2,positionInSystem=3,satellites=nil,center={-1692694.85,729681.81,-411465.62},gravity=2.3809,radius=30330.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=2190215699.55,surfaceArea=11559916544,surfaceAverageAltitude=-6.453,surfaceMaxAltitude=-42.324,surfaceMinAltitude=-83.175,maxStaticAltitude=2500.00,ores={262147665,4234772167,2029139010,1065079614},territories=14522},[26]={id=26,name={"Sanctuary","Sanctuary","Sanctuary"},type={"Moon","Lune","Mond"},biosphere={"Forest","Forêt","Wald"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"High","Elevée","Hoch"},description=nil,iconPath="gui/screen_unit/img/planets/sanctuary_moon.png",hasAtmosphere=true,isSanctuary=true,isInSafeZone=true,systemId=2,positionInSystem=1,satellites=nil,center={-1404834.53,562655.32,-285074.95},gravity=9.8100,radius=83400.00,atmosphereThickness=8000.00,atmosphereRadius=91350.00,GM=68234043600.00,surfaceArea=87406149632,surfaceAverageAltitude=97.905,surfaceMaxAltitude=512.067,surfaceMinAltitude=-109.20,maxStaticAltitude=2500.00,ores={3724036288,299255727,262147665,4234772167},territories=111632},[27]={id=27,name={"Haven","Haven","Haven"},type={"Moon","Lune","Mond"},biosphere={"Forest","Forêt","Wald"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"High","Elevée","Hoch"},description=nil,iconPath="gui/screen_unit/img/planets/haven_moon.png",hasAtmosphere=true,isSanctuary=true,isInSafeZone=true,systemId=2,positionInSystem=4,satellites=nil,center={-1205152.02,1124841.79,-2638867.62},gravity=9.8100,radius=83443.02,atmosphereThickness=8000.00,atmosphereRadius=91300.00,GM=68304461353.44,surfaceArea=87496299100,surfaceAverageAltitude=132.365,surfaceMaxAltitude=788.779,surfaceMinAltitude=-22.402,maxStaticAltitude=2500.00,ores={299255727,3724036288,4234772167,262147665},territories=111632},[3]={id=3,name={"Thades","Thades","Thades"},type={"Planet","Planète","Planet"},biosphere={"Desert","Désert","Wüste"},classification={"Thermoplanet","Thermoplanète","Thermoplanet"},habitability={"Low","Faible","Niedrig"},description={[[Once a mainly aquatic world, Thades suffered a cataclysmic disaster, and its water was evaporated into space. Now Thades is a dried-out planet scarred by an abyssal trench, the only place left able to sustain life. Ejected rocks gathered into an asteroid belt, where the explorers can settle.]],[[Thades est une planète désertique brûlée. Il est possible qu'elle ait été pleine de vie à une époque, mais il ne reste plus que des cendres et de la poussière. L'étude géologique du Vaisseau-Arche signale des montagnes rocheuses coupées par un immense ravin non naturel. Il est arrivé quelque chose à cette planète.]],[[Thades ist ein verbrannter Wüstenplanet. Vielleicht war er einst voller Leben, aber jetzt sind nur noch Asche und Staub übrig. Die geologische Untersuchung des Archenschiffs berichtet von einem felsigen, gebirgigen Planeten, der von einer riesigen, unnatürlichen Schlucht durchschnitten wird. Irgendetwas muss diesem Planeten zugestoßen sein.]]},iconPath="gui/screen_unit/img/planets/thades.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=true,systemId=0,positionInSystem=3,satellites={30,31,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433},center={29165536.00,10865536.00,65536.00},gravity=4.8670,radius=49000.00,atmosphereThickness=40000.00,atmosphereRadius=89000.00,GM=11685667000.00,surfaceArea=30171856896,surfaceAverageAltitude=12536.892,surfaceMaxAltitude=13809.09,surfaceMinAltitude=-778.1,maxStaticAltitude=14709.00,ores={3724036288,299255727,262147665,4234772167,2289641763,1065079614},territories=38882},[30]={id=30,name={"Thades Moon 1","Thades Lune 1","Thades Mond 1"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_moon_1.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=35,satellites=nil,center={29214403.49,10907080.70,433861.28},gravity=1.0990,radius=14000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=215404000.00,surfaceArea=2463008768,surfaceAverageAltitude=167.399,surfaceMaxAltitude=423.661,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={299255727,262147665,2289641763,4041459743},territories=3002},[31]={id=31,name={"Thades Moon 2","Thades Lune 2","Thades Mond 2"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_moon_2.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=36,satellites=nil,center={29404194.34,10432766.60,19553.82},gravity=1.1775,radius=15000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=264937500.00,surfaceArea=2827433472,surfaceAverageAltitude=184.010,surfaceMaxAltitude=477.009,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={4234772167,3724036288,3086347393,1065079614},territories=3632},[400]={id=400,name={"Thades Asteroid 00","Thades Asteroid 00","Thades Asteroid 00"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_00.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=1,satellites=nil,center={29299301.32,10711862.68,2851.97},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=54.424,surfaceMaxAltitude=921.193,surfaceMinAltitude=-837.498,maxStaticAltitude=2500.00,ores={299255727,4234772167},territories=272},[401]={id=401,name={"Thades Asteroid 01","Thades Asteroid 01","Thades Asteroid 01"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_01.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=2,satellites=nil,center={29282550.05,10753803.20,117513.67},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-685.459,surfaceMaxAltitude=836.309,surfaceMinAltitude=-1925.87,maxStaticAltitude=2500.00,ores={299255727,3724036288},territories=272},[402]={id=402,name={"Thades Asteroid 02","Thades Asteroid 02","Thades Asteroid 02"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_02.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=3,satellites=nil,center={29229075.50,10805882.53,256161.21},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-956.392,surfaceMaxAltitude=168.572,surfaceMinAltitude=-2060.55,maxStaticAltitude=2500.00,ores={262147665,299255727},territories=272},[403]={id=403,name={"Thades Asteroid 03","Thades Asteroid 03","Thades Asteroid 03"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_03.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=4,satellites=nil,center={29267536.95,10749726.84,-97063.90},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-597.324,surfaceMaxAltitude=1395.83,surfaceMinAltitude=-2500.29,maxStaticAltitude=2500.00,ores={3724036288,262147665},territories=272},[404]={id=404,name={"Thades Asteroid 04","Thades Asteroid 04","Thades Asteroid 04"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_04.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=5,satellites=nil,center={29296929.92,10741579.35,-34201.26},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-544.506,surfaceMaxAltitude=1601.43,surfaceMinAltitude=-1658.22,maxStaticAltitude=2500.00,ores={4234772167,262147665},territories=272},[405]={id=405,name={"Thades Asteroid 05","Thades Asteroid 05","Thades Asteroid 05"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_05.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=6,satellites=nil,center={29230291.68,10801230.42,-117467.33},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-476.32,surfaceMaxAltitude=1093.61,surfaceMinAltitude=-1836.26,maxStaticAltitude=2500.00,ores={3724036288,4234772167},territories=272},[406]={id=406,name={"Thades Asteroid 06","Thades Asteroid 06","Thades Asteroid 06"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_06.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=7,satellites=nil,center={29294439.12,10755446.81,185994.55},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-704.756,surfaceMaxAltitude=1051.98,surfaceMinAltitude=-2124.6,maxStaticAltitude=2500.00,ores={4234772167,299255727,3724036288},territories=272},[407]={id=407,name={"Thades Asteroid 07","Thades Asteroid 07","Thades Asteroid 07"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_07.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=8,satellites=nil,center={29091470.31,10943497.38,-37252.04},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=161.911,surfaceMaxAltitude=1505.11,surfaceMinAltitude=-1473.85,maxStaticAltitude=2500.00,ores={4234772167,299255727},territories=272},[408]={id=408,name={"Thades Asteroid 08","Thades Asteroid 08","Thades Asteroid 08"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_08.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=9,satellites=nil,center={29081043.07,10962202.27,-75767.64},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-936.01,surfaceMaxAltitude=688.978,surfaceMinAltitude=-2498.5,maxStaticAltitude=2500.00,ores={3724036288,299255727},territories=272},[409]={id=409,name={"Thades Asteroid 09","Thades Asteroid 09","Thades Asteroid 09"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_09.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=10,satellites=nil,center={29086073.94,10961324.33,-37713.45},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-261.982,surfaceMaxAltitude=1811.89,surfaceMinAltitude=-1705.35,maxStaticAltitude=2500.00,ores={299255727,262147665},territories=272},[410]={id=410,name={"Thades Asteroid 10","Thades Asteroid 10","Thades Asteroid 10"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_10.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=11,satellites=nil,center={29057495.95,11010112.20,-12840.27},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-923.761,surfaceMaxAltitude=465.953,surfaceMinAltitude=-1705.78,maxStaticAltitude=2500.00,ores={3724036288,262147665},territories=272},[411]={id=411,name={"Thades Asteroid 11","Thades Asteroid 11","Thades Asteroid 11"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_11.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=12,satellites=nil,center={29038528.76,11009018.02,34480.51},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-897.714,surfaceMaxAltitude=317.114,surfaceMinAltitude=-1993.37,maxStaticAltitude=2500.00,ores={4234772167,262147665},territories=272},[412]={id=412,name={"Thades Asteroid 12","Thades Asteroid 12","Thades Asteroid 12"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_12.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=13,satellites=nil,center={29063783.12,11010103.53,-19811.13},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-1231.337,surfaceMaxAltitude=332.356,surfaceMinAltitude=-2017.24,maxStaticAltitude=2500.00,ores={3724036288,4234772167},territories=272},[413]={id=413,name={"Thades Asteroid 13","Thades Asteroid 13","Thades Asteroid 13"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_13.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=14,satellites=nil,center={29308876.96,10722122.97,63979.64},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-462.878,surfaceMaxAltitude=1558.25,surfaceMinAltitude=-1455.30,maxStaticAltitude=2500.00,ores={3724036288,299255727,262147665,4234772167},territories=272},[414]={id=414,name={"Thades Asteroid 14","Thades Asteroid 14","Thades Asteroid 14"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_14.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=15,satellites=nil,center={29039962.95,11009804.08,20310.07},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-941.413,surfaceMaxAltitude=667.795,surfaceMinAltitude=-2063.120,maxStaticAltitude=2500.00,ores={299255727,4234772167},territories=272},[415]={id=415,name={"Thades Asteroid 15","Thades Asteroid 15","Thades Asteroid 15"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_15.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=16,satellites=nil,center={29028034.74,11006962.68,90614.67},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-102.078,surfaceMaxAltitude=1711.750,surfaceMinAltitude=-1248.490,maxStaticAltitude=2500.00,ores={299255727,3724036288},territories=272},[416]={id=416,name={"Thades Asteroid 16","Thades Asteroid 16","Thades Asteroid 16"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_16.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=17,satellites=nil,center={29049290.89,11009683.55,130463.58},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-1388.131,surfaceMaxAltitude=-34.923,surfaceMinAltitude=-2501.310,maxStaticAltitude=2500.00,ores={262147665,299255727},territories=272},[417]={id=417,name={"Thades Asteroid 17","Thades Asteroid 17","Thades Asteroid 17"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_17.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=18,satellites=nil,center={29034838.01,11011307.10,100551.51},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-171.626,surfaceMaxAltitude=1396.390,surfaceMinAltitude=-1270.20,maxStaticAltitude=2500.00,ores={262147665,3724036288},territories=272},[418]={id=418,name={"Thades Asteroid 18","Thades Asteroid 18","Thades Asteroid 18"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_18.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=19,satellites=nil,center={29071108.08,10957206.76,212593.35},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-175.909,surfaceMaxAltitude=1242.240,surfaceMinAltitude=-1081.320,maxStaticAltitude=2500.00,ores={262147665,4234772167},territories=272},[419]={id=419,name={"Thades Asteroid 19","Thades Asteroid 19","Thades Asteroid 19"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_19.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=20,satellites=nil,center={29167994.87,10859282.88,268014.12},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-1102.891,surfaceMaxAltitude=598.225,surfaceMinAltitude=-2306.690,maxStaticAltitude=2500.00,ores={3724036288,4234772167},territories=272},[420]={id=420,name={"Thades Asteroid 20","Thades Asteroid 20","Thades Asteroid 20"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_20.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=21,satellites=nil,center={29213864.06,10803741.30,-121255.16},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-603.555,surfaceMaxAltitude=1582.350,surfaceMinAltitude=-2158.800,maxStaticAltitude=2500.00,ores={299255727,4234772167,262147665},territories=272},[421]={id=421,name={"Thades Asteroid 21","Thades Asteroid 21","Thades Asteroid 21"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_21.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=22,satellites=nil,center={29239443.63,10792184.95,211277.78},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-899.330,surfaceMaxAltitude=1089.520,surfaceMinAltitude=-2425.300,maxStaticAltitude=2500.00,ores={4234772167,299255727},territories=272},[422]={id=422,name={"Thades Asteroid 22","Thades Asteroid 22","Thades Asteroid 22"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_22.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=23,satellites=nil,center={29144431.74,10891773.13,265131.10},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-1159.166,surfaceMaxAltitude=966.797,surfaceMinAltitude=-2501.170,maxStaticAltitude=2500.00,ores={3724036288,299255727},territories=272},[423]={id=423,name={"Thades Asteroid 23","Thades Asteroid 23","Thades Asteroid 23"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_23.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=24,satellites=nil,center={29221331.78,10813011.47,-112261.08},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=59.944,surfaceMaxAltitude=2240.940,surfaceMinAltitude=-1196.110,maxStaticAltitude=2500.00,ores={262147665,299255727},territories=272},[424]={id=424,name={"Thades Asteroid 24","Thades Asteroid 24","Thades Asteroid 24"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_24.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=25,satellites=nil,center={29261255.06,10778311.95,-68014.35},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-634.507,surfaceMaxAltitude=1521.540,surfaceMinAltitude=-2498.500,maxStaticAltitude=2500.00,ores={3724036288,262147665},territories=272},[425]={id=425,name={"Thades Asteroid 25","Thades Asteroid 25","Thades Asteroid 25"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_25.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=26,satellites=nil,center={29199560.98,10832137.62,-97473.02},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-184.796,surfaceMaxAltitude=936.977,surfaceMinAltitude=-1009.590,maxStaticAltitude=2500.00,ores={4234772167,262147665},territories=272},[426]={id=426,name={"Thades Asteroid 26","Thades Asteroid 26","Thades Asteroid 26"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_26.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=27,satellites=nil,center={29055988.74,10976710.89,153234.70},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-599.773,surfaceMaxAltitude=1421.290,surfaceMinAltitude=-1916.820,maxStaticAltitude=2500.00,ores={4234772167,3724036288},territories=272},[427]={id=427,name={"Thades Asteroid 27","Thades Asteroid 27","Thades Asteroid 27"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_27.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=28,satellites=nil,center={29052925.00,10978093.03,202894.97},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=50.800,surfaceMaxAltitude=1210.470,surfaceMinAltitude=-657.505,maxStaticAltitude=2500.00,ores={3724036288,262147665,299255727},territories=272},[428]={id=428,name={"Thades Asteroid 28","Thades Asteroid 28","Thades Asteroid 28"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_28.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=29,satellites=nil,center={29114441.38,10927735.88,231833.92},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-1322.002,surfaceMaxAltitude=367.258,surfaceMinAltitude=-2342.960,maxStaticAltitude=2500.00,ores={299255727,4234772167},territories=272},[429]={id=429,name={"Thades Asteroid 29","Thades Asteroid 29","Thades Asteroid 29"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_29.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=30,satellites=nil,center={29093988.60,10935957.84,206596.14},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-171.916,surfaceMaxAltitude=1432.140,surfaceMinAltitude=-1545.310,maxStaticAltitude=2500.00,ores={299255727,3724036288},territories=272},[430]={id=430,name={"Thades Asteroid 30","Thades Asteroid 30","Thades Asteroid 30"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_30.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=31,satellites=nil,center={29308670.06,10719768.95,122162.49},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-688.637,surfaceMaxAltitude=1538.470,surfaceMinAltitude=-2500.330,maxStaticAltitude=2500.00,ores={262147665,299255727},territories=272},[431]={id=431,name={"Thades Asteroid 31","Thades Asteroid 31","Thades Asteroid 31"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_31.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=32,satellites=nil,center={29315394.75,10724428.22,30918.91},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-333.031,surfaceMaxAltitude=1683.290,surfaceMinAltitude=-1670.060,maxStaticAltitude=2500.00,ores={262147665,3724036288},territories=272},[432]={id=432,name={"Thades Asteroid 32","Thades Asteroid 32","Thades Asteroid 32"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_32.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=33,satellites=nil,center={29039991.14,11019630.48,64846.61},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-454.695,surfaceMaxAltitude=1545.980,surfaceMinAltitude=-2146.780,maxStaticAltitude=2500.00,ores={4234772167,262147665},territories=272},[433]={id=433,name={"Thades Asteroid 33","Thades Asteroid 33","Thades Asteroid 33"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_33.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=34,satellites=nil,center={29278192.73,10762037.83,209654.75},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-202.747,surfaceMaxAltitude=1247.770,surfaceMinAltitude=-1595.650,maxStaticAltitude=2500.00,ores={4234772167,262147665,3724036288},territories=272},[4]={id=4,name={"Talemai","Talemai","Talemai"},type={"Planet","Planète","Planet"},biosphere={"Barren","Désert","Karg"},classification={"Psychroplanet","Psychroplanète","Psychroplanet"},habitability={"Average","Moyenne","Mittlere "},description={[[Talemai is a planet in the final stages of an Ice Age. It seems likely that the planet was thrown into tumult by a cataclysmic volcanic event which resulted in its current state. The arkship geological survey reports large mountainous regions across the entire planet.]],[[Talemai est une planète en fin de période glaciaire. Il est probable qu'un événement volcanique cataclysmique soit responsable de son état actuel. L'étude géologique du Vaisseau-Arche signale de grandes zones montagneuses sur toute la planète.]],[[Talemai ist ein Planet, der sich im Endstadium einer Eiszeit befindet. Es wird vermutet, dass der Planet durch ein kataklysmisches vulkanisches Ereignis in seinen heutigen Zustand versetzt wurde. Die geologische Untersuchung des Archenschiffs berichtet von weiten Gebirgsregionen auf dem gesamten Planeten.]]},iconPath="gui/screen_unit/img/planets/talemai.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=false,systemId=0,positionInSystem=4,satellites={40,41,42},center={-13234464.00,55765536.00,465536.00},gravity=4.5530,radius=57500.00,atmosphereThickness=16000.00,atmosphereRadius=72500.00,GM=15053356250.00,surfaceArea=41547562844,surfaceAverageAltitude=631.26,surfaceMaxAltitude=2755.23,surfaceMinAltitude=-1778.1,maxStaticAltitude=14709.00,ores={299255727,4234772167,3724036288,343766315,1065079614,271971371},territories=52922},[40]={id=40,name={"Talemai Moon 2","Talemai Lune 2","Talemai Mond 2"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/talemai_moon_2.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=false,systemId=4,positionInSystem=2,satellites=nil,center={-13503090.34,55594324.49,769836.53},gravity=0.9420,radius=12000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=135648000.00,surfaceArea=1809557368.00,surfaceAverageAltitude=178.06,surfaceMaxAltitude=497.87,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={262147665,3724036288,4234772167,3086347393,4041459743,1467310917},territories=1922},[41]={id=41,name={"Talemai Moon 3","Talemai Lune 3","Talemai Mond 3"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/talemai_moon_3.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=false,systemId=4,positionInSystem=3,satellites=nil,center={-12800514.62,55700257.46,325207.84},gravity=0.8635,radius=11000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=104423000.00,surfaceArea=1520530844.00,surfaceAverageAltitude=313.12,surfaceMaxAltitude=582.08,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={262147665,299255727,4234772167,2289641763,1050500112,1866812055},territories=1922},[42]={id=42,name={"Talemai Moon 1","Talemai Lune 1","Talemai Mond 1"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/talemai_moon_1.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=false,systemId=4,positionInSystem=1,satellites=nil,center={-13058408.39,55781856.76,740177.66},gravity=1.1775,radius=15000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=265050000.00,surfaceArea=282743388.00,surfaceAverageAltitude=423.70,surfaceMaxAltitude=1077.57,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={299255727,3724036288,262147665,2029139010,1065079614,3546085401},territories=3632},[6]={id=6,name={"Sicari","Sicari","Sicari"},type={"Planet","Planète","Planet"},biosphere={"Desert","Désert","Wüste"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"Average","Moyenne","Durchschnitt"},description={[[Eons ago, Sicari and its moon shared a common origin with Sinnen as part of a single, massive planet. Cosmogeological studies reveal that an ancient cosmic cataclysm tore apart the primordial world, which eventually reformed into the three distinct celestial bodies we observe today. This accounts for their peculiarly close proximity to one another. Sicari, an arid world, is punctuated by a scattering of verdant oases. The Arkship's Geological Readings reveal a landscape dominated by towering, desolate mountains that cradle extensive tracts of lush, tropical wetlands.]],[[A l'origine Sicari Sinnen et sa lune n'étaient qu'une seule grosse planète. Dans un lointain passé, un cataclysme cosmique l'a éclatée et elle s'est recomposée en 3 corps, ce qui explique l'inhabituelle proximité de Sicari avec Sinnen. Sicari est une planète désertique parsemée d'oasis luxuriants.Le système de surveillance géologique de l'Arkship rapporte de grandes étendues arides et montagneuses abritant de larges zones humides et tropicales.]],[[Ursprünglich waren Sicari Sinnen und sein Mond nur ein großer Planet. In der fernen Vergangenheit zerschmetterte sie eine kosmische Katastrophe und sie setzte sich wieder in drei Körper zusammen, was Sicaris ungewöhnliche Nähe zu Sinnen erklärt. Sicari ist ein Wüstenplanet, der mit üppigen Oasen übersät ist. Das geologische Überwachungssystem der Arche berichtet von großen, öden, bergigen Landstrichen, die große tropische Feuchtgebiete beherbergen.]]},iconPath="gui/screen_unit/img/planets/sicari.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=false,systemId=0,positionInSystem=6,satellites=nil,center={52765536.00,27165536.00,52065536.00},gravity=4.0035,radius=51100.00,atmosphereThickness=9600.00,atmosphereRadius=60700.00,GM=10189665694.91,surfaceArea=32813432612.00,surfaceAverageAltitude=162.7630127,surfaceMaxAltitude=1226.54,surfaceMinAltitude=-301.41,ores={3724036288,4234772167,4041459743,1866812055,2162350405},territories=41072},[7]={id=7,name={"Sinnen","Sinnen","Sinnen"},type={"Planet","Planète","Planet"},biosphere={"Desert","Désert","Wüste"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"Average","Moyenne","Durchschnitt"},description={[[Sinnen, once part of a larger celestial entity with Sicari and its moon, now stands as a separate world characterized by expansive plains intersected by deep ravines. Sparse vegetation sustains a minimal ecosystem of hardy lifeforms. Yet, amidst this desolation, the enigmatic crystal forests on Sinnen defy explanation. Despite extensive research, scientists have yet to uncover any viable theories for the origin of these mysterious formations.]],[[A l'origine Sicari, Sinnen et sa lune n'étient qu'une seule grosse planète. Dans un lointain passé, un cataclysme cosmique l'a éclatée et elle s'est recomposée en 3 corps, ce qui explique l'inhabituelle proximité de Sinnen avec Sicari. Le système de surveillance géologique de l'Arkship rapporte principalement des grandes plaines aux côtés de profonds ravins, Une rare vegétation apporte à Sicari une vie minimale. Aucune théorie n'explique les étranges forêts de cristaux.]],[[Ursprünglich war Sicari, Sinnen und sein Mond nur ein einziger großer Planet. In der fernen Vergangenheit wurde sie von einer kosmischen Katastrophe erschüttert und sie setzte sich wieder in drei Körper zusammen, was Sinnens ungewöhnliche Nähe zu Sicari erklärt. Das geologische Überwachungssystem der Arche meldet hauptsächlich große Ebenen neben tiefen Schluchten, Spärliche Vegetation bringt Sicari minimales Leben. Keine Theorie erklärt die seltsamen Kristallwälder.]]},iconPath="gui/screen_unit/img/planets/sinnen.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=false,systemId=0,positionInSystem=6,satellites={70},center={52718347.17,26962117.31,51830774.69},gravity=4.3175,radius=54950.00,atmosphereThickness=12000.00,atmosphereRadius=66950.00,GM=13036702043.75,surfaceArea=37944187486.00,surfaceAverageAltitude=312.7987904,surfaceMaxAltitude=433.763,surfaceMinAltitude=2.6892,ores={262147665,299255727,1467310917,2029139010,789110817},territories=48002},[70]={id=70,name={"Sinnen Moon 1","Sinnen Moon 1","Sinnen Moon 1"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/sinnen_moon_1.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=7,positionInSystem=1,satellites=nil,center={52416510.67,26795577.16,51893332.65},gravity=0.0000,radius=0.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=0.00,surfaceArea=3631681108.00,surfaceAverageAltitude=-1948.13447,surfaceMaxAltitude=-1299.24,surfaceMinAltitude=-2694.02,ores={299255727,4234772167,3724036288,343766315,271971371,3837858336},territories=4322},[8]={id=8,name={"Teoma","Teoma","Teoma"},type={"Planet","Planète","Planet"},biosphere={"Forest","Forêt","Wald"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"High","Elevée","Hoch"},description={[[[REDACTED] The arkship geological survey [REDACTED]. This planet should not be here.]],[[[CENSURÉ] L'étude géologique du Vaisseau-Arche [CENSURÉ]. Cette planète ne devrait pas être ici.]],[[[ZENSIERT] Die geologische Untersuchung des Archenschiffs [ZENSIERT]. Dieser Planet sollte nicht hier sein.]]},iconPath="gui/screen_unit/img/planets/teoma.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=false,systemId=0,positionInSystem=8,satellites=nil,center={80865536.00,54665536.00,-934464.00},gravity=4.7885,radius=62000.00,atmosphereThickness=6400.00,atmosphereRadius=68400.00,GM=18406994000.00,surfaceArea=48305131520,surfaceAverageAltitude=-294.246,surfaceMaxAltitude=1341.99,surfaceMinAltitude=-576.98,maxStaticAltitude=1540.00,ores={299255727,4234772167,343766315,3837858336,1467310917},territories=60752},[9]={id=9,name={"Jago","Jago","Jago"},type={"Planet","Planète","Planet"},biosphere={"Water","Eau","Wasser"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"Very High","Très élevée","Sehr hoch"},description={[[Jago is a water planet. The large majority of the planet's surface is covered by large oceans dotted by small areas of landmass across the planet. The arkship geological survey reports deep seas across the majority of the planet with sub 15 percent coverage of solid ground.]],[[Jago est une planète-océan. La plupart de sa surface est recouverte d'immenses océans, parsemés de petites îles. L'étude géologique du Vaisseau-Arche signale des océans profonds sur une grande partie de la planète, et moins de 15% de terres émergées.]],[[Jago ist ein Wasserplanet. Der größte Teil der Planetenoberfläche ist von weiten Ozeanen bedeckt, in denen vereinzelte kleine Inselgruppen zu finden sind. Die geologische Untersuchung des Archenschiffs hat ergeben, dass der größte Teil des Planeten von tiefen Meeren bedeckt ist und weniger als 15% des Bodens aus festem Material besteht.]]},iconPath="gui/screen_unit/img/planets/jago.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=false,systemId=0,positionInSystem=9,satellites=nil,center={-94134464.00,12765536.00,-3634464.00},gravity=4.9455,radius=61590.00,atmosphereThickness=11200.00,atmosphereRadius=72700.00,GM=18759904118.55,surfaceArea=47668367360,surfaceAverageAltitude=-374.1116,surfaceMaxAltitude=1093.681,surfaceMinAltitude=-499.43,maxStaticAltitude=1300.00,ores={2029139010,3724036288,3837858336,271971371,789110817},territories=60752}}}

        end)

        library.addEventHandlers(library)

        library.addEventHandlers(system)

        library.addEventHandlers(player)

        library.addEventHandlers(construct)

        library.addEventHandlers(unit)

        library.addEventHandlers(altimeter)

        library.addEventHandlers(core)

        library.addEventHandlers(disk)

        library.addEventHandlers(warp)

        library.addEventHandlers(switch)

        library.addEventHandlers(rx)

        library.addEventHandlers(tx)
  system:
    onActionStart(action):
      lua: system:triggerEvent('onActionStart',action)
    onActionLoop(action):
      lua: system:triggerEvent('onActionLoop',action)
    onActionStop(action):
      lua: system:triggerEvent('onActionStop',action)
    onUpdate():
      lua: system:triggerEvent('onUpdate')
    onFlush():
      lua: system:triggerEvent('onFlush')
    onInputText(text):
      lua: system:triggerEvent('onInputText',text)
    onCameraChanged(mode):
      lua: system:triggerEvent('onCameraChanged',mode)
  player:
    "onParentChanged(oldId,newId)":
      lua: player:triggerEvent('onParentChanged',oldId,newId)
  construct:
    onDocked(id):
      lua: construct:triggerEvent('onDocked',id)
    onUndocked(id):
      lua: construct:triggerEvent('onUndocked',id)
    onPlayerBoarded(id):
      lua: construct:triggerEvent('onPlayerBoarded',id)
    onVRStationEntered(id):
      lua: construct:triggerEvent('onVRStationEntered',id)
    onConstructDocked(id):
      lua: construct:triggerEvent('onConstructDocked',id)
    onPvPTimer(active):
      lua: construct:triggerEvent('onPvPTimer',active)
  unit:
    onStop():
      lua: unit:triggerEvent('onStop')
    onTimer(timerId):
      lua: unit:triggerEvent('onTimer',timerId)
    onStart():
      lua: >-
        sustenationSpeed=57 --export: The sustentation speed (in km/h) of the
        construct as stated in build mode.

        bingoFuel=672 --export: The mass of fuel (in kg) that would be deemed sufficient to return to base with.

        ExtraSpaceTankId=0 --export: The Id of the extra tank that is used for vertical boosters (if it exists).

        pitchSpeedFactor=0.8 --export: This factor will increase/decrease the player input along the pitch axis<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01

        yawSpeedFactor=1 --export: This factor will increase/decrease the player input along the yaw axis<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01

        rollSpeedFactor=1.5 --export: This factor will increase/decrease the player input along the roll axis<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01

        brakeSpeedFactor=3 --export: When braking, this factor will increase the brake force by brakeSpeedFactor * velocity<br>Valid values: Superior or equal to 0.01

        brakeFlatFactor=1 --export: When braking, this factor will increase the brake force by a flat brakeFlatFactor * velocity direction><br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01

        autoRoll=true --export: [Only in atmosphere]<br>When the pilot stops rolling,  flight model will try to get back to horizontal (no roll)

        autoRollFactor=2 --export: [Only in atmosphere]<br>When autoRoll is engaged, this factor will increase to strength of the roll back to 0<br>Valid values: Superior or equal to 0.01

        turnAssist=true --export: [Only in atmosphere]<br>When the pilot is rolling, the flight model will try to add yaw and pitch to make the construct turn better<br>The flight model will start by adding more yaw the more horizontal the construct is and more pitch the more vertical it is

        turnAssistFactor=2 --export: [Only in atmosphere]<br>This factor will increase/decrease the turnAssist effect<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01

        require('AR_Library:../libs/@EasternGamer/AR-Library/src/ARImport.lua')pitchInput=0;rollInput=0;yawInput=0;brakeInput=0;local a=0;local b=0;local c=0;local d=0;local e=0;local f=0;local g=0;local h=0;local i={0,0,0}local j=0;local k=0;local l=0;local m=0;local n=0;local o=0;local p=0;local q=0;local r=0;local s,t,u,v,w=0,nil,0,0,0;local x,y="",""local z=false;local A=false;local B=true;local C=true;local D=false;local E=false;local F=false;local G=nil;local H=1100;local I=0;local J=0;local K=nil;local L=nil;local M=nil;local N=0;local O=0;local P=0;local Q=nil;local R=nil;local S=0;local T=0;local U=2;local V=20;local W=0.5522847498307936;local X=42051194;local Y=22554892;local Z={OLS1=nil,OLS2=nil,OLS3=nil}local _={OLS1=nil,OLS2=nil,OLS3=nil}local a0={origin=nil,x=nil,y=nil,z=nil}local a1=nil;local a2=nil;local a3=nil;local a4=false;local a5=false;local a6=nil;local a7=true;Nav=Navigator.new(system,core,unit)Nav.axisCommandManager:setupCustomTargetSpeedRanges(axisCommandId.longitudinal,{construct.getMaxSpeed()})system.clearWaypoint(false)if switch and switch.activate then switch.activate()end;unit.switchOnHeadlights()unit.hideWidget()system.showHelper(false)system.showScreen(true)construct.setDockingMode(1)local a8=require('Sky:atlas.lua')local a9=nil;projector=Projector()local aa=ObjectGroup()projector.addObjectGroup(aa)local ab=ObjectBuilderLinear()UIHud=ab.setPositionType(positionTypes.localP).setOrientationType(orientationTypes.localO).build()UIMfdL=ab.setPositionType(positionTypes.localP).setOrientationType(orientationTypes.localO).build()UIMfdR=ab.setPositionType(positionTypes.localP).setOrientationType(orientationTypes.localO).build()local ac=ObjectBuilderLinear().setPositionType(positionTypes.globalP).setOrientationType(orientationTypes.globalO).build()local function ad(ae,af,ag)local ah=af:normalize()local ai=math.rad(ag)local aj,ak=math.cos(ai),math.sin(ai)return ae*aj+ah:cross(ae)*ak+ah*ah:dot(ae)*(1-aj)end;local al=vec3(unit.getPosition())local am=vec3(construct.getOrientationForward()):normalize()local an=vec3(construct.getOrientationUp()):normalize()local ao=vec3(construct.getOrientationRight()):normalize()local ap;local aq;local ar;local as=-1;local at=0;local au=0;local av;local aw;local ax;if string.match(unit.getName(),"seat")or string.match(unit.getName(),"chair")then if string.match(unit.getName(),"command")then au=-0.06 end;as=1;at=0.65;av=al+am*(0.3+at)+an*0.57+ao*au;aw=al+ao*(-0.3+au)+am*at+an*0.125;ax=al+ao*(0.3+au)+am*at+an*0.125 else av=al+am*(0.3+at)+an*0.5+ao*au;aw=al+ao*(-0.3+au)+am*at+an*0.125;ax=al+ao*(0.3+au)+am*at+an*0.125 end;aq=ad(am,an,-30)ap=(aq:cross(an)):normalize()UIMfdL.rotateXYZ({ap.x,ap.y,ap.z},{aq.x,aq.y,aq.z},{an.x,an.y,an.z})aq=ad(am,an,30)ap=(aq:cross(an)):normalize()UIMfdR.rotateXYZ({ap.x,ap.y,ap.z},{aq.x,aq.y,aq.z},{an.x,an.y,an.z})UIMfdL.setPosition(aw.x,aw.y,aw.z)UIMfdR.setPosition(ax.x,ax.y,ax.z)UIHud.setPosition(av.x,av.y,av.z)UIHud.rotateXYZ({ao.x,ao.y,ao.z},{am.x*as,am.y*as,am.z*as},{an.x*as,an.y*as,-an.z*as})aa.addObject(UIHud)aa.addObject(UIMfdL)aa.addObject(UIMfdR)aa.addObject(ac)pHud=UIHud.setUIElements()pMfdL=UIMfdL.setUIElements()pMfdR=UIMfdR.setUIElements()local ay=ac.setUIElements()local az,aA,aB,aC,aD,aE;az,aA,aB,aC=0,0,420,240;aD,aE=az-aB/2,aA-aC/2;local aF=PathBuilder().setFill('black',false).setFillOpacity(0,false).moveTo(aD,aE).lineTo(aD+aB,aE).lineTo(aD+aB,aE+aC).lineTo(aD,aE+aC).closePath()az,aA,aB,aC=0,0,200,100;aD,aE=az-aB/2,aA-aC/2;local aG=PathBuilder().setFill('black',false).setStroke('green',false).setStrokeWidth(2,false).setFillOpacity(1.0,false).moveTo(aD,aE).lineTo(aD+aB,aE).lineTo(aD+aB,aE+aC).lineTo(aD,aE+aC).closePath()local aH=PathBuilder().setFill('black',false).setStroke('green',false).setStrokeWidth(2,false).setFillOpacity(1.0,false).moveTo(aD,aE).lineTo(aD+aB,aE).lineTo(aD+aB,aE+aC).lineTo(aD,aE+aC).closePath()local aI=60;StallOrbPath=PathBuilder().setStroke('green',false).setStrokeWidth(3,false).setFillOpacity(.0,false).moveTo(az+aI,aA).cubicCurve(az+aI,aA+W*aI,az+W*aI,aA+aI,az,aA+aI).cubicCurve(az-W*aI,aA+aI,az-aI,aA+W*aI,az-aI,aA).cubicCurve(az-aI,aA-W*aI,az-W*aI,aA-aI,az,aA-aI).cubicCurve(az+W*aI,aA-aI,az+aI,aA-W*aI,az+aI,aA).closePath()CenterObjPath=PathBuilder().setStroke('green',false).setStrokeWidth(3,false).moveTo(7,7).lineTo(-7,-7).moveTo(-7,7).lineTo(7,-7)DestSpaceMarkerPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(5,5).lineTo(5,-5).lineTo(-5,-5).lineTo(-5,5).closePath()AzimIndicatorPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(0,75).lineTo(-5,70).lineTo(5,70).closePath()VeloIndicatorPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(155,-60).lineTo(150,-65).lineTo(150,-55).closePath()AltIndicatorPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(-155,-60).lineTo(-150,-65).lineTo(-150,-55).closePath()LadderLObjPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(-160,50).lineTo(-160,-60).lineTo(-170,-60).closePath()LadderRObjPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(160,50).lineTo(160,-60).lineTo(170,-60).closePath()ThrottleBarPath=PathBuilder().setStroke('green',false).setStrokeWidth(10,false).moveTo(175,-60).lineTo(175,50)TickerObjPath=PathBuilder().setStroke('green',false).setStrokeWidth(5,false).moveTo(-130,80).lineTo(130,80)CaptureBoxPath=PathBuilder().setStroke('green',false).setStrokeWidth(5,false).setFillOpacity(0,false).moveTo(-160,80).lineTo(160,80).lineTo(160,-70).lineTo(-160,-70).closePath()hudMaster=pHud.createCustomDraw(0,0,0)hudMaster.usePathBuilder(aF)hudMaster.setScale(1/600)hudMaster.build()MfdLMaster=pMfdL.createCustomDraw(0,0,0)MfdLMaster.usePathBuilder(aG)MfdLMaster.setScale(1/600)MfdLMaster.build()MfdRMaster=pMfdR.createCustomDraw(0,0,0)MfdRMaster.usePathBuilder(aH)MfdRMaster.setScale(1/600)MfdRMaster.build()local aJ=1/600;local aK=8;local aL=aK/aJ;local aM=PathBuilder().setStroke('green',false).setStrokeWidth(4,false).setFillOpacity(0,false).moveTo(-aL,-aL).lineTo(aL,-aL).lineTo(aL,aL).lineTo(-aL,aL).closePath()local aN=PathBuilder().setStroke('green',false).setStrokeWidth(2,false).moveTo(-aL,0).lineTo(aL,0)local aO=PathBuilder().setStroke('green',false).setStrokeWidth(2,false).setFillOpacity(0,false).moveTo(-(aL*1.25),-(aL*1.25)).lineTo(aL*1.25,-(aL*1.25)).lineTo(aL*1.25,aL*1.25).lineTo(-(aL*1.25),aL*1.25).closePath()local aP=PathBuilder().setStroke('green',false).setStrokeWidth(2,false).setFillOpacity(0,false).moveTo(-(aL*1.6),-(aL*1.6)).lineTo(aL*1.6,-(aL*1.6)).lineTo(aL*1.6,aL*1.6).lineTo(-(aL*1.6),aL*1.6).closePath()local aQ=ay.createCustomDraw(0,0,0.00012)aQ.usePathBuilder(aM)aQ.setPositionIsRelative(true)aQ.setScale(aJ)aQ.build()local aR=ay.createCustomDraw(0,0,0.00013)aR.usePathBuilder(aN)aR.setPositionIsRelative(true)aR.setScale(aJ)aR.build()local aS=ay.createCustomDraw(0,0,0.00014)aS.usePathBuilder(aO)aS.setPositionIsRelative(true)aS.setScale(aJ)aS.build()local aT=ay.createCustomDraw(0,0,0.00015)aT.usePathBuilder(aP)aT.setPositionIsRelative(true)aT.setScale(aJ)aT.build()aS.setPosition(0,0,20)aT.setPosition(0,0,40)if aQ.hideDraw then aQ.hideDraw()end;if aR.hideDraw then aR.hideDraw()end;if aS.hideDraw then aS.hideDraw()end;if aT.hideDraw then aT.hideDraw()end;StallOrb=pHud.createCustomDraw(0,0,0.0001)StallOrb.usePathBuilder(StallOrbPath)StallOrb.setPositionIsRelative(true)StallOrb.setScale(1/600)StallOrb.build()CaptureBoxObj=pHud.createCustomDraw(0,0,0.0011)CaptureBoxObj.usePathBuilder(CaptureBoxPath)CaptureBoxObj.setPositionIsRelative(true)CaptureBoxObj.setScale(1/600)CaptureBoxObj.build()DestSpaceMarkerObj=pHud.createCustomDraw(0,0,0.000132)DestSpaceMarkerObj.usePathBuilder(DestSpaceMarkerPath)DestSpaceMarkerObj.setPositionIsRelative(true)DestSpaceMarkerObj.setScale(1/600)DestSpaceMarkerObj.build()local aU=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(0,6).lineTo(5,-4).lineTo(-5,-4).closePath()local aV=pHud.createCustomDraw(0,0,0.000133)aV.usePathBuilder(aU)aV.setPositionIsRelative(true)aV.setScale(1/600)aV.build()aV.hideDraw()DistIndicator=pHud.createText(0,0,0.000222)DistIndicator.setPositionIsRelative(true)DistIndicator.setFontColor('green')DistIndicator.setFontSize(12)DistIndicator.move(0,95)DistIndicator.setAlignmentX('middle')DistIndicator.setAlignmentY('middle')DistIndicator.setText('555')DistIndicator.setWeight(0.002)DistIndicator.setScale(1/600)VeloLabel=pHud.createText(0,0,0.0003)VeloLabel.setPositionIsRelative(true)VeloLabel.setFontColor('green')VeloLabel.setFontSize(6)VeloLabel.move(160,-70)VeloLabel.setAlignmentX('middle')VeloLabel.setAlignmentY('middle')VeloLabel.setText('Speed')VeloLabel.setWeight(0.002)VeloLabel.setScale(1/600)AltLabel=pHud.createText(0,0,0.0004)AltLabel.setPositionIsRelative(true)AltLabel.setFontColor('green')AltLabel.setFontSize(6)AltLabel.move(-160,-70)AltLabel.setAlignmentX('middle')AltLabel.setAlignmentY('middle')AltLabel.setText('Altitude')AltLabel.setWeight(0.002)AltLabel.setScale(1/600)CenterObj=pHud.createCustomDraw(0,0,0.0005)CenterObj.usePathBuilder(CenterObjPath)CenterObj.setPositionIsRelative(true)CenterObj.setScale(1/600)CenterObj.build()AltIndicator=pHud.createCustomDraw(0,0,0.0006)AltIndicator.usePathBuilder(AltIndicatorPath)AltIndicator.setPositionIsRelative(true)AltIndicator.setScale(1/600)AltIndicator.build()VeloIndicator=pHud.createCustomDraw(0,0,0.0007)VeloIndicator.usePathBuilder(VeloIndicatorPath)VeloIndicator.setPositionIsRelative(true)VeloIndicator.setScale(1/600)VeloIndicator.build()AzimIndicator=pHud.createCustomDraw(0,0,0.0008)AzimIndicator.usePathBuilder(AzimIndicatorPath)AzimIndicator.setPositionIsRelative(true)AzimIndicator.setScale(1/600)AzimIndicator.build()LadderLObj=pHud.createCustomDraw(0,0,0.0009)LadderLObj.usePathBuilder(LadderLObjPath)LadderLObj.setPositionIsRelative(true)LadderLObj.setScale(1/600)LadderLObj.build()LadderRObj=pHud.createCustomDraw(0,0,0.001)LadderRObj.usePathBuilder(LadderRObjPath)LadderRObj.setPositionIsRelative(true)LadderRObj.setScale(1/600)LadderRObj.build()TickerObj=pHud.createCustomDraw(0,0,0.00011)TickerObj.usePathBuilder(TickerObjPath)TickerObj.setPositionIsRelative(true)TickerObj.setScale(1/600)TickerObj.build()ThrottleBar=pHud.createCustomDraw(0,0,0.00012)ThrottleBar.usePathBuilder(ThrottleBarPath)ThrottleBar.setPositionIsRelative(true)ThrottleBar.setScale(1/600)ThrottleBar.build()ThrottleTarget=pHud.createText(0,0,0.000121)ThrottleTarget.setPositionIsRelative(true)ThrottleTarget.setFontColor('green')ThrottleTarget.setFontSize(6)ThrottleTarget.move(175,-60)ThrottleTarget.setAlignmentX('start')ThrottleTarget.setAlignmentY('middle')ThrottleTarget.setText('555')ThrottleTarget.setWeight(0.002)ThrottleTarget.setScale(1/600)AnnounceFuelAtmoPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(-98,48).lineTo(-2,48).lineTo(-2,33).lineTo(-98,33).closePath()AnnounceFuelSpacePath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(2,48).lineTo(98,48).lineTo(98,33).lineTo(2,33).closePath()FuelGaugeObj=pMfdR.createText(0,0,0.0001)FuelGaugeObj.setPositionIsRelative(true)FuelGaugeObj.setFontColor('green')FuelGaugeObj.setFontSize(6)FuelGaugeObj.move(-90,25)FuelGaugeObj.setAlignmentX('start')FuelGaugeObj.setAlignmentY('middle')FuelGaugeObj.setText('Atmo Fuel')FuelGaugeObj.setWeight(0.002)FuelGaugeObj.setScale(1/600)DestArrivalTeleObj=pMfdR.createText(0,0,0.00021)DestArrivalTeleObj.setPositionIsRelative(true)DestArrivalTeleObj.setFontColor('green')DestArrivalTeleObj.setFontSize(6)DestArrivalTeleObj.move(-90,5)DestArrivalTeleObj.setAlignmentX('start')DestArrivalTeleObj.setAlignmentY('middle')DestArrivalTeleObj.setText('Space Fuel')DestArrivalTeleObj.setWeight(0.002)DestArrivalTeleObj.setScale(1/600)AnnounceFuelAtmoObj=pMfdR.createCustomDraw(0,0,0.0003)AnnounceFuelAtmoObj.usePathBuilder(AnnounceFuelAtmoPath)AnnounceFuelAtmoObj.setPositionIsRelative(true)AnnounceFuelAtmoObj.setScale(1/600)AnnounceFuelAtmoObj.build()AnnounceFuelSpaceObj=pMfdR.createCustomDraw(0,0,0.0004)AnnounceFuelSpaceObj.usePathBuilder(AnnounceFuelSpacePath)AnnounceFuelSpaceObj.setPositionIsRelative(true)AnnounceFuelSpaceObj.setScale(1/600)AnnounceFuelSpaceObj.build()AnnounceFuelAtmoText=pMfdR.createText(0,0,0.0005)AnnounceFuelAtmoText.setPositionIsRelative(true)AnnounceFuelAtmoText.setFontColor('black')AnnounceFuelAtmoText.setFontSize(6)AnnounceFuelAtmoText.move(-50,40)AnnounceFuelAtmoText.setAlignmentX('middle')AnnounceFuelAtmoText.setAlignmentY('middle')AnnounceFuelAtmoText.setText('Atmo Fuel')AnnounceFuelAtmoText.setWeight(0.002)AnnounceFuelAtmoText.setScale(1/600)AnnounceFuelSpaceText=pMfdR.createText(0,0,0.0006)AnnounceFuelSpaceText.setPositionIsRelative(true)AnnounceFuelSpaceText.setFontColor('black')AnnounceFuelSpaceText.setFontSize(6)AnnounceFuelSpaceText.move(50,40)AnnounceFuelSpaceText.setAlignmentX('middle')AnnounceFuelSpaceText.setAlignmentY('middle')AnnounceFuelSpaceText.setText('Space Fuel')AnnounceFuelSpaceText.setWeight(0.002)AnnounceFuelSpaceText.setScale(1/600)AnnounceLoAltiPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(-98,48).lineTo(-2,48).lineTo(-2,33).lineTo(-98,33).closePath()AnnounceLoSpeedPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(2,48).lineTo(98,48).lineTo(98,33).lineTo(2,33).closePath()TelemetryDestNameObj=pMfdL.createText(0,0,0.0001)TelemetryDestNameObj.setPositionIsRelative(true)TelemetryDestNameObj.setFontColor('green')TelemetryDestNameObj.setFontSize(6)TelemetryDestNameObj.move(-90,25)TelemetryDestNameObj.setAlignmentX('start')TelemetryDestNameObj.setAlignmentY('middle')TelemetryDestNameObj.setText('Dest Name')TelemetryDestNameObj.setWeight(0.002)TelemetryDestNameObj.setScale(1/600)TelemetryDestInfoObj=pMfdL.createText(0,0,0.00022)TelemetryDestInfoObj.setPositionIsRelative(true)TelemetryDestInfoObj.setFontColor('green')TelemetryDestInfoObj.setFontSize(6)TelemetryDestInfoObj.move(-90,15)TelemetryDestInfoObj.setAlignmentX('start')TelemetryDestInfoObj.setAlignmentY('middle')TelemetryDestInfoObj.setText('Dest Info')TelemetryDestInfoObj.setWeight(0.002)TelemetryDestInfoObj.setScale(1/600)TelemetryBrakeDistObj=pMfdL.createText(0,0,0.00025)TelemetryBrakeDistObj.setPositionIsRelative(true)TelemetryBrakeDistObj.setFontColor('green')TelemetryBrakeDistObj.setFontSize(6)TelemetryBrakeDistObj.move(-90,-5)TelemetryBrakeDistObj.setAlignmentX('start')TelemetryBrakeDistObj.setAlignmentY('middle')TelemetryBrakeDistObj.setText('Brake Info')TelemetryBrakeDistObj.setWeight(0.002)TelemetryBrakeDistObj.setScale(1/600)AnnounceLoAltiObj=pMfdL.createCustomDraw(0,0,0.0003)AnnounceLoAltiObj.usePathBuilder(AnnounceLoAltiPath)AnnounceLoAltiObj.setPositionIsRelative(true)AnnounceLoAltiObj.setScale(1/600)AnnounceLoAltiObj.build()AnnounceLoSpeedObj=pMfdL.createCustomDraw(0,0,0.0004)AnnounceLoSpeedObj.usePathBuilder(AnnounceLoSpeedPath)AnnounceLoSpeedObj.setPositionIsRelative(true)AnnounceLoSpeedObj.setScale(1/600)AnnounceLoSpeedObj.build()AnnounceLoSpeedText=pMfdL.createText(0,0,0.0005)AnnounceLoSpeedText.setPositionIsRelative(true)AnnounceLoSpeedText.setFontColor('black')AnnounceLoSpeedText.setFontSize(6)AnnounceLoSpeedText.move(50,40)AnnounceLoSpeedText.setAlignmentX('middle')AnnounceLoSpeedText.setAlignmentY('middle')AnnounceLoSpeedText.setText('Speed')AnnounceLoSpeedText.setWeight(0.002)AnnounceLoSpeedText.setScale(1/600)AnnounceLoAltiText=pMfdL.createText(0,0,0.0006)AnnounceLoAltiText.setPositionIsRelative(true)AnnounceLoAltiText.setFontColor('black')AnnounceLoAltiText.setFontSize(6)AnnounceLoAltiText.move(-50,40)AnnounceLoAltiText.setAlignmentX('middle')AnnounceLoAltiText.setAlignmentY('middle')AnnounceLoAltiText.setText('Altitude')AnnounceLoAltiText.setWeight(0.002)AnnounceLoAltiText.setScale(1/600)local function aW(aX,aY)local aZ,a_,b0=aY.getResult()local b1,b2={},{}for b3=1,#b0,2 do b1[#b1+1]=b0[b3]b2[#b2+1]=b0[b3+1]end;aX.setPoints(b1,b2)aX.setDrawData(a_)aX.setDefaultDraw(aZ)end;local function b4(aX,aY)local aZ,a_,b0=aY.getResult()aX.setDrawData(a_)aX.setDefaultDraw(aZ)end;local function b5(ae,b6,b7)if ae<b6 then return b6 end;if ae>b7 then return b7 end;return ae end;local function b8(ak)if type(ak)~='string'then return nil end;local b9,a_=pcall(function()return json and json.decode(ak)or nil end)if not b9 or type(a_)~='table'then return nil end;local function ba(ae)if type(ae)~='table'then return nil end;if ae.x and ae.y and ae.z then return vec3(ae.x,ae.y,ae.z)end;if#ae>=3 then return vec3(ae[1],ae[2],ae[3])end;return nil end;local bb=ba(a_.OLS1)local bc=ba(a_.OLS2)local bd=ba(a_.OLS3)if bb and bc and bd then return bb,bc,bd end;return nil end;local function be(ah,bf,ai)return ah+(bf-ah)*ai end;local function bg(bh)local bi=Z.OLS1 and Z.OLS2 and Z.OLS3;if not bi then a4=false;return end;local bj=0.35;for W,ae in pairs(Z)do if ae then if not _[W]then _[W]=ae else _[W]=be(_[W],ae,bj)end end end;local bk=_.OLS1;local bl=_.OLS2;local bm=_.OLS3;if not(bk and bl and bm)then a4=false;return end;local aD=(bk-bl):normalize()if not aD or aD:len()<1e-6 then a4=false;return end;local bn=bm-bl;local bo=aD*bn:dot(aD)local bp=bl+bo;local bq=bm-bp;if bq:len()<1e-6 then a4=false;return end;bq=bq:normalize()local br=-bq:normalize()local aE=(br:cross(aD)):normalize()br=(aD:cross(aE)):normalize()local bs=bm;local bt=a2 or vec3(0,0,0)if a1 and a3 and bh then local bu=bh-a3;if bu and bu>0 then bt=(bs-a1)/bu end end;a1=bs;a2=bt;a3=bh;a0.origin,a0.x,a0.y,a0.z=bs,aD,aE,br;a4=true end;local function bv(bw)if not bw then return nil end;local bx=vec3(construct.getWorldPosition())local by=bw-bx;local bz=vec3(construct.getWorldForward())local bA=vec3(construct.getWorldRight())local bB=vec3(construct.getWorldUp())local bC=by:dot(bz)if bC<=0 then return nil end;local bD=1/600;local bE=160*bD;local bF=80*bD;local bG=70*bD;local bH=4.0*(0.3+(at or 0))if not bH or bH<1e-3 then bH=1.0 end;local bI=math.deg(math.atan(math.abs(by:dot(bA)),bC))local bJ=math.deg(math.atan(by:dot(bB),bC))local bK=math.deg(math.atan(bE,bH))local bL=math.deg(math.atan(bF,bH))local bM=math.deg(math.atan(bG,bH))if bI<=bK and bJ<=bL and bJ>=-bM then local ai=bH/bC;local bN=by:dot(bA)*ai/bD;local bO=by:dot(bB)*ai/bD;bN=math.max(-160,math.min(160,bN))bO=math.max(-70,math.min(80,bO))return bN,bO end;return nil end;local function bP()local bQ,bR=0,0;local bS=tonumber(ExtraSpaceTankId)or 0;local bT=core.getElementIdList()or{}for bU,bV in ipairs(bT)do local bW=core.getElementItemIdById(bV)local bX=system.getItem(bW)if bX.name:find("FuelTank",1,true)then local bY=tonumber(bX.unitMass)or 0;local bZ=tonumber(core.getElementMassById(bV))or 0;local b_=math.max(0,bZ-bY)if bX.name:find("Atmo",1,true)then bQ=bQ+b_ elseif bX.name:find("Space",1,true)then if bS~=0 and bV==bS then else bR=bR+b_ end end end end;return bQ,bR end;local function c0(c1,c2,c3,c4,l)local c5=math.rad(c3 or 0)local c6=math.rad(c4 or 0)local c7=(c2 or 0)+(l or 0)local aD=c7*math.cos(c5)*math.cos(c6)local aE=c7*math.cos(c5)*math.sin(c6)local br=c7*math.sin(c5)return vec3((c1[1]or 0)+aD,(c1[2]or 0)+aE,(c1[3]or 0)+br)end;local function c8(c9,ca)local cb=a8[c9]if not cb then return nil end;if ca==0 then return{0,0,0},0 end;local cc=cb[ca]if not cc then return nil end;local aj=cc.center;local aI=cc.radius or 0;return aj,aI end;local function cd(c9,ca,ah,bf,aj)if ca==0 then return vec3(ah or 0,bf or 0,aj or 0)end;local c1,c2=c8(c9,ca)if c1 and c2 then return c0(c1,c2,ah,bf,aj)end;return nil end;local function ce(ah,bf)return vec3((ah.x or ah[1]or 0)-(bf.x or bf[1]or 0),(ah.y or ah[2]or 0)-(bf.y or bf[2]or 0),(ah.z or ah[3]or 0)-(bf.z or bf[3]or 0))end;local function cf(c9,cg)local cb=a8[c9]if not cb or not cg then return nil end;local ch,ci=nil,nil;for bV,cc in pairs(cb)do local aj=cc and cc.center;local cj=cc and cc.name and cc.name[1]if aj and cj then local ck=ce(cg,aj)local cl=ck:dot(ck)if not ci or cl<ci then ci=cl;ch=cj end end end;return ch end;local function cm(cg)if not cg then return nil end;local cn=math.huge;local co=nil;for cp,cb in pairs(a8)do if type(cb)=='table'then for ca,cc in pairs(cb)do if type(cc)=='table'and cc.center then local aj=vec3(cc.center[1]or 0,cc.center[2]or 0,cc.center[3]or 0)local ck=ce(cg,aj)local cq=ck:len()if cq<cn then cn=cq;co={systemId=cp,bodyId=ca,body=cc,center=aj,radius=cc.radius or 0,distance=cq}end end end end end;return co end;local function cr(cc,cs)if not cc then return nil end;local ct=tonumber(cc.GM)or 0;local aI=(tonumber(cc.radius)or 0)+(cs or 0)if ct<=0 or aI<=0 then return nil end;return math.sqrt(ct/aI)end;local function cu(c9,cg)local cb=a8[c9]if not cb or not cg then return true end;local cv,cw=math.huge,0;for bU,cc in pairs(cb)do local aj=cc and cc.center;if aj then local ck=ce(cg,aj)local cl=ck:dot(ck)if cl<cv then cv=cl;cw=cc.hasAtmosphere and cc.atmosphereRadius or(cc.radius or 0)end end end;if cv==math.huge then return true end;return math.sqrt(cv)>cw+1.0 end;local function cx()if not a9 or not s then return math.huge end;if t==0 then return math.huge end;local cc=(a8[s]or{})[t]if not cc then return math.huge end;local cy=cc.hasAtmosphere and cc.atmosphereRadius or(cc.radius or 0)local cz=cc.center;if not(cy and cy>0 and cz)then return math.huge end;local bm=vec3(cz[1],cz[2],cz[3])local cA=vec3(construct.getWorldPosition())local cB=ce(a9,cA)local cC=cB:len()if cC<=1e-6 then return math.huge end;local cD=cB/cC;local cE=ce(cA,bm)local bf=cE:dot(cD)local aj=cE:dot(cE)-cy*cy;local cF=bf*bf-aj;if cF and cF>=0 then local cG=math.sqrt(cF)local cH=-bf-cG;local cI=-bf+cG;local ai;if cH>=0 then ai=cH elseif cI>=0 then ai=cI end;if ai and ai>=0 then return ai end end;local cJ=ce(cA,bm):len()return math.max(0,cJ-cy)end;local function cK()local cL=z;z=(unit.getAtmosphereDensity()or 0)>0;if cL~=z then B=true end;local cM=A;A=Nav.axisCommandManager:getAxisCommandType(axisCommandId.longitudinal)==axisCommandType.byThrottle;if cM~=A then C=true end;if h==0 then DistIndicator.setText('555')elseif h>200 then DistIndicator.setText(string.format("%.0f su",math.ceil(h/200)))else DistIndicator.setText(string.format("%.0f",h))end;AzimIndicator.move(c,0,nil,true)VeloIndicator.move(0,e,nil,true)if a9 and not z then local bx=vec3(construct.getWorldPosition())local by=ce(a9,bx)local bz=vec3(construct.getWorldForward())local bA=vec3(construct.getWorldRight())local bB=vec3(construct.getWorldUp())local bC=by:dot(bz)if bC<=0 then DestSpaceMarkerObj.hideDraw()else local bD=1/600;local cN=160*bD;local cO=80*bD;local cP=70*bD;local bH=4.0*(0.3+(at or 0))if bH<1e-3 or bH~=bH then bH=1.0 end;local bI=math.deg(math.atan(math.abs(by:dot(bA)),bC))local bJ=math.deg(math.atan(by:dot(bB),bC))local bK=math.deg(math.atan(cN,bH))local bL=math.deg(math.atan(cO,bH))local bM=math.deg(math.atan(cP,bH))if bI<=bK and bJ<=bL and bJ>=-bM then local ai=bH/bC;local bN=by:dot(bA)*ai/bD;local bO=by:dot(bB)*ai/bD;if bN>160 then bN=160 end;if bN<-160 then bN=-160 end;if bO>80 then bO=80 end;if bO<-70 then bO=-70 end;DestSpaceMarkerObj.move(bN,bO,nil,true)DestSpaceMarkerObj.showDraw()b4(DestSpaceMarkerObj,DestSpaceMarkerPath)else DestSpaceMarkerObj.hideDraw()end end elseif not a9 then DestSpaceMarkerObj.hideDraw()else DestSpaceMarkerObj.hideDraw()end;if z then AltIndicator.move(0,f,nil,true)else AltIndicator.move(0,d,nil,true)end;local bh=system.getArkTime()local bQ,bR=bP()n=math.floor((bQ or 0)+0.5)q=math.floor((bR or 0)+0.5)if not K then K=bh;L=bQ;M=bR;Q=bh;R=bh else local bu=bh-K;if bu>0 then local cQ=math.max(0,(L or bQ)-(bQ or 0))local cR=math.max(0,(M or bR)-(bR or 0))if cQ>0 then Q=bh end;if cR>0 then R=bh end;O=O+cQ;P=P+cR;N=N+bu;if N>=U then local cS=N>0 and O/N*60 or 0;local cT=N>0 and P/N*60 or 0;if cS>0 then S=cS end;if cT>0 then T=cT end;if Q and bh-Q>=V then m=0;o=0 else local cU=cS>0 and cS or S;if cU>0 then m=math.floor(cU+0.5)local cV=cU/60;o=math.floor((bQ or 0)/cV+0.5)else m=0;o=0 end end;if R and bh-R>=V then p=0;r=0 else local cW=cT>0 and cT or T;if cW>0 then p=math.floor(cW+0.5)local cX=cW/60;r=math.floor((bR or 0)/cX+0.5)else p=0;r=0 end end;O=0;P=0;N=0 end;L=bQ;M=bR;K=bh end end;local cY=math.floor(o/3600+0.5)local cZ=math.floor(o%3600/60+0.5)local c_=math.floor(o%60+0.5)local d0=math.floor(r/3600+0.5)local d1=math.floor(r%3600/60+0.5)local d2=math.floor(r%60+0.5)if z then if cY>0 then FuelGaugeObj.setText(string.format("Fuel: %01d h - %01d kg - %01d kg/min",cY,n,m))elseif cZ>0 then FuelGaugeObj.setText(string.format("Fuel: %01d m - %01d kg - %01d kg/min",cZ,n,m))else FuelGaugeObj.setText(string.format("Fuel: %01d s - %01d kg - %01d kg/min",c_,n,m))end else if d0>0 then FuelGaugeObj.setText(string.format("Fuel: %01d h - %01d kg - %01d kg/min",d0,q,p))elseif d1>0 then FuelGaugeObj.setText(string.format("Fuel: %01d m - %01d kg - %01d kg/min",d1,q,p))else FuelGaugeObj.setText(string.format("Fuel: %01d s - %01d kg - %01d kg/min",d2,q,p))end end;if n>bingoFuel then AnnounceFuelAtmoPath.setFill('green',false)else AnnounceFuelAtmoPath.setFill('red',false)end;if q>bingoFuel then AnnounceFuelSpacePath.setFill('green',false)else AnnounceFuelSpacePath.setFill('red',false)end;if E then CenterObjPath.setStroke('red',false)else CenterObjPath.setStroke('green',false)end;if D then DestSpaceMarkerPath.setFill('red',false)else DestSpaceMarkerPath.setFill('green',false)end;b4(AnnounceFuelAtmoObj,AnnounceFuelAtmoPath)b4(AnnounceFuelSpaceObj,AnnounceFuelSpacePath)b4(CenterObj,CenterObjPath)if x and x~=""then TelemetryDestNameObj.setText(tostring(x))else TelemetryDestNameObj.setText("No Destination")end;local d3=0;if a9 then d3=math.max(math.floor(h/j*3600+0.5),0)end;if d3==0 then d3=math.huge end;local d4=(a8[s]or{})[t]if t==0 and a8[s]then local d5=cf(s,a9)if d5 then TelemetryDestInfoObj.setText(string.format("Space - %s AOI",d5))else TelemetryDestInfoObj.setText("Space")end elseif d4 and d4.name and d4.name[1]and type(u)=='number'and type(v)=='number'and type(w)=='number'then TelemetryDestInfoObj.setText(string.format("%s - %.02f/%.02f - %.0f alt",d4.name[1],u,v,w))else TelemetryDestInfoObj.setText("--------")end;if d3>3600 then DestArrivalTeleObj.setText(string.format("Time to Target: %.0f h",math.floor(d3/3600+0.5)))elseif d3>60 then DestArrivalTeleObj.setText(string.format("Time to Target: %.0f m",math.floor(d3/60+0.5)))else DestArrivalTeleObj.setText(string.format("Time to Target: %.0f s",d3))end;if l>500 then AnnounceLoAltiPath.setFill('green',false)else AnnounceLoAltiPath.setFill('red',false)end;if j>sustenationSpeed/2 and z or(unit.getAtmosphereDensity()or 0)<=0 then AnnounceLoSpeedPath.setFill('green',false)else AnnounceLoSpeedPath.setFill('red',false)end;b4(AnnounceLoAltiObj,AnnounceLoAltiPath)b4(AnnounceLoSpeedObj,AnnounceLoSpeedPath)local function d6(aD)return aD~=nil and aD or 0 end;local function d7(aD)return aD==aD and aD~=math.huge and aD~=-math.huge end;local d8=construct.getCurrentBrake()if d8==nil or d8<=0 then d8=construct.getMaxBrake()or 0 end;local d9,da,db=d6(i and i.x),d6(i and i.y),d6(i and i.z)local dc=d9*d9+da*da+db*db;local dd=dc>=0 and d7(dc)and math.sqrt(dc)or 0;local de=construct.getTotalMass()or 0;if not(d8>0 and de>0 and d7(dd))then TelemetryBrakeDistObj.setText("Brake in: __ s / __ m")else if dd<1e-3 then TelemetryBrakeDistObj.setText("Brake in: 0 s / 0 m")else a=math.floor(de*dd*dd)/(2*d8)local df=a;local dg=math.floor(de*dd/d8+0.5)if df<999 then TelemetryBrakeDistObj.setText(string.format("Brake in: %.0f s / %.0f m",math.min(dg,999),math.min(df,999)))elseif df<199999 then df=df/1000;TelemetryBrakeDistObj.setText(string.format("Brake in: %.0f s / %.0f km",math.min(dg,999),math.min(df,999)))else df=df/200000;TelemetryBrakeDistObj.setText(string.format("Brake in: %.0f s / %.0f su",math.min(dg,999),math.min(df,999)))end end end;if not A then ThrottleTarget.setText(string.format("%.0f",unit.getAxisCommandValue(0)))end;local aI=b;StallOrbPath=PathBuilder().setStroke('green',false).setStrokeWidth(3,false).setFillOpacity(.0,false).moveTo(az+aI,aA).cubicCurve(az+aI,aA+W*aI,az+W*aI,aA+aI,az,aA+aI).cubicCurve(az-W*aI,aA+aI,az-aI,aA+W*aI,az-aI,aA).cubicCurve(az-aI,aA-W*aI,az-W*aI,aA-aI,az,aA-aI).cubicCurve(az+W*aI,aA-aI,az+aI,aA-W*aI,az+aI,aA).closePath()g=-55+b5(unit.getAxisCommandValue(0),0,1)*100;ThrottleBarPath=PathBuilder().setStroke('green',false).setStrokeWidth(10,false).moveTo(175,-60).lineTo(175,g)aW(StallOrb,StallOrbPath)if A then aW(ThrottleBar,ThrottleBarPath)end;if B then if z then CaptureBoxObj.hideDraw()DistIndicator.showDraw()VeloLabel.showDraw()AltLabel.showDraw()CenterObj.showDraw()AltIndicator.showDraw()VeloIndicator.showDraw()AzimIndicator.showDraw()LadderLObj.showDraw()LadderRObj.showDraw()TickerObj.showDraw()StallOrb.showDraw()else CaptureBoxObj.showDraw()DistIndicator.showDraw()VeloLabel.hideDraw()AltLabel.hideDraw()CenterObj.showDraw()AltIndicator.showDraw()VeloIndicator.hideDraw()AzimIndicator.showDraw()LadderLObj.hideDraw()LadderRObj.hideDraw()TickerObj.hideDraw()StallOrb.showDraw()end end;if C then if A then ThrottleBar.showDraw()ThrottleTarget.hideDraw()else ThrottleBar.hideDraw()ThrottleTarget.showDraw()end end;B=false;C=false end;local function dh(ak)if type(ak)~='string'then return nil end;local ah,bf,c5,c6,di=ak:match('::pos{%s*([%-%d%.]+)%s*,%s*([%-%d%.]+)%s*,%s*([%-%d%.]+)%s*,%s*([%-%d%.]+)%s*,%s*([%-%d%.]+)%s*}')if not ah then return nil end;return tonumber(ah),tonumber(bf),tonumber(c5),tonumber(c6),tonumber(di)end;system:onEvent('onInputText',function(self,dj)if type(dj)~='string'then return end;do local dk=dj:match('^%s*(.-)%s*$')if dk and dk:lower()=='dock'then a5=not a5;a6=nil;if not a5 then if aV and aV.hideDraw then aV.hideDraw()end end;system.print(a5 and'Docking mode: ON'or'Docking mode: OFF')return end;local ah,bf,aj=b8(dj)if ah and bf and aj then Z.OLS1,Z.OLS2,Z.OLS3=ah,bf,aj;bg(system.getArkTime())system.print('OLS beacons updated from input')return end end;do local dk=dj:match('^%s*(.-)%s*$')if dk and dk:lower()=='list'then if not disk then system.print("No databank 'disk' linked: cannot list")return end;local dl={}if disk.getKeyList then local dm=disk.getKeyList()if type(dm)=='table'then for bU,W in ipairs(dm)do table.insert(dl,tostring(W))end end end;if#dl==0 and disk.getNbKeys and disk.getKey then local cj=tonumber(disk.getNbKeys())or 0;for b3=0,math.max(cj-1,0)do local W=disk.getKey(b3)if W then table.insert(dl,tostring(W))end end;if#dl==0 then for b3=1,cj do local W=disk.getKey(b3)if W then table.insert(dl,tostring(W))end end end end;if#dl==0 then system.print('No keys found in databank')return end;local dn=0;for bU,dp in ipairs(dl)do local dq=disk.getStringValue and disk.getStringValue(dp)or nil;if type(dq)=='string'and dq:find('^::pos%{')then local dr,ds,c5,c6,di=dh(dq)if dr then local c1,c2=c8(dr,ds)if c1 and c2 then system.print(dp)dn=dn+1 end end end end;if dn==0 then system.print('No valid waypoint entries found')else system.print(string.format('Listed %d valid waypoint entries',dn))end;return end end;local dt,du=dj:match('^%s*([^:][%w%._%-%s]*)%s+(::pos%b{})%s*$')if dt and du then dt=dt:match('^%s*(.-)%s*$')x,y=dt,du;if disk and disk.setStringValue then disk.setStringValue(x,y)system.print(string.format('Saved %s -> %s',x,y))else system.print("No databank 'disk' linked: cannot save")end;s,t,u,v,w=dh(y)if s then local bw=cd(s,t,u,v,w)if bw then a9=bw;system.print(string.format('Destination set to %s',x))end end;return end;do local cp,ca,c5,c6,di=dh(dj)if cp then s,t,u,v,w=cp,ca,c5,c6,di;x="Unknown"y=dj;local bw=cd(cp,ca,c5,c6,di)if bw then a9=bw;if ca==0 then system.print(string.format('Destination set to space (x %.1f, y %.1f, z %.1f)',c5,c6,di))else system.print(string.format('Destination set to system %d body %d (lat %.4f, lon %.4f, alt %.1f)',cp,ca,c5,c6,di))end;return else system.print('Invalid ::pos body/system for atlas')return end end end;if disk and disk.getStringValue then local dp=dj:match('^%s*(.-)%s*$')local dv=disk.getStringValue(dp)if dv and dv:find('^::pos%{')then x,y=dp,dv;local cp,ca,c5,c6,di=dh(dv)if cp then s,t,u,v,w=cp,ca,c5,c6,di;local bw=cd(cp,ca,c5,c6,di)if bw then a9=bw;system.print(string.format('Destination recalled: %s -> %s',dp,dv))return else system.print('Saved ::pos not valid for current atlas')return end end end end;system.print("Unrecognized input. Use 'name ::pos{...}' to save, '::pos{...}' to set, or a saved name to recall.")end)local ae=vec3(construct.getWorldVelocity())k=math.sqrt(ae.x*ae.x+ae.y*ae.y+ae.z*ae.z)if k<=10 then unit.deployLandingGears()gearExtended=true;Nav.axisCommandManager:setTargetGroundAltitude(0)Nav.axisCommandManager:resetCommand(axisCommandId.longitudinal)else gearExtended=false;Nav.axisCommandManager:setTargetGroundAltitude(200)end;unit:onEvent('onStop',function(self)system.setWaypoint(system.getWaypointFromPlayerPos(),false)if switch and switch.deactivate then switch.deactivate()end;unit.switchOffHeadlights()end)unit:onEvent('onStart',function(self)if rx then pcall(function()if rx.setChannel then rx.setChannel(Y)end end)pcall(function()if rx.startListening then rx.startListening(Y)end end)end end)if rx and rx.onEvent then rx:onEvent('onReceived',function(self,dw,dx)if dw==Y then local ah,bf,aj=b8(tostring(dx or''))if ah and bf and aj then Z.OLS1,Z.OLS2,Z.OLS3=ah,bf,aj end end end)end;system:onEvent('onFlush',function(self)local dy=2;pitchSpeedFactor=math.max(pitchSpeedFactor,0.01)yawSpeedFactor=math.max(yawSpeedFactor,0.01)rollSpeedFactor=math.max(rollSpeedFactor,0.01)dy=math.max(dy,0.01)brakeSpeedFactor=math.max(brakeSpeedFactor,0.01)brakeFlatFactor=math.max(brakeFlatFactor,0.01)autoRollFactor=math.max(autoRollFactor,0.01)turnAssistFactor=math.max(turnAssistFactor,0.01)local dz=pitchInput+system.getControlDeviceForwardInput()local dA=rollInput+system.getControlDeviceYawInput()local dB=yawInput-system.getControlDeviceLeftRightInput()local dC=brakeInput;local dD=vec3(core.getWorldVertical())local dE=vec3(construct.getWorldOrientationUp())local dF=vec3(construct.getWorldOrientationForward())local dG=vec3(construct.getWorldOrientationRight())i=vec3(construct.getWorldVelocity())local dH=vec3(construct.getWorldVelocity()):normalize()local dI=getRoll(dD,dF,dG)local dJ=math.abs(dI)local dK=utils.sign(dI)if F then local dL;do local al=vec3(construct.getWorldPosition())local dM=G and G.center;if dM and type(dM[1])=='number'then local c1=vec3(dM[1],dM[2],dM[3])local dN=al-c1;if dN:len()>1e-6 then dL=dN:normalize()end end;if not dL then local dO=vec3(core.getWorldGravity())if dO:len()>1e-6 then dL=-dO:normalize()else dL=vec3(construct.getWorldOrientationUp())end end end;local am=vec3(construct.getWorldOrientationForward())local dP=b5(am:dot(dL),-1,1)local dQ=math.deg(math.asin(dP))local dR=0;local dS=dR-dQ;local dT=0.05;local dU=b5(dS*dT,-1,1)local dV=0.1;local dW=0.05;if math.abs(dS)<dV then dU=0 elseif math.abs(dU)<dW then dU=dU>0 and dW or-dW end;dz=dU end;do if D and a9 and not z then local al=vec3(construct.getWorldPosition())local by=ce(a9,al)local dX=by:len()if dX and dX>1e-3 then local dY=0.45;local dZ=0.45;local d_=0.001;local am=dF;local bB=dE;local bA=dG;local aD=by:dot(am)local e0=by:dot(bA)local e1=by:dot(bB)local e2=math.deg(math.atan(e0,aD))local bJ=math.deg(math.atan(e1,aD))local function e3(ae)if ae>1 then return 1 elseif ae<-1 then return-1 else return ae end end;local e4=math.min(math.abs(e2)/45.0,1.0)local e5=math.min(math.abs(bJ)/30.0,1.0)local e6=e3(-dY*e2*e4*e4)local e7=e3(dZ*bJ*e5*e5)if math.abs(e2)<d_ then e6=0 end;if math.abs(bJ)<d_ then e7=0 end;local dW=0.03;if math.abs(e2)>=d_ and e6~=0 and math.abs(e6)<dW then e6=(e6>0 and 1 or-1)*dW end;if math.abs(bJ)>=d_ and e7~=0 and math.abs(e7)<dW then e7=(e7>0 and 1 or-1)*dW end;local bj=0.9;I=I+bj*(e6-I)J=J+bj*(e7-J)dB=I;dz=J end else I=0;J=0 end end;do local e8=dH;local am=vec3(construct.getWorldOrientationForward())local e9=b5(e8:dot(am),-1,1)local ea=math.deg(math.acos(e9))ea=math.min(ea,45)b=math.floor(ea/45*60+0.5)end;do if a9 then local al=vec3(construct.getWorldPosition())local by=ce(a9,al)local bB=vec3(construct.getWorldOrientationUp())local bA=vec3(construct.getWorldOrientationRight())local eb=by-bB*by:dot(bB)local ec=by-bA*by:dot(bA)local ed=eb:len()local ee=ec:len()if ed>1e-6 then eb=eb/ed;local am=vec3(construct.getWorldOrientationForward())local bA=vec3(construct.getWorldOrientationRight())local aD=eb:dot(am)local aE=eb:dot(bA)local e2=math.deg(math.atan(aE,aD))local ef=math.max(-90,math.min(90,e2))c=math.floor(ef/90*130+0.5)end;if ee>1e-6 then ec=ec/ee;local am=vec3(construct.getWorldOrientationForward())local bB=vec3(construct.getWorldOrientationUp())local aD=ec:dot(am)local aE=ec:dot(bB)local bJ=math.deg(math.atan(aE,aD))local eg=b5(bJ,-45,45)local eh=(eg+45)/90;d=math.floor(eh*110+0.5)end end end;do local am=vec3(construct.getWorldOrientationForward())j=i:dot(am)*3.6;if j<0 then j=0 end;local ak=math.min(j,1000)/1000*110;e=math.floor(ak+0.5)end;do local al=vec3(construct.getWorldPosition())local ei=math.huge;local ej=0;for cp,cb in pairs(a8)do if type(cb)=='table'then for ca,cc in pairs(cb)do if type(cc)=='table'and cc.center then local aj=cc.center;local ck=ce(al,vec3(aj[1],aj[2],aj[3])):len()if ck<ei then ei=ck;ej=cc.radius or 0 end end end end end;l=math.max(ei-ej,0)local ak=math.min(l,3500)/3500*110;f=math.floor(ak+0.5)end;do if a9 then local al=vec3(construct.getWorldPosition())h=ce(a9,al):len()/1000 end end;do local ck;if altimeter and altimeter.getMaxDistance then ck=altimeter.getMaxDistance()end;if type(ck)=='number'and ck<2 then Nav.axisCommandManager:deactivateGroundEngineAltitudeStabilization()end end;local ek=vec3(construct.getWorldAngularVelocity())local el=dz*pitchSpeedFactor*dG+dA*rollSpeedFactor*dF+dB*yawSpeedFactor*dE;if dD:len()>0.01 and unit.getAtmosphereDensity()>0.0 then local em=1.0;if autoRoll==true and dJ>em and dA==0 then local en=utils.clamp(0,dJ-30,dJ+30)if rollPID==nil then rollPID=pid.new(autoRollFactor*0.01,0,autoRollFactor*0.1)end;rollPID:inject(en-dI)local eo=rollPID:get()el=el+eo*dF end;local ep=20.0;if turnAssist==true and dJ>ep and dz==0 and dB==0 then local eq=turnAssistFactor*0.1;local er=turnAssistFactor*0.025;local es=(dJ-ep)/(180-ep)*180;local et=0;if es<90 then et=es/90 elseif es<180 then et=(180-es)/90 end;et=et*et;local eu=-dK*er*(1.0-et)local ev=eq*et;el=el+ev*dG+eu*dE end end;local ew=1;local ex=0;local ey=1;local ez=dy*(el-ek)local eA=vec3(construct.getWorldAirFrictionAngularAcceleration())ez=ez-eA;Nav:setEngineTorqueCommand('torque',ez,ew,'airfoil','','',ey)local eB=-dC*(brakeSpeedFactor*i+brakeFlatFactor*dH)Nav:setEngineForceCommand('brake',eB)local eC=''local eD=vec3()local eE=false;local eF='thrust analog longitudinal'local eG=Nav.axisCommandManager:getAxisCommandType(axisCommandId.longitudinal)if eG==axisCommandType.byThrottle then local eH=Nav.axisCommandManager:composeAxisAccelerationFromThrottle(eF,axisCommandId.longitudinal)Nav:setEngineForceCommand(eF,eH,ew)elseif eG==axisCommandType.byTargetSpeed then local eH=Nav.axisCommandManager:composeAxisAccelerationFromTargetSpeed(axisCommandId.longitudinal)eC=eC..' , '..eF;eD=eD+eH;if Nav.axisCommandManager:getTargetSpeed(axisCommandId.longitudinal)==0 or Nav.axisCommandManager:getCurrentToTargetDeltaSpeed(axisCommandId.longitudinal)<-Nav.axisCommandManager:getTargetSpeedCurrentStep(axisCommandId.longitudinal)*0.5 then eE=true end end;local eI='thrust analog lateral'local eJ=Nav.axisCommandManager:getAxisCommandType(axisCommandId.lateral)if eJ==axisCommandType.byThrottle then local eK=Nav.axisCommandManager:composeAxisAccelerationFromThrottle(eI,axisCommandId.lateral)Nav:setEngineForceCommand(eI,eK,ew)elseif eJ==axisCommandType.byTargetSpeed then local eL=Nav.axisCommandManager:composeAxisAccelerationFromTargetSpeed(axisCommandId.lateral)eC=eC..' , '..eI;eD=eD+eL end;local eM='thrust analog vertical'local eN=Nav.axisCommandManager:getAxisCommandType(axisCommandId.vertical)if eN==axisCommandType.byThrottle then local eO=Nav.axisCommandManager:composeAxisAccelerationFromThrottle(eM,axisCommandId.vertical)Nav:setEngineForceCommand(eM,eO,ew,'airfoil','ground','',ey)elseif eN==axisCommandType.byTargetSpeed then local eP=Nav.axisCommandManager:composeAxisAccelerationFromTargetSpeed(axisCommandId.vertical)if gearExtended then Nav:setEngineForceCommand(eM,eP,ew,'airfoil','ground','',ey)else eC=eC..' , '..eM;eD=eD+eP end end;if eD:len()>constants.epsilon then if brakeInput~=0 or eE or math.abs(dH:dot(dF))<0.95 then eC=eC..', brake'end;Nav:setEngineForceCommand(eC,eD,ex,'','','',ey)end;Nav:setBoosterCommand('rocket_engine')end)system:onEvent('onUpdate',function(self)local ae=vec3(construct.getWorldVelocity())k=math.sqrt(ae.x*ae.x+ae.y*ae.y+ae.z*ae.z)Nav:update()if z then Nav.axisCommandManager:setupCustomTargetSpeedRanges(axisCommandId.longitudinal,{1250})elseif F then local eQ=cr(G,G.atmosphereThickness+H)Nav.axisCommandManager:setupCustomTargetSpeedRanges(axisCommandId.longitudinal,{eQ*3.6})else Nav.axisCommandManager:setupCustomTargetSpeedRanges(axisCommandId.longitudinal,{construct.getMaxSpeed()*3.6})end;do local bh=system.getArkTime()if a5 and tx and tx.setChannel and tx.send then if not a6 or bh-a6>1.0 then pcall(function()tx.setChannel(X)end)pcall(function()tx.send("ping")end)a6=bh end end;if a5 and k<=0.5 then a5=false;if aV and aV.hideDraw then aV.hideDraw()end end;bg(bh)if a5 and a4 and a0.origin and a0.x and a0.y and a0.z then pcall(function()ac.setPosition(a0.origin.x,a0.origin.y,a0.origin.z)ac.rotateXYZ({a0.y.x,a0.y.y,a0.y.z},{a0.x.x,a0.x.y,a0.x.z},{a0.z.x,a0.z.y,a0.z.z})if aQ and aQ.showDraw then aQ.showDraw()end;if aR and aR.showDraw then aR.showDraw()end;if aS and aS.showDraw then aS.showDraw()end;if aT and aT.showDraw then aT.showDraw()end end)local eR=a0.origin+a0.z*2;local bN,bO=bv(eR)if bN and bO then aV.move(bN,bO,nil,true)aV.showDraw()else aV.hideDraw()end else if aQ and aQ.hideDraw then aQ.hideDraw()end;if aR and aR.hideDraw then aR.hideDraw()end;if aS and aS.hideDraw then aS.hideDraw()end;if aT and aT.hideDraw then aT.hideDraw()end;if aV and aV.hideDraw then aV.hideDraw()end end end;cK()local eS=projector.getSVG()if eS then system.setScreen(eS)end;if z then D=false;if E then brakeInput=0 end;E=false end;if a9 then if cu(s,a9)then if E and math.floor(h)<math.ceil(a/1000)+9 and k>10 then brakeInput=1 elseif E and k==0 then brakeInput=0;E=false end else if E and math.floor(cx())<math.ceil(a+49000)and k>10 then brakeInput=1 elseif E and k==0 then brakeInput=0;E=false end end end end)system:onEvent('onActionStart',function(self,eT)if eT=='stopengines'then Nav.axisCommandManager:resetCommand(axisCommandId.longitudinal)elseif eT=='strafeleft'then Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.lateral,-1.0)elseif eT=='gear'then gearExtended=not gearExtended;if gearExtended then unit.deployLandingGears()Nav.axisCommandManager:setTargetGroundAltitude(0)Nav.axisCommandManager:resetCommand(axisCommandId.longitudinal)else unit.retractLandingGears()Nav.axisCommandManager:setTargetGroundAltitude(200)end elseif eT=='brake'then brakeInput=brakeInput+1;local eG=Nav.axisCommandManager:getAxisCommandType(axisCommandId.longitudinal)if eG==axisCommandType.byTargetSpeed then local eU=Nav.axisCommandManager:getTargetSpeed(axisCommandId.longitudinal)if math.abs(eU)>constants.epsilon then Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.longitudinal,-utils.sign(eU))end end elseif eT=='groundaltitudedown'then Nav.axisCommandManager:updateTargetGroundAltitudeFromActionStart(-1.0)elseif eT=='backward'then pitchInput=pitchInput+1 elseif eT=='speedup'then Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.longitudinal,5.0)elseif eT=='light'then if unit.isAnyHeadlightSwitchedOn()then unit.switchOffHeadlights()if switch and switch.deactivate then switch.deactivate()end else unit.switchOnHeadlights()if switch and switch.activate then switch.activate()end end elseif eT=='left'then rollInput=rollInput-1 elseif eT=='forward'then pitchInput=pitchInput-1 elseif eT=='speeddown'then Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.longitudinal,-5.0)elseif eT=='groundaltitudeup'then Nav.axisCommandManager:updateTargetGroundAltitudeFromActionStart(1.0)elseif eT=='right'then rollInput=rollInput+1 elseif eT=='booster'then Nav:toggleBoosters()elseif eT=='yawright'then yawInput=yawInput-1 elseif eT=='straferight'then Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.lateral,1.0)elseif eT=='yawleft'then yawInput=yawInput+1 elseif eT=='down'then Nav.axisCommandManager:deactivateGroundEngineAltitudeStabilization()Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.vertical,-1.0)elseif eT=='up'then Nav.axisCommandManager:deactivateGroundEngineAltitudeStabilization()Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.vertical,1.0)elseif eT=='antigravity'then if antigrav~=nil then antigrav.toggle()end elseif eT=='option1'and a9 and not z then brakeInput=0;E=not E elseif eT=='option2'and a9 and not z then D=not D elseif eT=='option3'then G=cm(vec3(construct.getWorldPosition())).body;if G then F=not F else F=false end end end)system:onEvent('onActionStop',function(self,eT)if eT=='backward'then pitchInput=pitchInput-1 elseif eT=='left'then rollInput=rollInput+1 elseif eT=='down'then Nav.axisCommandManager:updateCommandFromActionStop(axisCommandId.vertical,1.0)Nav.axisCommandManager:activateGroundEngineAltitudeStabilization(currentGroundAltitudeStabilization)elseif eT=='yawright'then yawInput=yawInput+1 elseif eT=='yawleft'then yawInput=yawInput-1 elseif eT=='forward'then pitchInput=pitchInput+1 elseif eT=='straferight'then Nav.axisCommandManager:updateCommandFromActionStop(axisCommandId.lateral,-1.0)elseif eT=='up'then Nav.axisCommandManager:updateCommandFromActionStop(axisCommandId.vertical,-1.0)Nav.axisCommandManager:activateGroundEngineAltitudeStabilization(currentGroundAltitudeStabilization)elseif eT=='strafeleft'then Nav.axisCommandManager:updateCommandFromActionStop(axisCommandId.lateral,1.0)elseif eT=='brake'then brakeInput=brakeInput-1 elseif eT=='right'then rollInput=rollInput-1 end end)system:onEvent('onActionLoop',function(self,eT)if eT=='brake'then local eG=Nav.axisCommandManager:getAxisCommandType(axisCommandId.longitudinal)if eG==axisCommandType.byTargetSpeed then local eU=Nav.axisCommandManager:getTargetSpeed(axisCommandId.longitudinal)if math.abs(eU)>constants.epsilon then Nav.axisCommandManager:updateCommandFromActionLoop(axisCommandId.longitudinal,-utils.sign(eU))end end elseif eT=='speeddown'then Nav.axisCommandManager:updateCommandFromActionLoop(axisCommandId.longitudinal,-1.0)elseif eT=='speedup'then Nav.axisCommandManager:updateCommandFromActionLoop(axisCommandId.longitudinal,1.0)elseif eT=='groundaltitudeup'then Nav.axisCommandManager:updateTargetGroundAltitudeFromActionLoop(1.0)elseif eT=='groundaltitudedown'then Nav.axisCommandManager:updateTargetGroundAltitudeFromActionLoop(-1.0)end end)system.print("PRIMED")
