name: Sky HUD
slots:
  altimeter:
    name: altimeter
    class: TelemeterUnit
    select: null
    type:
      events: []
      methods: []
  core:
    name: core
    class: CoreUnit
    select: null
    type:
      events: []
      methods: []
  disk:
    name: disk
    class: DataBankUnit
    select: null
    type:
      events: []
      methods: []
  warp:
    name: warp
    class: WarpDriveUnit
    select: null
    type:
      events: []
      methods: []
  switch:
    name: switch
    class: PressureTile
    select: null
    type:
      events: []
      methods: []
  rx:
    name: rx
    class: Receiver
    select: null
    type:
      events: []
      methods: []
  tx:
    name: tx
    class: Emitter
    select: null
    type:
      events: []
      methods: []
handlers:
  altimeter: {}
  core: {}
  disk: {}
  warp: {}
  switch:
    onPressed():
      lua: switch:triggerEvent('onPressed')
    onReleased():
      lua: switch:triggerEvent('onReleased')
  rx:
    "onReceived(channel,message)":
      lua: rx:triggerEvent('onReceived',channel,message)
  tx:
    "onSent(channel,message)":
      lua: tx:triggerEvent('onSent',channel,message)
  library:
    onStart():
      lua: >-
        ;(function()

        local a={}local b=0;function library.addEventHandlers(c)if not c or c.onEvent and c.triggerEvent then return false end;b=b+1;a[b]=c;local d,e,f='table','function','thread'if d~=type(c)then error('You can only add event handlers to table objects!')end;local g={}local function h(c)local i=type(c)return e==i or d==i and h(getmetatable(c).__call)or f==i end;c.onEvent=function(self,j,k,l)if not h(k)then error('Event handler must be a function, a callable object or a thread!')end;l=l or self;if d~=type(l)then error('The value of self must be a table!')end;if not g[j]then g[j]={_=0}end;local m=f==type(k)and function(...)coroutine.resume(k,...)end or k;local k=g[j]local n=k._+1;k[n]={m,l}k._=n;return n end;c.clearEvent=function(self,j,o)if g[j]and g[j][o]then g[j][o]=nil end end;c.clearAllEvents=function(self)g={}end;c.triggerEvent=function(self,j,...)local p=g[j]if p then for q=1,p._ do local k=p[q]if k then k[1](k[2],...)end end end end;return true end;function library.clearAllEventHandlers()for q=1,b do local c=a[q]if c and c.clearAllEvents then c:clearAllEvents()end end end

        end)()

        ;(function()

        local a=DULibrary or{}function a.getLinks(b,c)local d={}if not b then b={}end;for e,f in pairs(unit.getOutPlugs())do local g=unit[f.name]if'table'==type(g)and'function'==type(g.getClass)then local h=true;for i,j in pairs(b)do if not('function'==type(g[i])and j==g[i]():sub(1,#j))then h=false;break end end;if h then if c then table.insert(d,g)else d[f.name]=g end end end end;return d end;function a.getLinksByClass(k,c)return a.getLinks({getClass=k},c)end;function a.getLinkByClass(k)return a.getLinksByClass(k,true)[1]end;function a.getCoreUnit()return a.getLinkByClass('CoreUnit')end;function a.getLinkByName(l)local m=a.getCoreUnit()if not m then error('getLinkByName requires a linked CoreUnit to work')end;local d=a.getLinks()for n,o in pairs(d)do if l==m.getElementNameById(o.getLocalId())then return o end end end

        end)()

        package.preload['AR_Library:../libs/@EasternGamer/AR-Library/src/ARImport.lua']=(function()

        function LinkedList(a,b)local c={}local d={}local e=0;local f,g,h,i=b..'Remove',b..'Add',b..'index',b..'ref'c[f]=function(j)local k,d=e,d;if k>1 then if j[h]==-1 then return end;local l,m=d[k],j[h]d[m]=l;d[k]=nil;l[h]=m;e=k-1;j[h]=-1;j[i]=nil elseif k==1 then d[1]=nil;e=0;j[h]=-1;j[i]=nil end end;c[g]=function(j,n)local h,i=h,i;if j[h]and j[h]~=-1 then if not j[i]==c or n then j[i][f](j)else return end end;local k=e+1;d[k]=j;j[h]=k;j[i]=c;e=k end;c[b..'GetData']=function()return d,e end;return c end;local math=math;local o,p,q,type=math.sin,math.cos,math.rad,type;function RotMatrixToQuat(r,s,t)local u,v,w=r[1],s[2],t[3]local x=u+v+w;if x>0 then local y=0.5/(x+1)^0.5;return(s[3]-t[2])*y,(t[1]-r[3])*y,(r[2]-s[1])*y,0.25/y elseif u>v and u>w then local y=1/(2*(1+u-v-w)^0.5)return 0.25/y,(s[1]+r[2])*y,(t[1]+r[3])*y,(s[3]-t[2])*y elseif v>w then local y=1/(2*(1+v-u-w)^0.5)return(s[1]+r[2])*y,0.25/y,(t[2]+s[3])*y,(t[1]-r[3])*y else local y=1/(2*(1+w-u-v)^0.5)return(t[1]+r[3])*y,(t[2]+s[3])*y,0.25/y,(r[2]-s[1])*y end end;function GetQuaternion(z,A,B,C)if type(z)=='number'then if C==nil then if z==z and A==A and B==B then local q,o,p=q,o,p;z,A,B=-q(z*0.5),q(A*0.5),-q(B*0.5)local D,E,F=o(z),o(A),o(B)local G,H,I=p(z),p(A),p(B)return D*H*I-G*E*F,G*E*I+D*H*F,G*H*F-D*E*I,G*H*I+D*E*F else return 0,0,0,1 end else return z,A,B,C end elseif type(z)=='table'then if#z==3 then return RotMatrixToQuat(z,A,B)elseif#z==4 then return z[1],z[2],z[3],z[4]else print('Unsupported Rotation!')end end end;function QuaternionMultiply(J,K,L,M,N,O,P,Q)return J*Q+M*N+K*P-L*O,K*Q+M*O+L*N-J*P,L*Q+M*P+J*O-K*N,M*Q-J*N-K*O-L*P end;function RotatePoint(J,K,L,M,R,S,T,U,V,W)local X,Y,Z=2*(J*S-K*R),2*(J*T-L*R),2*(K*T-L*S)return R+K*X+L*Y+M*Z+U,S-J*X-M*Y+L*Z+V,T+M*X-J*Y-K*Z+W end;function getRotationManager(_,a0,a)local print,type,a1,a2,a3,a4=DUSystem.print,type,table.unpack,QuaternionMultiply,RotatePoint,GetQuaternion;local a5,a6,a7=nil,false,false;local a8=nil;local a9,aa,ab=a0[1],a0[2],a0[3]local ac=false;local ad=math.random()*0.00001;local ae,af,ag,ah=0,0,0,1;local ai,aj,ak,al=0,0,0,1;local am,an,ao=0,1,0;local ap={}local aq=LinkedList(a,'sub')local ar={}local as={0,0,0,1,a9,aa,ab,a9,aa,ab}local function at(au,av,aw,ax,ay,az,aA,aB,aC,aD)if not au then au,av,aw,ax,ay,az,aA,aB,aC,aD=a1(as)else as={au,av,aw,ax,ay,az,aA,aB,aC,aD}end;local aE,aF,aG;if not ac then aE,aF,aG=a9-ay,aa-az,ab-aA else aE,aF,aG=a9,aa,ab end;if ax~=1 and ax~=-1 then a0[1],a0[2],a0[3]=a3(au,av,aw,-ax,aE,aF,aG,aB,aC,aD)if al~=1 then au,av,aw,ax=a2(au,av,aw,ax,ai,aj,ak,al)end else a0[1],a0[2],a0[3]=aB+aE,aC+aF,aD+aG;if al~=1 then au,av,aw,ax=ai,aj,ak,al end end;_[1],_[2],_[3],_[4]=au,av,aw,ax;if a7 then am,an,ao=2*(au*av+aw*ax),1-2*(au*au+aw*aw),2*(av*aw-au*ax)end;local aH,aI=aq.subGetData()for aJ=1,aI do aH[aJ].update(au,av,aw,ax,a9,aa,ab,a0[1],a0[2],a0[3])end;a6=false end;ar.update=at;local function aK()if not a5 then at()else a5.bubble()end end;local function aL()local aM,aN,aO,aP=a4(ae,af,ag,ah)if aM~=ai or aN~=aj or aO~=ak or aP~=al then ai,aj,ak,al=aM,aN,aO,aP;aK()ar.bubble()return true end;return false end;function ar.enableNormal()a7=true end;function ar.disableNormal()a7=false end;function ar.setSuperManager(aQ)a5=aQ;if not aQ then as={0,0,0,1,a9,aa,ab,a9,aa,ab}a6=true end end;function ar.addToQueue(aR)if not a6 then ap[#ap+1]=aR end end;function ar.addSubRotation(aQ)aQ.setSuperManager(ar)aq.subAdd(aQ,true)ar.bubble()end;function ar.remove()if a5 then a5.removeSubRotation(ar)ar.setSuperManager(false)ar.bubble()end end;function ar.removeSubRotation(aS)aS.setSuperManager(false)aq.subRemove(aS)end;function ar.bubble()if a5 and not a6 then ap={}a6=true;a5.addToQueue(at)else a6=true end end;function ar.checkUpdate()local aT=a6;if aT then at()ap={}else for aJ=1,#ap do ap[aJ]()end;ap={}end;return aT end;local a8=ar.bubble;local function aU(aV,aW)aV.update=at;function aV.getPosition()return a9,aa,ab end;function aV.getRotationManger()return ar end;function aV.getSubRotationData()return aq.subGetData()end;aV.checkUpdate=ar.checkUpdate;function aV.setPosition(aM,aN,aO)if not(aM~=aM or aN~=aN or aO~=aO)then local aX=aN+ad;if a9~=aM or aa~=aX or ab~=aO then a9,aa,ab=aM,aX,aO;a8()return true end end;return false end;function aV.getNormal()return am,an,ao end;function aV.rotateXYZ(aY,aZ,a_,b0)if aY and aZ and a_ then ae,af,ag,ah=aY,aZ,a_,b0;aL()if aW then aW()end else if type(aY)=='table'then if#aY==3 then ae,af,ag,ah=aY[1],aY[2],aY[3],nil;local b1=aL()if aW then aW()end;goto b2 end end;print('Invalid format. Must be three angles, or right, forward and up vectors, or a quaternion. Use radians if angles.')::b2::return false end end;function aV.rotateX(aY)ae=aY;ah=nil;aL()if aW then aW()end end;function aV.rotateY(aZ)af=aZ;ah=nil;aL()if aW then aW()end end;function aV.rotateZ(a_)ag=a_;ah=nil;aL()if aW then aW()end end;function aV.setPositionIsRelative(b3)ac=b3;a8()end;function aV.getRotation()return ai,aj,ak,al end end;ar.assignFunctions=aU;return ar end;local b4=math.atan;local a1,pairs,print=table.unpack,pairs,DUSystem.print;local b5={lowercase=false,uppercase=true,[10]={{},16,'',10},[32]={{},10,'',32},[33]={{4,0,3,2,5,2,4,4,4,12},10,'M%g %gL%g %gL%g %gZ M%g %gL%g %g',33},[34]={{2,10,2,6,6,10,6,6},6,'M%g %gL%g %g M%g %gL%g %g',34},[35]={{0,4,8,4,6,2,6,10,8,8,0,8,2,10,2,2},10,'M%g %gL%g %g M%g %gL%g %g M%g %gL%g %g M%g %gL%g %g',35},[36]={{6,2,2,6,6,10,4,12,4,0},6,'M%g %gL%g %gL%g %g M%g %gL%g %g',36},[37]={{0,0,8,12,2,10,2,8,6,4,6,2},10,'M%g %gL%g %g M%g %gL%g %g M%g %gL%g %g',37},[38]={{8,0,4,12,8,8,0,4,4,0,8,4},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',38},[39]={{0,8,0,12},2,'M%g %gL%g %g',39},[40]={{6,0,2,4,2,8,6,12},8,'M%g %gL%g %gL%g %gL%g %g',40},[41]={{2,0,6,4,6,8,2,12},8,'M%g %gL%g %gL%g %gL%g %g',41},[42]={{0,0,4,12,8,0,0,8,8,8,0,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',42},[43]={{1,6,7,6,4,9,4,3},10,'M%g %gL%g %gM%g %gL%g %g',43},[44]={{0,-2,2,1},4,'M%g %gL%g %g',44},[45]={{2,6,6,6},10,'M%g %gL%g %g',45},[46]={{0,0,1,0},3,'M%g %gL%g %g',46},[47]={{2,0,10,12},12,'M%g %gL%g %g',47},[48]={{1,0,9,0,9,12,1,12,1,0,9,12},10,'M%g %gL%g %gL%g %gL%g %gZ M%g %gL%g %g',48},[49]={{5,0,5,12,3,10},10,'M%g %gL%g %gL%g %g',49},[50]={{1,12,9,12,9,7,1,5,1,0,9,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',50},[51]={{1,12,9,12,9,0,1,0,1,6,9,6},10,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',51},[52]={{1,12,1,6,9,6,9,12,9,0},10,'M%g %gL%g %gL%g %g M%g %gL%g %g',52},[53]={{1,0,9,0,9,6,1,7,1,12,9,12},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',53},[54]={{1,12,1,0,9,0,9,5,1,7},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',54},[55]={{1,12,9,12,9,6,5,0},10,'M%g %gL%g %gL%g %gL%g %g',55},[56]={{1,0,9,0,9,12,1,12,1,6,9,6},10,'M%g %gL%g %gL%g %gL%g %gZ M%g %gL%g %g',56},[57]={{9,0,9,12,1,12,1,7,9,5},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',57},[58]={{4,9,4,7,4,5,4,3},2,'M%g %gL%g %g M%g %gL%g %g',58},[59]={{4,9,4,7,4,5,1,2},5,'M%g %gL%g %g M%g %gL%g %g',59},[60]={{6,0,2,6,6,12},6,'M%g %gL%g %gL%g %g',60},[61]={{1,4,7,4,1,8,7,8},8,'M%g %gL%g %g M%g %gL%g %g',61},[62]={{2,0,6,6,2,12},6,'M%g %gL%g %gL%g %g',62},[63]={{0,8,4,12,8,8,4,4,4,1,4,0},10,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',63},[64]={{8,4,4,0,0,4,0,8,4,12,8,8,4,4,3,6},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',64},[65]={{0,0,0,8,4,12,8,8,8,0,0,4,8,4},10,'M%g %gL%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',65},[66]={{0,0,0,12,4,12,8,10,4,6,8,2,4,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %gL%g %gZ',66},[67]={{8,0,0,0,0,12,8,12},10,'M%g %gL%g %gL%g %gL%g %g',67},[68]={{0,0,0,12,4,12,8,8,8,4,4,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %gZ',68},[69]={{8,0,0,0,0,12,8,12,0,6,6,6},10,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',69},[70]={{0,0,0,12,8,12,0,6,6,6},10,'M%g %gL%g %gL%g %g M%g %gL%g %g',70},[71]={{6,6,8,4,8,0,0,0,0,12,8,12},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',71},[72]={{0,0,0,12,0,6,8,6,8,12,8,0},10,'M%g %gL%g %g M%g %gL%g %g M%g %gL%g %g',72},[73]={{0,0,8,0,4,0,4,12,0,12,8,12},10,'M%g %gL%g %g M%g %gL%g %g M%g %gL%g %g',73},[74]={{0,4,4,0,8,0,8,12},10,'M%g %gL%g %gL%g %gL%g %g',74},[75]={{0,0,0,12,8,12,0,6,6,0},10,'M%g %gL%g %g M%g %gL%g %gL%g %g',75},[76]={{8,0,0,0,0,12},10,'M%g %gL%g %gL%g %g',76},[77]={{0,0,0,12,4,8,8,12,8,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',77},[78]={{0,0,0,12,8,0,8,12},10,'M%g %gL%g %gL%g %gL%g %g',78},[79]={{0,0,0,12,8,12,8,0},10,'M%g %gL%g %gL%g %gL%g %gZ',79},[80]={{0,0,0,12,8,12,8,6,0,5},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',80},[81]={{0,0,0,12,8,12,8,4,4,4,8,0},10,'M%g %gL%g %gL%g %gL%g %gZ M%g %gL%g %g',81},[82]={{0,0,0,12,8,12,8,6,0,5,4,5,8,0},10,'M%g %gL%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',82},[83]={{0,2,2,0,8,0,8,5,0,7,0,12,6,12,8,10},10,'M%g %gL%g %gL%g %gL%g %gL%g %gL%g %gL%g %gL%g %g',83},[84]={{0,12,8,12,4,12,4,0},10,'M%g %gL%g %g M%g %gL%g %g',84},[85]={{0,12,0,2,4,0,8,2,8,12},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',85},[86]={{0,12,4,0,8,12},10,'M%g %gL%g %gL%g %g',86},[87]={{0,12,2,0,4,4,6,0,8,12},10,'M%g %gL%g %gL%g %gL%g %gL%g %g',87},[88]={{0,0,8,12,0,12,8,0},10,'M%g %gL%g %g M%g %gL%g %g',88},[89]={{0,12,4,6,8,12,4,6,4,0},10,'M%g %gL%g %gL%g %g M%g %gL%g %g',89},[90]={{0,12,8,12,0,0,8,0,2,6,6,6},10,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',90},[91]={{6,0,2,0,2,12,6,12},6,'M%g %gL%g %gL%g %gL%g %g',91},[92]={{1,12,9,0},10,'M%g %gL%g %g',92},[93]={{2,0,6,0,6,12,2,12},6,'M%g %gL%g %gL%g %gL%g %g',93},[94]={{2,6,4,12,6,6},6,'M%g %gL%g %gL%g %g',94},[95]={{0,0,8,0},10,'M%g %gL%g %g',95},[96]={{2,12,6,8},6,'M%g %gL%g %g',96},[123]={{6,0,4,2,4,10,6,12,2,6,4,6},6,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',123},[124]={{4,0,4,5,4,6,4,12},6,'M%g %gL%g %g M%g %gL%g %g',124},[125]={{4,0,6,2,6,10,4,12,6,6,8,6},6,'M%g %gL%g %gL%g %gL%g %g M%g %gL%g %g',125},[126]={{0,4,2,8,6,4,8,8},10,'M%g %gL%g %gL%g %gL%g %g',126}}STROKE_LINE_CAP={butt='butt',round='round',square='square'}STROKE_LINE_JOIN={miter='miter',miterclip='miter-clip',round='round',bevel='bevel',arcs='arcs'}function SetDefaultFont(b6)local b7=pcall(function()return require('Fonts/'..b6)end)if b7 then b5=require('Fonts/'..b6)else print('ERROR: Font \''..b6 ..'\' not found!')end end;function PathBuilder()local b8={}local b9=1;local ba={}local bb=1;local table=table;local bc,bd,pairs,print=table.concat,table.insert,pairs,print;local be={Id={nil,nil,'id','%s'},Class={nil,nil,'class','%s'},Style={nil,nil,'style','%s'},Fill={nil,nil,'fill','%s'},FillOpacity={nil,nil,'fill-opacity','%g'},Stroke={nil,nil,'stroke','%s'},StrokeOpacity={nil,nil,'stroke-opacity','%g'},StrokeWidth={nil,nil,'stroke-width','%gpx'},StrokeLineCap={nil,nil,'stroke-linecap','%s'},StrokeLineJoin={nil,nil,'stroke-linejoin','%s'},StrokeMiterLimit={nil,nil,'stroke-miterlimit','%g'},StrokeDashArray={nil,nil,'stroke-dasharray','%s'},StrokeDashOffset={nil,nil,'stroke-dashoffset','%s'}}local bf={}local bg=0;function bf.moveTo(z,A)bg=1;b8[b9],b8[b9+1],ba[bb]=z,A,'M%g %g'bb=bb+1;b9=b9+2;return bf end;function bf.lineTo(z,A)b8[b9],b8[b9+1],ba[bb]=z,A,'L%g %g'bb=bb+1;b9=b9+2;return bf end;function bf.cubicCurve(bh,bi,bj,bk,z,A)bg=2;b8[b9],b8[b9+1],b8[b9+2],b8[b9+3],b8[b9+4],b8[b9+5],ba[bb]=bh,bi,bj,bk,z,A,'C%g %g %g %g %g %g'bb=bb+1;b9=b9+6;return bf end;function bf.smoothCubicCurve(bh,bi,z,A)if bg==2 then b8[b9],b8[b9+1],b8[b9+2],b8[b9+3],ba[bb]=bh,bi,z,A,'S%g %g %g %g'bb=bb+1;b9=b9+4 else print('Invalid command for Smooth Cubic Curve, preceed with a cubic.')end;return bf end;function bf.quadCurve(bh,bi,z,A)bg=3;b8[b9],b8[b9+1],b8[b9+2],b8[b9+3],ba[bb]=bh,bi,z,A,'Q%g %g %g %g'bb=bb+1;b9=b9+4;return bf end;function bf.smoothQuadCurve(z,A)if bg==3 then b8[b9],b8[b9+1],ba[bb]=z,A,'T%g %g'bb=bb+1;b9=b9+2 else print('Invalid command for Smooth Quad Curve, preceed with a quad.')end;return bf end;function bf.closePath()bg=0;ba[bb]='Z'bb=bb+1;return bf end;for bl,bm in pairs(be)do bf['set'..bl]=function(bn,bo)local bp=be[bl]bp[1],bp[2]=bn,bo;return bf end end;function bf.getPoints()return b8 end;function bf.getResult()local bq={}local br={['sizes']=bq}local bs=1;local bt,bu={'<path '},2;for bl,bm in pairs(be)do if bm[1]then if bm[2]then if bl=='StrokeWidth'then bq[1]=bm[1]bu=bu+1;bd(bt,2,'stroke-width="'..bm[4]..'" ')else br[bs]=bm[1]bs=bs+1;bt[bu]=bm[3]..'="'..bm[4]..'" 'bu=bu+1 end elseif bm[2]==false or bm[2]==nil then if bl=='StrokeWidth'then bu=bu+1;bd(bt,2,'stroke-width="'..bm[1]..'px" ')else bt[bu]=bm[3]..'="'..bm[1]..'" 'bu=bu+1 end end end end;bt[bu]='d="'bt[bu+1]=bc(ba)bt[bu+2]='"/>'return bc(bt),br,b8 end;return bf end;function LoadUIModule(self,bv,bw)local bx=math.random;function self.setUIElements(by)by=by or 1;local bz,a1=table.remove,table.unpack;local function bA(bB,bC,bD)local bE=#bB;if bE>=60 then return false end;if bD==1 then return{{a1(bB)},{a1(bC)}}else local bF,bG={},{}for aJ=1,bE do bF[aJ]=bB[aJ]*bD;bG[aJ]=bC[aJ]*bD end;return{bF,bG}end end;local bH=LinkedList('Draw','draw')local bI=LinkedList('Action','action')bv[by]={bH,bI}local self={}local function bJ(z,A,B)if not(z and A and B)then print('Invalid coordinate set for UI element, defaulting to 0, 0, 0.')z,A,B=0,0,0 end;local bK=false;local bL=math.huge;local bM,bN,bO,bP=-bL,bL,-bL,bL;local bQ=1;local bR,bS={},{}local bT={false,false,false,false,false,false,false}local bU={0,0,0,1}local bV={z,A,B}local bW=getRotationManager(bU,bV,'Element')bw.addSubRotation(bW)local bX={false,false,false,bT,1,false,bR,bS,bV,false,bU,false}function bX.addSubElement(bY)bW.addSubRotation(bY.getRotationManger())end;function bX.removeSubElement(bY,bZ)bW.removeSubRotation(bY.getRotationManger())if bZ then bY.remove(bZ)else bw.addSubRotation(bY.getRotationManager())end end;function bX.remove(bZ)if not bK then local b_,bE=bW.getSubRotationData()for aJ=1,bE do bX.removeSubElement(b_[aJ],bZ)end;bH.drawRemove(bX)bI.actionRemove(bX)bW.remove()bK=true else print('Error: Trying to remove an already removed element.')end end;local function c0(z,A)if z>bM then bM=z end;if z<bN then bN=z end;if A>bO then bO=A end;if A<bP then bP=A end end;function bX.addPoint(z,A)local c1=#bR+1;if z and A then c0(z,A)bR[c1],bS[c1]=z,A else if type(z)=='table'and#z>0 then local z,A=z[1],z[2]c0(z,A)bR[c1],bS[c1]=z,A else print('Invalid format for point.')end end end;function bX.addPoints(b8)local c2,c3=bR,bS;if b8 then local c4=#b8;if c4>0 then local c5=type(b8[1])if c5=='number'then local c6=#c2;local c7=1;for aJ=1,c4,2 do local c8=c6+c7;local z,A=b8[aJ],b8[aJ+1]c0(z,A)c2[c8],c3[c8]=z,A;c7=c7+1 end elseif c5=='table'then local c6=#c2;for aJ=1,c4 do local c8=c6+aJ;local c9=b8[aJ]local z,A=c9[1],c9[2]c0(z,A)c2[c8],c3[c8]=z,A end else print('No compatible format found.')end end end end;function bX.getRotationManager()return bW end;bW.assignFunctions(bX)bX.setPositionIsRelative(true)local function ca(cb)local cc=select(2,cb:gsub("%%",""))local c4=#bX[7]*2;local cd=bX[6]local ce=0;if cd then ce=ce+#cd;local bq=cd.sizes;if bq then ce=ce+#bq end end;ce=c4+ce;if ce~=cc then print('Input Parity Failed for '..bX.toString()..'. It has '..cc..' in the draw string while it has '..ce..' values stored for access, with '..c4 ..' being point data. Try set the draw string last.')end end;local function cf()local cg=bX[2]if cg then if not bX[3]then bX[3]=bX[2]end;if not bX[1]then bX[1]=bX[2]end end;bX[12]=cg;bX.showDraw()end;local function ch()bX.showActionable()end;function bX.setHoverDraw(ci)bX[1]=ci;ca(ci)cf()end;function bX.setDefaultDraw(cj)bX[2]=cj;ca(cj)cf()end;function bX.setClickDraw(ck)bX[3]=ck;ca(ck)cf()end;function bX.setClickAction(cl)bT[1]=cl;ch()end;function bX.setHoldAction(cl)bT[2]=cl;ch()end;function bX.setEnterAction(cl)bT[3]=cl;ch()end;function bX.setLeaveAction(cl)bT[4]=cl;ch()end;function bX.setHoverAction(cl)bT[5]=cl;ch()end;function bX.setScale(bD)bX[5]=bD end;function bX.getMaxValues()return bM,bN,bO,bP end;function bX.hideDraw()bH.drawRemove(bX)end;function bX.showDraw()bH.drawAdd(bX)end;function bX.hideActionable()bI.actionRemove(bX)bW.disableNormal()end;function bX.showActionable()bI.actionAdd(bX)bW.enableNormal()end;local cm,cn=0,0;function bX.move(co,cp,cq,cr)if not cq then for aJ=1,#bR do bR[aJ]=bR[aJ]-cm+co;bS[aJ]=bS[aJ]-cn+cp end;bM,bN,bO,bP=bM+co,bN+co,bO+cp,bP+cp else for aJ=1,#cq do local c8=cq[aJ]bR[c8]=bR[c8]-cm+co;bS[c8]=bS[c8]-cn+cp end end;cm=co;cn=cp;if cr then bX.setBounds(bA(bR,bS,bQ))end end;local cs,ct;function bX.moveTo(co,cp,cq,cr,cu)if not cq then print('ERROR: No indices specified!')else if not cs then cs={a1(bR)}ct={a1(bS)}end;for aJ=1,#cq do local c8=cq[aJ]if not cu then bR[c8]=co;bS[c8]=cp else bR[c8]=cs[c8]+co;bS[c8]=ct[c8]+cp end end end;if cr then bX.setBounds(bA(bR,bS,bQ))end end;function bX.setDrawData(cd)bX[6]=cd end;function bX.getDrawData()return bX[6]end;function bX.setSizes(bq)if not bX[6]then bX[6]={['sizes']=bq}else bX[6].sizes=bq end end;function bX.getPoints()return bX[7],bX[8]end;function bX.setPoints(bB,bC)if not bC then bX.addPoints(bB)else bR,bS=bB,bC;bX[7],bX[8]=bB,bC end end;function bX.setBounds(cv)bX[10]=cv end;function bX.setBoundsScale(cw)bQ=cw end;function bX.usePathBuilder(cx)local cb,br,b8=cx.getResult()bX.addPoints(b8)bX.setDrawData(br)bX.setDefaultDraw(cb)end;function bX.toString()local cy='Generic'if bX.setFontSize then cy='Text'elseif bX.setText then cy='Button'elseif bX.getProgress then cy='Progress Bar'end;return'['..cy..'] '..bX[2]end;function bX.build(cz,cA)if bX[2]then if not cz then if cA or cA==nil then bX.setBounds(bA(bR,bS,bQ))else bX.setBounds(false)end end else print("Element Malformed: No default draw.")end end;return bX end;local pcall,require=pcall,require;function self.createText(aM,aN,aO,b6)local bc,cB,cC,cD=table.concat,string.byte,string.upper,string.lower;local cE=bJ(aM,aN,aO)local cF=b5;if b6 then local b7=pcall(function()return require('Fonts/'..b6)end)if b7 then cF=require('Fonts/'..b6)else DUSystem.print('ERROR: Font \''..b6 ..'\' not found! Defaulting')end end;local cG,cH,cI,cJ={},{},0,''local cd={['sizes']={0.08333333333},'white',1}local cK,cL='middle','middle'local cM=1;local cN,cO=0,0;local bM,bN,bO,bP=cE.getMaxValues()cE.setDrawData(cd)local cP=cE.getMaxValues;function cE.getMaxValues()return bM,bN,bO,bP end;function cE.getText()return cJ end;local function cQ(cR)cJ=cR;if not cF.lowercase and cF.uppercase then cR=cC(cR)elseif cF.lowercase and not cF.uppercase then cR=cD(cR)end;local b1={cB(cR,1,#cR)}cG={}local cS=cF;for bl=1,#b1 do local cT=b1[bl]cG[bl]=cS[cT]end end;local function cU()cH={0}local cV=1;local cW,aX=0,0;local cX=cd.sizes[1]/cM;for bl=1,#cG do local cY=cG[bl]if cY[4]==10 then aX=aX+cY[2]*cX;if cK=="middle"then cW=-cW*0.5 elseif cK=="end"then cW=-cW elseif cK=="start"then cW=0 end;cH[cV]=cW;cV=cV+1;cW=0 else cW=cW+cY[2]*cX end end;if cK=="middle"then cW=-cW*0.5 elseif cK=="end"then cW=-cW elseif cK=="start"then cW=0 end;if cL=='middle'then aX=aX+12*cX;cI=-aX*0.5 elseif cL=='top'then aX=aX+12*cX;cI=-aX elseif cL=='bottom'then cI=0 end;cH[cV]=cW end;local function c0(z,A)if z>bM then bM=z end;if z<bN then bN=z end;if A>bO then bO=A end;if A<bP then bP=A end end;local function cZ()local c_=cI+cO;local d0,cV=cH[1]+cN,1;local cX=cd.sizes[1]/cM;local bB,bC,d1={},{},{'<path stroke-width="%gpx" stroke="%s" stroke-opacity="%g" fill="none" d="'}local cc=1;local d2=#cG;bM,bN,bO,bP=cP()for bl=1,d2 do local cY=cG[bl]d1[bl+1]=cY[3]local d3,d4=cY[1],cY[2]for d5=1,#d3,2 do local z,A=d3[d5]*cX+d0,d3[d5+1]*cX+c_;c0(z,A)bB[cc]=z;bC[cc]=A;cc=cc+1 end;d0=d0+d4*cX;if cY[4]==10 then cV=cV+1;d0=cH[cV]+cN;c_=c_-d4*cX end end;d1[d2+2]='"/>'cE.setPoints(bB,bC)cE.setDefaultDraw(bc(d1))end;function cE.setText(cR)cQ(cR)cU()cZ()end;cE.usePathBuilder=nil;function cE.setWeight(bD)local bq=cd.sizes;bq[1]=bq[1]/cM;cM=bD or cM;bq[1]=bq[1]*cM;if#cG>0 then cZ()end end;local d6=cE.move;local d7,d8=0,0;function cE.move(z,A)cN=cN-d7+z;cO=cO-d8+A;d7=z;d8=A;d6(z,A)end;function cE.setFontSize(bE)local bq=cd.sizes;bq[1]=bE*0.08333333333;if#cG>0 then cU()cZ()end end;function cE.setAlignmentX(d9)cK=d9;if#cG>0 then cU()cZ()end end;function cE.setAlignmentY(da)cL=da;if#cG>0 then cU()cZ()end end;function cE.setFontColor(db)cd[1]=db end;function cE.setOpacity(dc)cd[2]=dc end;return cE end;function self.createButton(N,O,P)local cE=bJ(N,O,P)local dd=nil;function cE.setText(cR,de,df,dg)de,df,dg=de or 0,df or-0.001,dg or 0;if not dd then dd=self.createText(N+de,O+df,P+dg)cE.addSubElement(dd)else dd.setPosition(N+de,O+df,P+dg)end;local bM,bN,bO,bP=cE.getMaxValues()local dh=bO-bP;local di=bM-bN;dd.setText(cR)local dj,dk,dl,dm=dd.getMaxValues()local dn=dl-dm;local dp=dj-dk;local dq,dr=dn/dh,dp/di;if dq<dr then local bE=dn/dr;dd.setFontSize(bE*0.85)else local bE=dn/dq;dd.setFontSize(bE*0.75)end;return dd end;function cE.getText()return dd.getText()end;local ds=cE.move;function cE.move(co,cp,cq,cr)ds(co,cp,cq,cr)if dd then dd.move(co,cp)end end;return cE end;function self.createProgressBar(dt,du,dv)local dw=bJ(dt,du,dv)local dx=bJ(0,0,0)dx.setPositionIsRelative(true)dw.addSubElement(dx)local dy={}local dz={}local dA={}local dB=100;function dw.getIntervals()return dA end;function dw.getProgress(a9)local b8=dx.getPoints()if a9 then local b9=dA[1]local dC=b9[1]local dD=(a9-b8[dy[1]])/dC;if dD<0 then return 0.001 elseif dD>100 then return 100 else return dD end end;return dB end;local function dE()local dF=#dy;local dG=#dz;local bB,bC=dx.getPoints()if#bB>0 then if dF==dG and dF>0 then for aJ=1,dF do local dH=dy[aJ]local dI=dz[aJ]local dJ=(bB[dI]-bB[dH])*0.01;local dK=(bC[dI]-bC[dH])*0.01;dA[aJ]={dJ,dK}end end end end;function dw.setStartIndices(cq)dy=cq;dE()end;function dw.setEndIndices(cq)dz=cq;dE()end;local dL=dw.addPoints;function dw.addPoints(b8)dL(b8)dE()end;function dw.setProgress(dD)dB=dD or 0;if dB<0 then dB=0 end;if dB==0 then dx.hide()else if dw.isShown()then dx.show()end end;if dB>100 then dB=100 end;local bB,bC=dx.getPoints()for aJ=1,#dz do local b9=dA[aJ]local dH=dy[aJ]local dI=dz[aJ]bB[dI]=bB[dH]+b9[1]*dB;bC[dI]=bC[dH]+b9[2]*dB end end;local dM=dw.show;local dN=dw.hide;function dw.hide()dN()dx.hide()end;function dw.show()if dB~=0 then dx.show()end;dM()end;dw.setFillPoints=dx.addPoints;dw.getFillDrawData=dx.getDrawData;dw.setFillDrawData=dx.setDrawData;dw.setFillDraw=dx.setDefaultDraw;dw.setFillOffsetPosition=dx.setPosition;function dw.usePathBuilder(cx)local cb,br,b8=cx.getResult()dw.addPoints(b8)dw.setDrawData(br)dw.setDefaultDraw(cb)end;function dw.useFillPathBuilder(cx)local cb,br,b8=cx.getResult()dw.setFillPoints(b8)dw.setFillDrawData(br)dw.setFillDraw(cb)end;return dw end;self.createCustomDraw=bJ;return self end end;function ProcessOrientations(dO,dP,dQ,dR,dS,dT,dU)return function(dV)local dW=dV[11]local dX,dY,dZ,d_=dW[1],dW[2],dW[3],dW[4]local e0=dX..','..dY..','..dZ..','..d_;local e1=dO[e0]if e1 then goto e2 end;do local dP,dQ,dR,dS,dT,dU=dP,dQ,dR,dS,dT,dU;local de,df,dg,e3=dX*dS+d_*dP+dY*dR-dZ*dQ,dY*dS+d_*dQ+dZ*dP-dX*dR,dZ*dS+d_*dR+dX*dQ-dY*dP,d_*dS-dX*dP-dY*dQ-dZ*dR;local e4,e5,e6=df*df,de*dg,df*e3;e1={2*(0.5-e4-dg*dg)*dT,2*(e5-e6)*dT,2*(de*df-dg*e3),2*(df*dg+de*e3),2*(e5+e6)*dU,2*(0.5-de*de-e4)*dU}dO[e0]=e1 end::e2::return e1 end end;function ProcessUIModule(e7,bv,e8,e9,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en)local eo=table.move;for aJ=1,#bv do local ep=bv[aJ]local eq,bE=ep[1].drawGetData()for aJ=1,bE do local dV=eq[aJ]local er=dV[9]local es,et,eu=er[1],er[2],er[3]local ev=ed*es+ee*et+ef*eu+ek;if ev<0 then goto ew end;local ex={}local ey=1;local ez,eA=ea*es+eb*et+ec*eu+ej,eg*es+eh*et+ei*eu+el;local eB,eC,eD,eE,eF,eG=a1(em(dV))local bD,cd,bB,bC=dV[5],dV[6],dV[7],dV[8]local bq=cd.sizes;if bq then for eH=1,#bq do ex[ey]=b4(bq[eH],ev)*en;ey=ey+1 end end;local eI=#cd;eo(cd,1,eI,ey,ex)ey=ey+eI;for eJ=1,#bB do local dt,dv=bB[eJ]*bD,bC[eJ]*bD;local eK=eD*dt+eE*dv+ev;if eK<0 then goto ew end;ex[ey]=(eB*dt+eC*dv+ez)/eK;ex[ey+1]=(eF*dt+eG*dv+eA)/eK;ey=ey+2 end;e7=e7+1;e9[e7]=-ev;e8[-ev]=dV[12]:format(a1(ex))::ew::end end;return e7 end;function ProcessActionEvents(bv,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,em,eV,eW,eX,eY)local eZ,e_,f0={},{},0;for aJ=1,#bv do local ep=bv[aJ]local eq,bE=ep[2].actionGetData()for d5=1,bE do local dV=eq[d5]local er=dV[9]local f1,f2,f3=er[1],er[2],er[3]local f4=eO*f1+eP*f2+eQ*f3+eR;if f4<0 then goto ew end;f0=f0+1;local f5,f6,f7=eV-f1,eW-f2,eX-f3;local f8,f9,fa=dV.getNormal()local x=-(f5*f8+f6*f9+f7*fa)/(eS*f8+eT*f9+eU*fa)local function fb()local dV=dV;local e1,x=em(dV),x;local fc,fd,eK=f5+x*eS,f6+x*eT,f7+x*eU;local fe,ff,fg=fc+f1,fd+f2,eK+f3;if not e1[7]then local dW=dV[11]local dX,dY,dZ,d_=dW[1],dW[2],dW[3],dW[4]local fh,fi,fj=dX*dZ,dY*dY,dY*d_;e1[7],e1[8],e1[9],e1[10],e1[11],e1[12]=2*(0.5-fi-dZ*dZ),2*(dX*dY-dZ*d_),2*(fh+fj),2*(fh-fj),2*(dY*dZ+dX*d_),2*(0.5-dX*dX-fi)end;local fk=dV[10]local fl=false;local a9,ab=e1[7]*fc+e1[8]*fd+e1[9]*eK,e1[10]*fc+e1[11]*fd+e1[12]*eK;if type(fk)=="function"then fl=fk(a9,ab,x)else local fm,fn=fk[1],fk[2]local fo=#fm+1;local fp,fq=fm[1],fn[1]local fr=0;for fs=2,fo do local ft=fs%fo;if ft==0 then fr=1 end;local c8=ft+fr;local fu,fv=fm[c8],fn[c8]local bP,bO;if fq<fv then bP,bO=fq,fv else bP,bO=fv,fq end;if ab>bP and ab<=bO then local bM=fp>fu and fp or fu;if a9<=bM then if fq~=fv then if fp==fu or a9<=(ab-fq)*(fu-fp)/(fv-fq)+fp then fl=not fl end end end end;fp,fq=fu,fv end end;if not fl then return false end;local bT,fw,fx=dV[4],dV[3],dV[1]if not eL then local fy=bT[3]if fy then fy(dV,a9,ab,f1,f2,f3,fe,ff,fg)end;dV[12]=fx elseif dV==eL[1]then if eM then local fz=bT[1]if fz then fz(dV,a9,ab,f1,f2,f3,fe,ff,fg)eM=false end;dV[12]=fw elseif eN then local fA=bT[2]if fA then fA(dV,a9,ab,f1,f2,f3,fe,ff,fg)end;dV[12]=fw else local fB=bT[5]if fB then fB(dV,a9,ab,f1,f2,f3,fe,ff,fg)end;dV[12]=fx end else local fy=bT[3]if fy then fy(dV,a9,ab)end;dV[12]=fx;local fC=eL[2][4]eL[1][12]=eL[1][2]if fC then fC(eL[1],eL[3],eL[4])end end;return{dV,bT,a9,ab}end;e_[f0]=x;eZ[x]=fb::ew::end end;eY(e_)local fD=false;for fE=1,f0 do local b7=eZ[e_[fE]]()if b7 then fD=b7;break end end;if not fD and eL then local fC=eL[2][4]if fC then fC(eL[1],eL[3],eL[4])end end;return fD end;function Projector()local fF,fG,fH,math=DUConstruct,DUPlayer,DUSystem,math;local fI,fJ,fK={''},true,true;local fL,fM,fN=fH.getScreenWidth,fH.getScreenHeight,fH.getArkTime;local fO,fP,fQ,fR=fF.getWorldRight,fF.getWorldForward,fF.getWorldUp,fF.getWorldPosition;local fS=fH.getCameraPos;local fT,fU,fV=fH.getCameraForward,fH.getCameraRight,fH.getCameraUp;local fW,fX,fY=RotMatrixToQuat,DULibrary.systemResolution3,QuaternionMultiply;local function fZ(cN,cO,f_,g0,ai,aj,ak,al)if ai then return fY(cN,cO,f_,g0,ai,aj,ak,al)else return fX(cN,cO,f_,g0)end end;local g1,b4,q=math.tan,math.atan,math.rad;local g2=fH.getCameraHorizontalFov;local g3=0;local g4=LinkedList('Group','')local self={}function self.getSize(bE,g5,g6,g7)local g8=b4(bE,g5)*g3;if g6 then if g8>=g6 then return g6 else if g7 then if g8<g7 then return g7 end end;return g8 end end;return g8 end;function self.setSmooth(g9)fK=g9 end;function self.addObjectGroup(ga)g4.Add(ga)end;function self.removeObjectGroup(ga)g4.Remove(ga)end;function self.getSVG()local fN,b4,eY,gb,bc=fN,b4,table.sort,string.format,table.concat;local gc=fN()frameRender=not frameRender;local eM=false;if clicked then clicked=false;eM=true end;local eN=holding;local gd={}local ge,gf=fL(),fM()local gg=ge/gf;local gh=g1(q(g2()*0.5))local en=ge*0.5/gh;g3=en;local gi=1/gh;local gj=gi*gg;local dT,dU=gi*ge*0.5,-gj*gf*0.5;local gk,gl,gm,gn=fU(),fT(),fV(),fS()local go,gp,gq=gn[1],gn[2],gn[3]local eS,eT,eU,gr=fW(gk,gl,gm)local gs=fZ(gk,gl,gm,gn)local ea,eb,ec=gk[1]*dT,gk[2]*dT,gk[3]*dT;local ed,ee,ef=gl[1],gl[2],gl[3]local eg,eh,ei=gm[1]*dU,gm[2]*dU,gm[3]*dU;local ej,ek,el=-gs[1]*dT,-gs[2],-gs[3]*dU;local gt,gu=g4.GetData()local gv,gw,gx={},{},0;local gy=ProcessPureModule;local gz=ProcessUIModule;local gA=ProcessOrientations;local gB=ProcessActionEvents;if gy==nil then gy=function(e7)return e7 end end;if gz==nil then gz=function(e7)return e7 end;gA=function()end;gB=function()end end;local dO={}local gC=fN()-gc;local gD,gE,gF,gG,gH=0,0,0,0,0;for aJ=1,gu do local ga=gt[aJ]if ga.enabled==false then goto gI end;local gJ=ga.objects;local gK,gL=0,0;local e8,e9,e7={},{},0;local gM=true;for d5=1,#gJ do local gN=gJ[d5]if not gN[1]then goto gO end;gN.checkUpdate()local gP,gQ=gN[7],gN[8]local cN,cO,f_,g0=gP[1],gP[2],gP[3],gP[4]local gR=fZ(gk,gl,gm,gQ)local dP,dQ,dR,dS=fZ(cN,cO,f_,g0,eS,eT,eU,gr)local gS=gA(dO,eS,eT,eU,gr,dT,dU)local gT,gU,gV,gW,gX,gY,gZ,g_,h0=2*dP*dP,2*dP*dQ,2*dP*dR,2*dP*dS,2*dQ*dQ,2*dQ*dR,2*dQ*dS,2*dR*dR,2*dR*dS;local h1,h2,h3,h4=(1-gX-g_)*dT,(gU+h0)*dT,(gV-gZ)*dT,gR[1]*dT+ej;local eO,eP,eQ,eR=gU-h0,1-gT-g_,gY+gW,gR[2]+ek;local h5,h6,h7,h8=(gV+gZ)*dU,(gY-gW)*dU,(1-gT-gX)*dU,gR[3]*dU+el;dO[cN..','..cO..','..f_..','..g0]={h1,h3,eO,eQ,h5,h7}gK=gK+eR;local bv=gN[4]local h9=fN()gN.previousUI=gB(bv,gN.previousUI,eM,eN,eO,eP,eQ,eR,ed,ee,ef,gS,go,gp,gq,eY)local ha=fN()gE=gE+ha-h9;e7=gy(e7,gN[2],gN[3],e8,e9,h1,h2,h3,h4,eO,eP,eQ,eR,h5,h6,h7,h8)e7=gz(e7,bv,e8,e9,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,gS,en)gD=gD+fN()-ha::gO::end;local hb=fN()if ga.isZSorting then eY(e9)end;local hc=fN()gF=gF+hc-hb;local hd={}for he=1,e7 do hd[he]=e8[e9[he]]end;local hf=fN()gG=gG+hf-hc;if e7>0 then local hg=gK/gL;local hh=bc(hd)local hi,hj='',''if fK then hj='</div>'if frameRender then hi='<div class="second" style="visibility: hidden">'else hi='<style>.first{animation: f1 0.008s infinite linear;} .second{animation: f2 0.008s infinite linear;} @keyframes f1 {from {visibility: hidden;} to {visibility: hidden;}} @keyframes f2 {from {visibility: visible;} to { visibility: visible;}}</style><div class="first">'end end;local hk=('<style>svg{background:none;width:%gpx;height:%gpx;position:absolute;top:0px;left:0px;}'):format(ge,gf)local hl=('<svg viewbox="-%g -%g %g %g"'):format(ge*0.5,gf*0.5,ge,gf)gx=gx+1;gw[gx]=hg;if ga.glow then local bE;if ga.scale then bE=b4(ga.gRad,hg)*en else bE=ga.gRad end;gv[hg]=bc({hi,'<div class="',ga.class,'">',hk,ga.style,'.blur { filter: blur(',bE,'px) brightness(60%) saturate(3);',ga.gStyle,'}</style>',hl,' class="blur">',hh,'</svg>',hl,'>',hh,'</svg></div>',hj})else gv[hg]=bc({hi,'<div class="',ga.class,'">',hk,ga.style,'}</style>',hl,'>',hh,'</svg></div>',hj})end end;gH=gH+fN()-hf::gI::end;eY(gw)for aJ=1,gx do gd[aJ]=gv[gw[aJ]]end;if frameRender then fI[2]=bc(gd)return bc(fI),gC,gD,gE,gF,gG,gH else if fK then fI[1]=bc(gd)else fI[1]=''end;return nil end end;return self end;function LoadPureModule(self,hm,hn)function self.getMultiPointBuilder(by)local bf={}local ho=LinkedList('','')hn[#hn+1]=ho;function bf.addMultiPointSVG()local hp=false;local bR,bS,hq={},{},{}local hr={bR,bS,hq,false,false}local self={}local c1=1;function self.show()if not hp then hp=true;ho.Add(hr)end end;function self.hide()if hp then hp=false;ho.Remove(hr)end end;function self.addPoint(c9)bR[c1]=c9[1]bS[c1]=c9[2]hq[c1]=c9[3]c1=c1+1;return self end;function self.setPoints(hs)for aJ=1,#hs do local c9=hs[aJ]bR[aJ]=c9[1]bS[aJ]=c9[2]hq[aJ]=c9[3]end;c1=#hs+1;return self end;function self.setDrawFunction(ht)hr[4]=ht;return self end;function self.setData(hu)hr[5]=hu;return self end;function self.build()if c1>1 then ho.Add(hr)hp=true else print("WARNING! Malformed multi-point build operation, no points specified. Ignoring.")end end;return self end;return bf end;function self.getSinglePointBuilder(by)local bf={}local b8=LinkedList('','')hm[#hm+1]=b8;function bf.addSinglePointSVG()local hp=false;local hv={false,false,false,false,false}function self.setPosition(fc,fd,eK)if type(fc)=='table'then hv[1],hv[2],hv[3]=fc[1],fc[2],fc[3]else hv[1],hv[2],hv[3]=fc,fd,eK end;return self end;function self.setDrawFunction(ht)hv[4]=ht;return self end;function self.setData(hu)hv[5]=hu;return self end;function self.show()if~hp then hp=true end end;function self.hide()if hp then b8.Remove(hv)hp=false end end;function self.build()b8.Add(hv)hp=true;return self end;return self end;return bf end end;function ProcessPureModule(e7,hm,hn,e8,e9,h1,h2,h3,h4,eO,eP,eQ,eR,h5,h6,h7,h8)for hw=1,#hm do local hx=hm[hw]local hy,hz=hx.GetData()for hA=1,hz do local hm=hy[hA]local z,A,B=hm[1],hm[2],hm[3]local eK=eO*z+eP*A+eQ*B+eR;if eK<0 then goto hB end;e7=e7+1;e9[e7]=-eK;e8[-eK]=hm[4]((h1*z+h2*A+h3*B+h4)/eK,(h5*z+h6*A+h7*B+h8)/eK,eK,hm[5])::hB::end end;for hw=1,#hn do local hx=hn[hw]local hC,hD=hx.GetData()for hE=1,hD do local hn=hC[hE]local hF,hG,hH={},{},{}local bB,bC,hI=hn[1],hn[2],hn[3]local bE=#bB;local hJ=0;for c1=1,bE do local z,A,B=bB[c1],bC[c1],hI[c1]local eK=eO*z+eP*A+eQ*B+eR;if eK<0 then goto hB end;hF[c1],hG[c1]=(h1*z+h2*A+h3*B+h4)/eK,(h5*z+h6*A+h7*B+h8)/eK;hJ=hJ+eK end;local hK=-hJ/bE;e7=e7+1;e9[e7]=hK;e8[hK]=hn[4](hF,hG,hK,hn[5])::hB::end end;return e7 end;positionTypes={globalP=1,localP=2}orientationTypes={globalO=1,localO=2}local print=DUSystem.print;function ObjectGroup(gJ,hL,hM)local gJ=gJ or{}local self={style='',gStyle='',class='default',objects=gJ,transX=hL,transY=hM,enabled=true,glow=false,gRad=10,scale=false,isZSorting=true}function self.addObject(hN,hO)local hO=hO or#gJ+1;gJ[hO]=hN;return hO end;function self.removeObject(hO)gJ[hO]={}end;function self.hide()self.enabled=false end;function self.show()self.enabled=true end;function self.isEnabled()return self.enabled end;function self.setZSort(hP)self.isZSorting=hP end;function self.setClass(hQ)self.class=hQ end;function self.setStyle(hR)self.style=hR end;function self.setGlowStyle(hS)self.gStyle=hS end;function self.setGlow(hT,hU,bD)self.glow=hT;self.gRad=hU or self.gRad;self.scale=bD or false end;return self end;function Object(hV,hW)local hn,hm,bv={},{},{}local hV=hV;local hW=hW;local hX={0,0,0,1}local hY={0,0,0}local hZ=getRotationManager(hX,hY,'Object Rotation Handler')local h_={}local self={true,hn,hm,bv,hV,hW,hX,hY}hZ.assignFunctions(self)function self.hide()self[1]=false end;function self.show()self[1]=true end;local i0=LoadUIModule;if i0==nil then print('No UI Module installed.')i0=function()end end;local i1=LoadPureModule;if i1==nil then print('No Pure Module installed.')i1=function()end end;i1(self,hn,hm)i0(self,bv,hZ)function self.getRotationManager()return hZ end;function self.addSubObject(hN)hN.setPositionIsRelative(true)return hZ.addSubRotation(hN.getRotationManager())end;function self.removeSubObject(hO)hZ.removeSubRotation(hO)end;return self end;function ObjectBuilderLinear()local self={}function self.setPositionType(hV)local self={}local hV=hV;function self.setOrientationType(hW)local self={}local hW=hW;function self.build()return Object(hV,hW)end;return self end;return self end;return self end

        end)

        package.preload['Sky:atlas.lua']=(function()

        return{[0]={[1]={id=1,name={"Madis","Madis","Madis"},type={"Planet","Planète","Planet"},biosphere={"Barren","Désert","Karg"},classification={"Hyperthermoplanet","Hyperthermoplanète","Hyperthermoplanet"},habitability={"Low","Faible","Niedrig"},description={[[Madis is a barren wasteland of a rock; it sits closest to the sun and temperatures reach extreme highs during the day. The arkship geological survey reports high plateaus intermittently separated by small ravines.]],[[Madis est un rocher stérile. En tant que planète la plus proche du soleil, sa température est extrêmement élevée pendant la journée. L'étude géologique du Vaisseau-Arche signale de longues vallées rocheuses séparées ponctuellement par de petits ravins.]],[[Madis ist eine karge Felsenwüste und hat den engsten Orbit um die Sonne. Tagsüber herrschen extrem hohe Temperaturen. Die geologische Untersuchung des Archenschiffs berichtet von ausgedehnten felsigen Tälern, die ab und zu von kleinen Schluchten unterbrochen werden.]]},iconPath="gui/screen_unit/img/planets/madis.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=true,systemId=0,positionInSystem=1,satellites={10,11,12},center={17465536.00,22665536.00,-34464.00},gravity=3.5325,radius=44300.00,atmosphereThickness=12000.00,atmosphereRadius=56500.00,surfaceArea=24661376667,surfaceAverageAltitude=720.30,surfaceMaxAltitude=1261.97,surfaceMinAltitude=451.43,GM=6932495925.00,maxStaticAltitude=1460.00,ores={4234772167,262147665,3724036288,299255727,2029139010,4041459743},territories=30722},[10]={id=10,name={"Madis Moon 1","Madis Lune 1","Madis Mond 1"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/madis_moon_1.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=1,positionInSystem=1,satellites=nil,center={17448118.86,22966848.03,143079.98},gravity=0.7850,radius=10000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=78500000.00,surfaceArea=1256637056,surfaceAverageAltitude=191.685,surfaceMaxAltitude=458.48,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={299255727,4234772167,343766315,1050500112},territories=1472},[11]={id=11,name={"Madis Moon 2","Madis Lune 2","Madis Mond 2"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/madis_moon_2.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=1,positionInSystem=2,satellites=nil,center={17194626.00,22243633.88,-214962.81},gravity=0.9420,radius=12000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=135648000.00,surfaceArea=1809557376,surfaceAverageAltitude=-1825.951,surfaceMaxAltitude=651.737,surfaceMinAltitude=-4018.44,maxStaticAltitude=2500.00,ores={4234772167,3724036288,2289641763,3837858336},territories=1922},[12]={id=12,name={"Madis Moon 3","Madis Lune 3","Madis Mond 3"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/madis_moon_3.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=1,positionInSystem=3,satellites=nil,center={17520617.44,22184726.90,-309986.22},gravity=1.1775,radius=15000.00,atmosphereThickness=0,atmosphereRadius=0,GM=264937500.00,surfaceArea=2827433472,surfaceAverageAltitude=433.322,surfaceMaxAltitude=1112.76,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={3724036288,262147665,2029139010,1065079614},territories=3632},[2]={id=2,name={"Alioth","Alioth","Alioth"},type={"Planet","Planète","Planet"},biosphere={"Forest","Forêt","Wald"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"High","Élevée","Hoch"},description={[[Alioth is the planet selected by the arkship for landfall; it is a typical goldilocks planet where humanity may rebuild in the coming decades. The arkship geological survey reports mountainous regions alongside deep seas and lush forests. This is where it all starts.]],[[Alioth est la planète sélectionnée par le Vaisseau-Arche pour l'atterrissage. C'est une planète Boucles d'or classique où l'humanité pourra se reconstruire dans les décennies à venir. L'étude géologique du Vaisseau-Arche signale des zones montagneuses ainsi que des océans profonds et des forêts denses. C'est ici que tout commence.]],[[Alioth ist der Planet, den das Archenschiff für die Landung ausgewählt hat. Wie die Erde umkreist er seinen Stern in der habitablen Zone und ist der perfekte Ort, um in den kommenden Jahrzehnten den Wiederaufbau der Menschheit zu beginnen. Die geologische Untersuchung des Archenschiffs berichtet von bergigen Regionen neben tiefen Meeren und üppigen Wäldern. Hier fängt alles an.]]},iconPath="gui/screen_unit/img/planets/alioth.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=true,systemId=0,positionInSystem=2,satellites={21,22,26,27},center={-8.00,-8.00,-126303.00},gravity=9.8910,radius=126067.90,atmosphereThickness=6400.00,atmosphereRadius=132460.00,surfaceArea=199718780928,surfaceAverageAltitude=94.556,surfaceMaxAltitude=1091.73,surfaceMinAltitude=-548.89,GM=157198800627.69,maxStaticAltitude=1300.00,ores={299255727,3724036288,262147665,4234772167,3086347393,1050500112},territories=259472},[21]={id=21,name={"Alioth Moon 1","Alioth Lune 1","Alioth Mond 1"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/alioth_moon_1.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=2,positionInSystem=2,satellites=nil,center={457932.99,-1509009.24,115525.00},gravity=2.3550,radius=30000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=2119500000.00,surfaceArea=11309733888,surfaceAverageAltitude=43.665,surfaceMaxAltitude=305.16,surfaceMinAltitude=-176.382,maxStaticAltitude=2500.00,ores={299255727,3724036288,343766315,4041459743},territories=14522},[22]={id=22,name={"Alioth Moon 4","Alioth Lune 4","Alioth Mond 4"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/alioth_moon_4.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=2,positionInSystem=3,satellites=nil,center={-1692694.85,729681.81,-411465.62},gravity=2.3809,radius=30330.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=2190215699.55,surfaceArea=11559916544,surfaceAverageAltitude=-6.453,surfaceMaxAltitude=-42.324,surfaceMinAltitude=-83.175,maxStaticAltitude=2500.00,ores={262147665,4234772167,2029139010,1065079614},territories=14522},[26]={id=26,name={"Sanctuary","Sanctuary","Sanctuary"},type={"Moon","Lune","Mond"},biosphere={"Forest","Forêt","Wald"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"High","Elevée","Hoch"},description=nil,iconPath="gui/screen_unit/img/planets/sanctuary_moon.png",hasAtmosphere=true,isSanctuary=true,isInSafeZone=true,systemId=2,positionInSystem=1,satellites=nil,center={-1404834.53,562655.32,-285074.95},gravity=9.8100,radius=83400.00,atmosphereThickness=8000.00,atmosphereRadius=91350.00,GM=68234043600.00,surfaceArea=87406149632,surfaceAverageAltitude=97.905,surfaceMaxAltitude=512.067,surfaceMinAltitude=-109.20,maxStaticAltitude=2500.00,ores={3724036288,299255727,262147665,4234772167},territories=111632},[27]={id=27,name={"Haven","Haven","Haven"},type={"Moon","Lune","Mond"},biosphere={"Forest","Forêt","Wald"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"High","Elevée","Hoch"},description=nil,iconPath="gui/screen_unit/img/planets/haven_moon.png",hasAtmosphere=true,isSanctuary=true,isInSafeZone=true,systemId=2,positionInSystem=4,satellites=nil,center={-1205152.02,1124841.79,-2638867.62},gravity=9.8100,radius=83443.02,atmosphereThickness=8000.00,atmosphereRadius=91300.00,GM=68304461353.44,surfaceArea=87496299100,surfaceAverageAltitude=132.365,surfaceMaxAltitude=788.779,surfaceMinAltitude=-22.402,maxStaticAltitude=2500.00,ores={299255727,3724036288,4234772167,262147665},territories=111632},[3]={id=3,name={"Thades","Thades","Thades"},type={"Planet","Planète","Planet"},biosphere={"Desert","Désert","Wüste"},classification={"Thermoplanet","Thermoplanète","Thermoplanet"},habitability={"Low","Faible","Niedrig"},description={[[Once a mainly aquatic world, Thades suffered a cataclysmic disaster, and its water was evaporated into space. Now Thades is a dried-out planet scarred by an abyssal trench, the only place left able to sustain life. Ejected rocks gathered into an asteroid belt, where the explorers can settle.]],[[Thades est une planète désertique brûlée. Il est possible qu'elle ait été pleine de vie à une époque, mais il ne reste plus que des cendres et de la poussière. L'étude géologique du Vaisseau-Arche signale des montagnes rocheuses coupées par un immense ravin non naturel. Il est arrivé quelque chose à cette planète.]],[[Thades ist ein verbrannter Wüstenplanet. Vielleicht war er einst voller Leben, aber jetzt sind nur noch Asche und Staub übrig. Die geologische Untersuchung des Archenschiffs berichtet von einem felsigen, gebirgigen Planeten, der von einer riesigen, unnatürlichen Schlucht durchschnitten wird. Irgendetwas muss diesem Planeten zugestoßen sein.]]},iconPath="gui/screen_unit/img/planets/thades.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=true,systemId=0,positionInSystem=3,satellites={30,31,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433},center={29165536.00,10865536.00,65536.00},gravity=4.8670,radius=49000.00,atmosphereThickness=40000.00,atmosphereRadius=89000.00,GM=11685667000.00,surfaceArea=30171856896,surfaceAverageAltitude=12536.892,surfaceMaxAltitude=13809.09,surfaceMinAltitude=-778.1,maxStaticAltitude=14709.00,ores={3724036288,299255727,262147665,4234772167,2289641763,1065079614},territories=38882},[30]={id=30,name={"Thades Moon 1","Thades Lune 1","Thades Mond 1"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_moon_1.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=35,satellites=nil,center={29214403.49,10907080.70,433861.28},gravity=1.0990,radius=14000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=215404000.00,surfaceArea=2463008768,surfaceAverageAltitude=167.399,surfaceMaxAltitude=423.661,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={299255727,262147665,2289641763,4041459743},territories=3002},[31]={id=31,name={"Thades Moon 2","Thades Lune 2","Thades Mond 2"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_moon_2.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=36,satellites=nil,center={29404194.34,10432766.60,19553.82},gravity=1.1775,radius=15000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=264937500.00,surfaceArea=2827433472,surfaceAverageAltitude=184.010,surfaceMaxAltitude=477.009,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={4234772167,3724036288,3086347393,1065079614},territories=3632},[400]={id=400,name={"Thades Asteroid 00","Thades Asteroid 00","Thades Asteroid 00"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_00.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=1,satellites=nil,center={29299301.32,10711862.68,2851.97},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=54.424,surfaceMaxAltitude=921.193,surfaceMinAltitude=-837.498,maxStaticAltitude=2500.00,ores={299255727,4234772167},territories=272},[401]={id=401,name={"Thades Asteroid 01","Thades Asteroid 01","Thades Asteroid 01"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_01.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=2,satellites=nil,center={29282550.05,10753803.20,117513.67},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-685.459,surfaceMaxAltitude=836.309,surfaceMinAltitude=-1925.87,maxStaticAltitude=2500.00,ores={299255727,3724036288},territories=272},[402]={id=402,name={"Thades Asteroid 02","Thades Asteroid 02","Thades Asteroid 02"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_02.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=3,satellites=nil,center={29229075.50,10805882.53,256161.21},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-956.392,surfaceMaxAltitude=168.572,surfaceMinAltitude=-2060.55,maxStaticAltitude=2500.00,ores={262147665,299255727},territories=272},[403]={id=403,name={"Thades Asteroid 03","Thades Asteroid 03","Thades Asteroid 03"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_03.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=4,satellites=nil,center={29267536.95,10749726.84,-97063.90},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-597.324,surfaceMaxAltitude=1395.83,surfaceMinAltitude=-2500.29,maxStaticAltitude=2500.00,ores={3724036288,262147665},territories=272},[404]={id=404,name={"Thades Asteroid 04","Thades Asteroid 04","Thades Asteroid 04"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_04.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=5,satellites=nil,center={29296929.92,10741579.35,-34201.26},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-544.506,surfaceMaxAltitude=1601.43,surfaceMinAltitude=-1658.22,maxStaticAltitude=2500.00,ores={4234772167,262147665},territories=272},[405]={id=405,name={"Thades Asteroid 05","Thades Asteroid 05","Thades Asteroid 05"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_05.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=6,satellites=nil,center={29230291.68,10801230.42,-117467.33},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-476.32,surfaceMaxAltitude=1093.61,surfaceMinAltitude=-1836.26,maxStaticAltitude=2500.00,ores={3724036288,4234772167},territories=272},[406]={id=406,name={"Thades Asteroid 06","Thades Asteroid 06","Thades Asteroid 06"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_06.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=7,satellites=nil,center={29294439.12,10755446.81,185994.55},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-704.756,surfaceMaxAltitude=1051.98,surfaceMinAltitude=-2124.6,maxStaticAltitude=2500.00,ores={4234772167,299255727,3724036288},territories=272},[407]={id=407,name={"Thades Asteroid 07","Thades Asteroid 07","Thades Asteroid 07"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_07.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=8,satellites=nil,center={29091470.31,10943497.38,-37252.04},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=161.911,surfaceMaxAltitude=1505.11,surfaceMinAltitude=-1473.85,maxStaticAltitude=2500.00,ores={4234772167,299255727},territories=272},[408]={id=408,name={"Thades Asteroid 08","Thades Asteroid 08","Thades Asteroid 08"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_08.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=9,satellites=nil,center={29081043.07,10962202.27,-75767.64},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-936.01,surfaceMaxAltitude=688.978,surfaceMinAltitude=-2498.5,maxStaticAltitude=2500.00,ores={3724036288,299255727},territories=272},[409]={id=409,name={"Thades Asteroid 09","Thades Asteroid 09","Thades Asteroid 09"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_09.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=10,satellites=nil,center={29086073.94,10961324.33,-37713.45},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-261.982,surfaceMaxAltitude=1811.89,surfaceMinAltitude=-1705.35,maxStaticAltitude=2500.00,ores={299255727,262147665},territories=272},[410]={id=410,name={"Thades Asteroid 10","Thades Asteroid 10","Thades Asteroid 10"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_10.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=11,satellites=nil,center={29057495.95,11010112.20,-12840.27},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-923.761,surfaceMaxAltitude=465.953,surfaceMinAltitude=-1705.78,maxStaticAltitude=2500.00,ores={3724036288,262147665},territories=272},[411]={id=411,name={"Thades Asteroid 11","Thades Asteroid 11","Thades Asteroid 11"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_11.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=12,satellites=nil,center={29038528.76,11009018.02,34480.51},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-897.714,surfaceMaxAltitude=317.114,surfaceMinAltitude=-1993.37,maxStaticAltitude=2500.00,ores={4234772167,262147665},territories=272},[412]={id=412,name={"Thades Asteroid 12","Thades Asteroid 12","Thades Asteroid 12"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_12.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=13,satellites=nil,center={29063783.12,11010103.53,-19811.13},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-1231.337,surfaceMaxAltitude=332.356,surfaceMinAltitude=-2017.24,maxStaticAltitude=2500.00,ores={3724036288,4234772167},territories=272},[413]={id=413,name={"Thades Asteroid 13","Thades Asteroid 13","Thades Asteroid 13"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_13.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=14,satellites=nil,center={29308876.96,10722122.97,63979.64},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-462.878,surfaceMaxAltitude=1558.25,surfaceMinAltitude=-1455.30,maxStaticAltitude=2500.00,ores={3724036288,299255727,262147665,4234772167},territories=272},[414]={id=414,name={"Thades Asteroid 14","Thades Asteroid 14","Thades Asteroid 14"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_14.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=15,satellites=nil,center={29039962.95,11009804.08,20310.07},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-941.413,surfaceMaxAltitude=667.795,surfaceMinAltitude=-2063.120,maxStaticAltitude=2500.00,ores={299255727,4234772167},territories=272},[415]={id=415,name={"Thades Asteroid 15","Thades Asteroid 15","Thades Asteroid 15"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_15.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=16,satellites=nil,center={29028034.74,11006962.68,90614.67},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-102.078,surfaceMaxAltitude=1711.750,surfaceMinAltitude=-1248.490,maxStaticAltitude=2500.00,ores={299255727,3724036288},territories=272},[416]={id=416,name={"Thades Asteroid 16","Thades Asteroid 16","Thades Asteroid 16"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_16.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=17,satellites=nil,center={29049290.89,11009683.55,130463.58},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-1388.131,surfaceMaxAltitude=-34.923,surfaceMinAltitude=-2501.310,maxStaticAltitude=2500.00,ores={262147665,299255727},territories=272},[417]={id=417,name={"Thades Asteroid 17","Thades Asteroid 17","Thades Asteroid 17"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_17.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=18,satellites=nil,center={29034838.01,11011307.10,100551.51},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-171.626,surfaceMaxAltitude=1396.390,surfaceMinAltitude=-1270.20,maxStaticAltitude=2500.00,ores={262147665,3724036288},territories=272},[418]={id=418,name={"Thades Asteroid 18","Thades Asteroid 18","Thades Asteroid 18"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_18.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=19,satellites=nil,center={29071108.08,10957206.76,212593.35},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-175.909,surfaceMaxAltitude=1242.240,surfaceMinAltitude=-1081.320,maxStaticAltitude=2500.00,ores={262147665,4234772167},territories=272},[419]={id=419,name={"Thades Asteroid 19","Thades Asteroid 19","Thades Asteroid 19"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_19.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=20,satellites=nil,center={29167994.87,10859282.88,268014.12},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-1102.891,surfaceMaxAltitude=598.225,surfaceMinAltitude=-2306.690,maxStaticAltitude=2500.00,ores={3724036288,4234772167},territories=272},[420]={id=420,name={"Thades Asteroid 20","Thades Asteroid 20","Thades Asteroid 20"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_20.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=21,satellites=nil,center={29213864.06,10803741.30,-121255.16},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-603.555,surfaceMaxAltitude=1582.350,surfaceMinAltitude=-2158.800,maxStaticAltitude=2500.00,ores={299255727,4234772167,262147665},territories=272},[421]={id=421,name={"Thades Asteroid 21","Thades Asteroid 21","Thades Asteroid 21"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_21.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=22,satellites=nil,center={29239443.63,10792184.95,211277.78},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-899.330,surfaceMaxAltitude=1089.520,surfaceMinAltitude=-2425.300,maxStaticAltitude=2500.00,ores={4234772167,299255727},territories=272},[422]={id=422,name={"Thades Asteroid 22","Thades Asteroid 22","Thades Asteroid 22"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_22.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=23,satellites=nil,center={29144431.74,10891773.13,265131.10},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-1159.166,surfaceMaxAltitude=966.797,surfaceMinAltitude=-2501.170,maxStaticAltitude=2500.00,ores={3724036288,299255727},territories=272},[423]={id=423,name={"Thades Asteroid 23","Thades Asteroid 23","Thades Asteroid 23"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_23.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=24,satellites=nil,center={29221331.78,10813011.47,-112261.08},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=59.944,surfaceMaxAltitude=2240.940,surfaceMinAltitude=-1196.110,maxStaticAltitude=2500.00,ores={262147665,299255727},territories=272},[424]={id=424,name={"Thades Asteroid 24","Thades Asteroid 24","Thades Asteroid 24"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_24.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=25,satellites=nil,center={29261255.06,10778311.95,-68014.35},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-634.507,surfaceMaxAltitude=1521.540,surfaceMinAltitude=-2498.500,maxStaticAltitude=2500.00,ores={3724036288,262147665},territories=272},[425]={id=425,name={"Thades Asteroid 25","Thades Asteroid 25","Thades Asteroid 25"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_25.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=26,satellites=nil,center={29199560.98,10832137.62,-97473.02},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-184.796,surfaceMaxAltitude=936.977,surfaceMinAltitude=-1009.590,maxStaticAltitude=2500.00,ores={4234772167,262147665},territories=272},[426]={id=426,name={"Thades Asteroid 26","Thades Asteroid 26","Thades Asteroid 26"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_26.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=27,satellites=nil,center={29055988.74,10976710.89,153234.70},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-599.773,surfaceMaxAltitude=1421.290,surfaceMinAltitude=-1916.820,maxStaticAltitude=2500.00,ores={4234772167,3724036288},territories=272},[427]={id=427,name={"Thades Asteroid 27","Thades Asteroid 27","Thades Asteroid 27"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_27.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=28,satellites=nil,center={29052925.00,10978093.03,202894.97},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=50.800,surfaceMaxAltitude=1210.470,surfaceMinAltitude=-657.505,maxStaticAltitude=2500.00,ores={3724036288,262147665,299255727},territories=272},[428]={id=428,name={"Thades Asteroid 28","Thades Asteroid 28","Thades Asteroid 28"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_28.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=29,satellites=nil,center={29114441.38,10927735.88,231833.92},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-1322.002,surfaceMaxAltitude=367.258,surfaceMinAltitude=-2342.960,maxStaticAltitude=2500.00,ores={299255727,4234772167},territories=272},[429]={id=429,name={"Thades Asteroid 29","Thades Asteroid 29","Thades Asteroid 29"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_29.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=30,satellites=nil,center={29093988.60,10935957.84,206596.14},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-171.916,surfaceMaxAltitude=1432.140,surfaceMinAltitude=-1545.310,maxStaticAltitude=2500.00,ores={299255727,3724036288},territories=272},[430]={id=430,name={"Thades Asteroid 30","Thades Asteroid 30","Thades Asteroid 30"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_30.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=31,satellites=nil,center={29308670.06,10719768.95,122162.49},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-688.637,surfaceMaxAltitude=1538.470,surfaceMinAltitude=-2500.330,maxStaticAltitude=2500.00,ores={262147665,299255727},territories=272},[431]={id=431,name={"Thades Asteroid 31","Thades Asteroid 31","Thades Asteroid 31"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_31.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=32,satellites=nil,center={29315394.75,10724428.22,30918.91},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-333.031,surfaceMaxAltitude=1683.290,surfaceMinAltitude=-1670.060,maxStaticAltitude=2500.00,ores={262147665,3724036288},territories=272},[432]={id=432,name={"Thades Asteroid 32","Thades Asteroid 32","Thades Asteroid 32"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_32.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=33,satellites=nil,center={29039991.14,11019630.48,64846.61},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-454.695,surfaceMaxAltitude=1545.980,surfaceMinAltitude=-2146.780,maxStaticAltitude=2500.00,ores={4234772167,262147665},territories=272},[433]={id=433,name={"Thades Asteroid 33","Thades Asteroid 33","Thades Asteroid 33"},type={"Asteroid","Astéroïde","Asteroid"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/thades_asteroid_33.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=3,positionInSystem=34,satellites=nil,center={29278192.73,10762037.83,209654.75},gravity=0.9420,radius=5215.19,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=25620700.57,surfaceArea=341757843.00,surfaceAverageAltitude=-202.747,surfaceMaxAltitude=1247.770,surfaceMinAltitude=-1595.650,maxStaticAltitude=2500.00,ores={4234772167,262147665,3724036288},territories=272},[4]={id=4,name={"Talemai","Talemai","Talemai"},type={"Planet","Planète","Planet"},biosphere={"Barren","Désert","Karg"},classification={"Psychroplanet","Psychroplanète","Psychroplanet"},habitability={"Average","Moyenne","Mittlere "},description={[[Talemai is a planet in the final stages of an Ice Age. It seems likely that the planet was thrown into tumult by a cataclysmic volcanic event which resulted in its current state. The arkship geological survey reports large mountainous regions across the entire planet.]],[[Talemai est une planète en fin de période glaciaire. Il est probable qu'un événement volcanique cataclysmique soit responsable de son état actuel. L'étude géologique du Vaisseau-Arche signale de grandes zones montagneuses sur toute la planète.]],[[Talemai ist ein Planet, der sich im Endstadium einer Eiszeit befindet. Es wird vermutet, dass der Planet durch ein kataklysmisches vulkanisches Ereignis in seinen heutigen Zustand versetzt wurde. Die geologische Untersuchung des Archenschiffs berichtet von weiten Gebirgsregionen auf dem gesamten Planeten.]]},iconPath="gui/screen_unit/img/planets/talemai.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=false,systemId=0,positionInSystem=4,satellites={40,41,42},center={-13234464.00,55765536.00,465536.00},gravity=4.5530,radius=57500.00,atmosphereThickness=16000.00,atmosphereRadius=72500.00,GM=15053356250.00,surfaceArea=41547562844,surfaceAverageAltitude=631.26,surfaceMaxAltitude=2755.23,surfaceMinAltitude=-1778.1,maxStaticAltitude=14709.00,ores={299255727,4234772167,3724036288,343766315,1065079614,271971371},territories=52922},[40]={id=40,name={"Talemai Moon 2","Talemai Lune 2","Talemai Mond 2"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/talemai_moon_2.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=false,systemId=4,positionInSystem=2,satellites=nil,center={-13503090.34,55594324.49,769836.53},gravity=0.9420,radius=12000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=135648000.00,surfaceArea=1809557368.00,surfaceAverageAltitude=178.06,surfaceMaxAltitude=497.87,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={262147665,3724036288,4234772167,3086347393,4041459743,1467310917},territories=1922},[41]={id=41,name={"Talemai Moon 3","Talemai Lune 3","Talemai Mond 3"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/talemai_moon_3.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=false,systemId=4,positionInSystem=3,satellites=nil,center={-12800514.62,55700257.46,325207.84},gravity=0.8635,radius=11000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=104423000.00,surfaceArea=1520530844.00,surfaceAverageAltitude=313.12,surfaceMaxAltitude=582.08,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={262147665,299255727,4234772167,2289641763,1050500112,1866812055},territories=1922},[42]={id=42,name={"Talemai Moon 1","Talemai Lune 1","Talemai Mond 1"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/talemai_moon_1.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=false,systemId=4,positionInSystem=1,satellites=nil,center={-13058408.39,55781856.76,740177.66},gravity=1.1775,radius=15000.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=265050000.00,surfaceArea=282743388.00,surfaceAverageAltitude=423.70,surfaceMaxAltitude=1077.57,surfaceMinAltitude=0,maxStaticAltitude=2500.00,ores={299255727,3724036288,262147665,2029139010,1065079614,3546085401},territories=3632},[6]={id=6,name={"Sicari","Sicari","Sicari"},type={"Planet","Planète","Planet"},biosphere={"Desert","Désert","Wüste"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"Average","Moyenne","Durchschnitt"},description={[[Eons ago, Sicari and its moon shared a common origin with Sinnen as part of a single, massive planet. Cosmogeological studies reveal that an ancient cosmic cataclysm tore apart the primordial world, which eventually reformed into the three distinct celestial bodies we observe today. This accounts for their peculiarly close proximity to one another. Sicari, an arid world, is punctuated by a scattering of verdant oases. The Arkship's Geological Readings reveal a landscape dominated by towering, desolate mountains that cradle extensive tracts of lush, tropical wetlands.]],[[A l'origine Sicari Sinnen et sa lune n'étaient qu'une seule grosse planète. Dans un lointain passé, un cataclysme cosmique l'a éclatée et elle s'est recomposée en 3 corps, ce qui explique l'inhabituelle proximité de Sicari avec Sinnen. Sicari est une planète désertique parsemée d'oasis luxuriants.Le système de surveillance géologique de l'Arkship rapporte de grandes étendues arides et montagneuses abritant de larges zones humides et tropicales.]],[[Ursprünglich waren Sicari Sinnen und sein Mond nur ein großer Planet. In der fernen Vergangenheit zerschmetterte sie eine kosmische Katastrophe und sie setzte sich wieder in drei Körper zusammen, was Sicaris ungewöhnliche Nähe zu Sinnen erklärt. Sicari ist ein Wüstenplanet, der mit üppigen Oasen übersät ist. Das geologische Überwachungssystem der Arche berichtet von großen, öden, bergigen Landstrichen, die große tropische Feuchtgebiete beherbergen.]]},iconPath="gui/screen_unit/img/planets/sicari.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=false,systemId=0,positionInSystem=6,satellites=nil,center={52765536.00,27165536.00,52065536.00},gravity=4.0035,radius=51100.00,atmosphereThickness=9600.00,atmosphereRadius=60700.00,GM=10189665694.91,surfaceArea=32813432612.00,surfaceAverageAltitude=162.7630127,surfaceMaxAltitude=1226.54,surfaceMinAltitude=-301.41,ores={3724036288,4234772167,4041459743,1866812055,2162350405},territories=41072},[7]={id=7,name={"Sinnen","Sinnen","Sinnen"},type={"Planet","Planète","Planet"},biosphere={"Desert","Désert","Wüste"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"Average","Moyenne","Durchschnitt"},description={[[Sinnen, once part of a larger celestial entity with Sicari and its moon, now stands as a separate world characterized by expansive plains intersected by deep ravines. Sparse vegetation sustains a minimal ecosystem of hardy lifeforms. Yet, amidst this desolation, the enigmatic crystal forests on Sinnen defy explanation. Despite extensive research, scientists have yet to uncover any viable theories for the origin of these mysterious formations.]],[[A l'origine Sicari, Sinnen et sa lune n'étient qu'une seule grosse planète. Dans un lointain passé, un cataclysme cosmique l'a éclatée et elle s'est recomposée en 3 corps, ce qui explique l'inhabituelle proximité de Sinnen avec Sicari. Le système de surveillance géologique de l'Arkship rapporte principalement des grandes plaines aux côtés de profonds ravins, Une rare vegétation apporte à Sicari une vie minimale. Aucune théorie n'explique les étranges forêts de cristaux.]],[[Ursprünglich war Sicari, Sinnen und sein Mond nur ein einziger großer Planet. In der fernen Vergangenheit wurde sie von einer kosmischen Katastrophe erschüttert und sie setzte sich wieder in drei Körper zusammen, was Sinnens ungewöhnliche Nähe zu Sicari erklärt. Das geologische Überwachungssystem der Arche meldet hauptsächlich große Ebenen neben tiefen Schluchten, Spärliche Vegetation bringt Sicari minimales Leben. Keine Theorie erklärt die seltsamen Kristallwälder.]]},iconPath="gui/screen_unit/img/planets/sinnen.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=false,systemId=0,positionInSystem=6,satellites={70},center={52718347.17,26962117.31,51830774.69},gravity=4.3175,radius=54950.00,atmosphereThickness=12000.00,atmosphereRadius=66950.00,GM=13036702043.75,surfaceArea=37944187486.00,surfaceAverageAltitude=312.7987904,surfaceMaxAltitude=433.763,surfaceMinAltitude=2.6892,ores={262147665,299255727,1467310917,2029139010,789110817},territories=48002},[70]={id=70,name={"Sinnen Moon 1","Sinnen Moon 1","Sinnen Moon 1"},type={"Moon","Lune","Mond"},biosphere=nil,classification=nil,habitability=nil,description=nil,iconPath="gui/screen_unit/img/planets/sinnen_moon_1.png",hasAtmosphere=false,isSanctuary=false,isInSafeZone=true,systemId=7,positionInSystem=1,satellites=nil,center={52416510.67,26795577.16,51893332.65},gravity=0.0000,radius=0.00,atmosphereThickness=0.00,atmosphereRadius=0.00,GM=0.00,surfaceArea=3631681108.00,surfaceAverageAltitude=-1948.13447,surfaceMaxAltitude=-1299.24,surfaceMinAltitude=-2694.02,ores={299255727,4234772167,3724036288,343766315,271971371,3837858336},territories=4322},[8]={id=8,name={"Teoma","Teoma","Teoma"},type={"Planet","Planète","Planet"},biosphere={"Forest","Forêt","Wald"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"High","Elevée","Hoch"},description={[[[REDACTED] The arkship geological survey [REDACTED]. This planet should not be here.]],[[[CENSURÉ] L'étude géologique du Vaisseau-Arche [CENSURÉ]. Cette planète ne devrait pas être ici.]],[[[ZENSIERT] Die geologische Untersuchung des Archenschiffs [ZENSIERT]. Dieser Planet sollte nicht hier sein.]]},iconPath="gui/screen_unit/img/planets/teoma.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=false,systemId=0,positionInSystem=8,satellites=nil,center={80865536.00,54665536.00,-934464.00},gravity=4.7885,radius=62000.00,atmosphereThickness=6400.00,atmosphereRadius=68400.00,GM=18406994000.00,surfaceArea=48305131520,surfaceAverageAltitude=-294.246,surfaceMaxAltitude=1341.99,surfaceMinAltitude=-576.98,maxStaticAltitude=1540.00,ores={299255727,4234772167,343766315,3837858336,1467310917},territories=60752},[9]={id=9,name={"Jago","Jago","Jago"},type={"Planet","Planète","Planet"},biosphere={"Water","Eau","Wasser"},classification={"Mesoplanet","Mésoplanète","Mesoplanet"},habitability={"Very High","Très élevée","Sehr hoch"},description={[[Jago is a water planet. The large majority of the planet's surface is covered by large oceans dotted by small areas of landmass across the planet. The arkship geological survey reports deep seas across the majority of the planet with sub 15 percent coverage of solid ground.]],[[Jago est une planète-océan. La plupart de sa surface est recouverte d'immenses océans, parsemés de petites îles. L'étude géologique du Vaisseau-Arche signale des océans profonds sur une grande partie de la planète, et moins de 15% de terres émergées.]],[[Jago ist ein Wasserplanet. Der größte Teil der Planetenoberfläche ist von weiten Ozeanen bedeckt, in denen vereinzelte kleine Inselgruppen zu finden sind. Die geologische Untersuchung des Archenschiffs hat ergeben, dass der größte Teil des Planeten von tiefen Meeren bedeckt ist und weniger als 15% des Bodens aus festem Material besteht.]]},iconPath="gui/screen_unit/img/planets/jago.png",hasAtmosphere=true,isSanctuary=false,isInSafeZone=false,systemId=0,positionInSystem=9,satellites=nil,center={-94134464.00,12765536.00,-3634464.00},gravity=4.9455,radius=61590.00,atmosphereThickness=11200.00,atmosphereRadius=72700.00,GM=18759904118.55,surfaceArea=47668367360,surfaceAverageAltitude=-374.1116,surfaceMaxAltitude=1093.681,surfaceMinAltitude=-499.43,maxStaticAltitude=1300.00,ores={2029139010,3724036288,3837858336,271971371,789110817},territories=60752}}}

        end)

        library.addEventHandlers(library)

        library.addEventHandlers(system)

        library.addEventHandlers(player)

        library.addEventHandlers(construct)

        library.addEventHandlers(unit)

        library.addEventHandlers(altimeter)

        library.addEventHandlers(core)

        library.addEventHandlers(disk)

        library.addEventHandlers(warp)

        library.addEventHandlers(switch)

        library.addEventHandlers(rx)

        library.addEventHandlers(tx)
  system:
    onActionStart(action):
      lua: system:triggerEvent('onActionStart',action)
    onActionLoop(action):
      lua: system:triggerEvent('onActionLoop',action)
    onActionStop(action):
      lua: system:triggerEvent('onActionStop',action)
    onUpdate():
      lua: system:triggerEvent('onUpdate')
    onFlush():
      lua: system:triggerEvent('onFlush')
    onInputText(text):
      lua: system:triggerEvent('onInputText',text)
    onCameraChanged(mode):
      lua: system:triggerEvent('onCameraChanged',mode)
  player:
    "onParentChanged(oldId,newId)":
      lua: player:triggerEvent('onParentChanged',oldId,newId)
  construct:
    onDocked(id):
      lua: construct:triggerEvent('onDocked',id)
    onUndocked(id):
      lua: construct:triggerEvent('onUndocked',id)
    onPlayerBoarded(id):
      lua: construct:triggerEvent('onPlayerBoarded',id)
    onVRStationEntered(id):
      lua: construct:triggerEvent('onVRStationEntered',id)
    onConstructDocked(id):
      lua: construct:triggerEvent('onConstructDocked',id)
    onPvPTimer(active):
      lua: construct:triggerEvent('onPvPTimer',active)
  unit:
    onStop():
      lua: unit:triggerEvent('onStop')
    onTimer(timerId):
      lua: unit:triggerEvent('onTimer',timerId)
    onStart():
      lua: >-
        sustenationSpeed=57 --export: The sustentation speed (in km/h) of the
        construct as stated in build mode.

        bingoFuel=672 --export: The mass of fuel (in kg) that would be deemed sufficient to return to base with.

        ExtraSpaceTankId=0 --export: The Id of the extra tank that is used for vertical boosters (if it exists).

        pitchSpeedFactor=0.8 --export: This factor will increase/decrease the player input along the pitch axis<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01

        yawSpeedFactor=1 --export: This factor will increase/decrease the player input along the yaw axis<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01

        rollSpeedFactor=1.5 --export: This factor will increase/decrease the player input along the roll axis<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01

        brakeSpeedFactor=3 --export: When braking, this factor will increase the brake force by brakeSpeedFactor * velocity<br>Valid values: Superior or equal to 0.01

        brakeFlatFactor=1 --export: When braking, this factor will increase the brake force by a flat brakeFlatFactor * velocity direction><br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01

        autoRoll=true --export: [Only in atmosphere]<br>When the pilot stops rolling,  flight model will try to get back to horizontal (no roll)

        autoRollFactor=2 --export: [Only in atmosphere]<br>When autoRoll is engaged, this factor will increase to strength of the roll back to 0<br>Valid values: Superior or equal to 0.01

        turnAssist=true --export: [Only in atmosphere]<br>When the pilot is rolling, the flight model will try to add yaw and pitch to make the construct turn better<br>The flight model will start by adding more yaw the more horizontal the construct is and more pitch the more vertical it is

        turnAssistFactor=2 --export: [Only in atmosphere]<br>This factor will increase/decrease the turnAssist effect<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01

        require('AR_Library:../libs/@EasternGamer/AR-Library/src/ARImport.lua')pitchInput=0;rollInput=0;yawInput=0;brakeInput=0;local a=0;local b=0;local c=0;local d=0;local e=0;local f=0;local g=0;local h=0;local i={0,0,0}local j=0;local k=0;local l=0;local m=0;local n=0;local o=0;local p=0;local q=0;local r=0;local s,t,u,v,w=0,nil,0,0,0;local x,y="",""local z=false;local A=false;local B=true;local C=true;local D=false;local E=false;local F=1500;local G=nil;local H=0;local I=0;local J=nil;local K=nil;local L=nil;local M=0;local N=0;local O=0;local P=nil;local Q=nil;local R=0;local S=0;local T=2;local U=20;local V=0.5522847498307936;local W=42051194;local X=22554892;local Y={OLS1=nil,OLS2=nil,OLS3=nil}local Z={OLS1=nil,OLS2=nil,OLS3=nil}local _={origin=nil,x=nil,y=nil,z=nil}local a0=nil;local a1=nil;local a2=nil;local a3=false;local a4=false;local a5=nil;local a6=true;Nav=Navigator.new(system,core,unit)Nav.axisCommandManager:setupCustomTargetSpeedRanges(axisCommandId.longitudinal,{construct.getMaxSpeed()*3.6})system.clearWaypoint(false)if switch and switch.activate then switch.activate()end;unit.switchOnHeadlights()unit.hideWidget()system.showHelper(false)system.showScreen(true)construct.setDockingMode(1)local a7=require('Sky:atlas.lua')local a8=nil;projector=Projector()local a9=ObjectGroup()projector.addObjectGroup(a9)local aa=ObjectBuilderLinear()UIHud=aa.setPositionType(positionTypes.localP).setOrientationType(orientationTypes.localO).build()UIMfdL=aa.setPositionType(positionTypes.localP).setOrientationType(orientationTypes.localO).build()UIMfdR=aa.setPositionType(positionTypes.localP).setOrientationType(orientationTypes.localO).build()local ab=ObjectBuilderLinear().setPositionType(positionTypes.globalP).setOrientationType(orientationTypes.globalO).build()local function ac(ad,ae,af)local ag=ae:normalize()local ah=math.rad(af)local ai,aj=math.cos(ah),math.sin(ah)return ad*ai+ag:cross(ad)*aj+ag*ag:dot(ad)*(1-ai)end;local ak=vec3(unit.getPosition())local al=vec3(construct.getOrientationForward()):normalize()local am=vec3(construct.getOrientationUp()):normalize()local an=vec3(construct.getOrientationRight()):normalize()local ao;local ap;local aq;local ar=-1;local as=0;local at=0;local au;local av;local aw;if string.match(unit.getName(),"seat")or string.match(unit.getName(),"chair")then if string.match(unit.getName(),"command")then at=-0.06 end;ar=1;as=0.65;au=ak+al*(0.3+as)+am*0.57+an*at;av=ak+an*(-0.3+at)+al*as+am*0.125;aw=ak+an*(0.3+at)+al*as+am*0.125 else au=ak+al*(0.3+as)+am*0.5+an*at;av=ak+an*(-0.3+at)+al*as+am*0.125;aw=ak+an*(0.3+at)+al*as+am*0.125 end;ap=ac(al,am,-30)ao=(ap:cross(am)):normalize()UIMfdL.rotateXYZ({ao.x,ao.y,ao.z},{ap.x,ap.y,ap.z},{am.x,am.y,am.z})ap=ac(al,am,30)ao=(ap:cross(am)):normalize()UIMfdR.rotateXYZ({ao.x,ao.y,ao.z},{ap.x,ap.y,ap.z},{am.x,am.y,am.z})UIMfdL.setPosition(av.x,av.y,av.z)UIMfdR.setPosition(aw.x,aw.y,aw.z)UIHud.setPosition(au.x,au.y,au.z)UIHud.rotateXYZ({an.x,an.y,an.z},{al.x*ar,al.y*ar,al.z*ar},{am.x*ar,am.y*ar,-am.z*ar})a9.addObject(UIHud)a9.addObject(UIMfdL)a9.addObject(UIMfdR)a9.addObject(ab)pHud=UIHud.setUIElements()pMfdL=UIMfdL.setUIElements()pMfdR=UIMfdR.setUIElements()local ax=ab.setUIElements()local ay,az,aA,aB,aC,aD;ay,az,aA,aB=0,0,420,240;aC,aD=ay-aA/2,az-aB/2;local aE=PathBuilder().setFill('black',false).setFillOpacity(0,false).moveTo(aC,aD).lineTo(aC+aA,aD).lineTo(aC+aA,aD+aB).lineTo(aC,aD+aB).closePath()ay,az,aA,aB=0,0,200,100;aC,aD=ay-aA/2,az-aB/2;local aF=PathBuilder().setFill('black',false).setStroke('green',false).setStrokeWidth(2,false).setFillOpacity(1.0,false).moveTo(aC,aD).lineTo(aC+aA,aD).lineTo(aC+aA,aD+aB).lineTo(aC,aD+aB).closePath()local aG=PathBuilder().setFill('black',false).setStroke('green',false).setStrokeWidth(2,false).setFillOpacity(1.0,false).moveTo(aC,aD).lineTo(aC+aA,aD).lineTo(aC+aA,aD+aB).lineTo(aC,aD+aB).closePath()local aH=60;StallOrbPath=PathBuilder().setStroke('green',false).setStrokeWidth(3,false).setFillOpacity(.0,false).moveTo(ay+aH,az).cubicCurve(ay+aH,az+V*aH,ay+V*aH,az+aH,ay,az+aH).cubicCurve(ay-V*aH,az+aH,ay-aH,az+V*aH,ay-aH,az).cubicCurve(ay-aH,az-V*aH,ay-V*aH,az-aH,ay,az-aH).cubicCurve(ay+V*aH,az-aH,ay+aH,az-V*aH,ay+aH,az).closePath()CenterObjPath=PathBuilder().setStroke('green',false).setStrokeWidth(3,false).moveTo(7,7).lineTo(-7,-7).moveTo(-7,7).lineTo(7,-7)DestSpaceMarkerPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(5,5).lineTo(5,-5).lineTo(-5,-5).lineTo(-5,5).closePath()AzimIndicatorPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(0,75).lineTo(-5,70).lineTo(5,70).closePath()VeloIndicatorPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(155,-60).lineTo(150,-65).lineTo(150,-55).closePath()AltIndicatorPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(-155,-60).lineTo(-150,-65).lineTo(-150,-55).closePath()LadderLObjPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(-160,50).lineTo(-160,-60).lineTo(-170,-60).closePath()LadderRObjPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(160,50).lineTo(160,-60).lineTo(170,-60).closePath()ThrottleBarPath=PathBuilder().setStroke('green',false).setStrokeWidth(10,false).moveTo(175,-60).lineTo(175,50)TickerObjPath=PathBuilder().setStroke('green',false).setStrokeWidth(5,false).moveTo(-130,80).lineTo(130,80)CaptureBoxPath=PathBuilder().setStroke('green',false).setStrokeWidth(5,false).setFillOpacity(0,false).moveTo(-160,80).lineTo(160,80).lineTo(160,-70).lineTo(-160,-70).closePath()hudMaster=pHud.createCustomDraw(0,0,0)hudMaster.usePathBuilder(aE)hudMaster.setScale(1/600)hudMaster.build()MfdLMaster=pMfdL.createCustomDraw(0,0,0)MfdLMaster.usePathBuilder(aF)MfdLMaster.setScale(1/600)MfdLMaster.build()MfdRMaster=pMfdR.createCustomDraw(0,0,0)MfdRMaster.usePathBuilder(aG)MfdRMaster.setScale(1/600)MfdRMaster.build()local aI=1/600;local aJ=8;local aK=aJ/aI;local aL=PathBuilder().setStroke('green',false).setStrokeWidth(4,false).setFillOpacity(0,false).moveTo(-aK,-aK).lineTo(aK,-aK).lineTo(aK,aK).lineTo(-aK,aK).closePath()local aM=PathBuilder().setStroke('green',false).setStrokeWidth(2,false).moveTo(-aK,0).lineTo(aK,0)local aN=PathBuilder().setStroke('green',false).setStrokeWidth(2,false).setFillOpacity(0,false).moveTo(-(aK*1.25),-(aK*1.25)).lineTo(aK*1.25,-(aK*1.25)).lineTo(aK*1.25,aK*1.25).lineTo(-(aK*1.25),aK*1.25).closePath()local aO=PathBuilder().setStroke('green',false).setStrokeWidth(2,false).setFillOpacity(0,false).moveTo(-(aK*1.6),-(aK*1.6)).lineTo(aK*1.6,-(aK*1.6)).lineTo(aK*1.6,aK*1.6).lineTo(-(aK*1.6),aK*1.6).closePath()local aP=ax.createCustomDraw(0,0,0.00012)aP.usePathBuilder(aL)aP.setPositionIsRelative(true)aP.setScale(aI)aP.build()local aQ=ax.createCustomDraw(0,0,0.00013)aQ.usePathBuilder(aM)aQ.setPositionIsRelative(true)aQ.setScale(aI)aQ.build()local aR=ax.createCustomDraw(0,0,0.00014)aR.usePathBuilder(aN)aR.setPositionIsRelative(true)aR.setScale(aI)aR.build()local aS=ax.createCustomDraw(0,0,0.00015)aS.usePathBuilder(aO)aS.setPositionIsRelative(true)aS.setScale(aI)aS.build()aR.setPosition(0,0,20)aS.setPosition(0,0,40)if aP.hideDraw then aP.hideDraw()end;if aQ.hideDraw then aQ.hideDraw()end;if aR.hideDraw then aR.hideDraw()end;if aS.hideDraw then aS.hideDraw()end;StallOrb=pHud.createCustomDraw(0,0,0.0001)StallOrb.usePathBuilder(StallOrbPath)StallOrb.setPositionIsRelative(true)StallOrb.setScale(1/600)StallOrb.build()CaptureBoxObj=pHud.createCustomDraw(0,0,0.0011)CaptureBoxObj.usePathBuilder(CaptureBoxPath)CaptureBoxObj.setPositionIsRelative(true)CaptureBoxObj.setScale(1/600)CaptureBoxObj.build()DestSpaceMarkerObj=pHud.createCustomDraw(0,0,0.000132)DestSpaceMarkerObj.usePathBuilder(DestSpaceMarkerPath)DestSpaceMarkerObj.setPositionIsRelative(true)DestSpaceMarkerObj.setScale(1/600)DestSpaceMarkerObj.build()local aT=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(0,6).lineTo(5,-4).lineTo(-5,-4).closePath()local aU=pHud.createCustomDraw(0,0,0.000133)aU.usePathBuilder(aT)aU.setPositionIsRelative(true)aU.setScale(1/600)aU.build()aU.hideDraw()DistIndicator=pHud.createText(0,0,0.000222)DistIndicator.setPositionIsRelative(true)DistIndicator.setFontColor('green')DistIndicator.setFontSize(12)DistIndicator.move(0,95)DistIndicator.setAlignmentX('middle')DistIndicator.setAlignmentY('middle')DistIndicator.setText('555')DistIndicator.setWeight(0.002)DistIndicator.setScale(1/600)VeloLabel=pHud.createText(0,0,0.0003)VeloLabel.setPositionIsRelative(true)VeloLabel.setFontColor('green')VeloLabel.setFontSize(6)VeloLabel.move(160,-70)VeloLabel.setAlignmentX('middle')VeloLabel.setAlignmentY('middle')VeloLabel.setText('Speed')VeloLabel.setWeight(0.002)VeloLabel.setScale(1/600)AltLabel=pHud.createText(0,0,0.0004)AltLabel.setPositionIsRelative(true)AltLabel.setFontColor('green')AltLabel.setFontSize(6)AltLabel.move(-160,-70)AltLabel.setAlignmentX('middle')AltLabel.setAlignmentY('middle')AltLabel.setText('Altitude')AltLabel.setWeight(0.002)AltLabel.setScale(1/600)CenterObj=pHud.createCustomDraw(0,0,0.0005)CenterObj.usePathBuilder(CenterObjPath)CenterObj.setPositionIsRelative(true)CenterObj.setScale(1/600)CenterObj.build()AltIndicator=pHud.createCustomDraw(0,0,0.0006)AltIndicator.usePathBuilder(AltIndicatorPath)AltIndicator.setPositionIsRelative(true)AltIndicator.setScale(1/600)AltIndicator.build()VeloIndicator=pHud.createCustomDraw(0,0,0.0007)VeloIndicator.usePathBuilder(VeloIndicatorPath)VeloIndicator.setPositionIsRelative(true)VeloIndicator.setScale(1/600)VeloIndicator.build()AzimIndicator=pHud.createCustomDraw(0,0,0.0008)AzimIndicator.usePathBuilder(AzimIndicatorPath)AzimIndicator.setPositionIsRelative(true)AzimIndicator.setScale(1/600)AzimIndicator.build()LadderLObj=pHud.createCustomDraw(0,0,0.0009)LadderLObj.usePathBuilder(LadderLObjPath)LadderLObj.setPositionIsRelative(true)LadderLObj.setScale(1/600)LadderLObj.build()LadderRObj=pHud.createCustomDraw(0,0,0.001)LadderRObj.usePathBuilder(LadderRObjPath)LadderRObj.setPositionIsRelative(true)LadderRObj.setScale(1/600)LadderRObj.build()TickerObj=pHud.createCustomDraw(0,0,0.00011)TickerObj.usePathBuilder(TickerObjPath)TickerObj.setPositionIsRelative(true)TickerObj.setScale(1/600)TickerObj.build()ThrottleBar=pHud.createCustomDraw(0,0,0.00012)ThrottleBar.usePathBuilder(ThrottleBarPath)ThrottleBar.setPositionIsRelative(true)ThrottleBar.setScale(1/600)ThrottleBar.build()ThrottleTarget=pHud.createText(0,0,0.000121)ThrottleTarget.setPositionIsRelative(true)ThrottleTarget.setFontColor('green')ThrottleTarget.setFontSize(6)ThrottleTarget.move(175,-60)ThrottleTarget.setAlignmentX('start')ThrottleTarget.setAlignmentY('middle')ThrottleTarget.setText('555')ThrottleTarget.setWeight(0.002)ThrottleTarget.setScale(1/600)AnnounceFuelAtmoPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(-98,48).lineTo(-2,48).lineTo(-2,33).lineTo(-98,33).closePath()AnnounceFuelSpacePath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(2,48).lineTo(98,48).lineTo(98,33).lineTo(2,33).closePath()FuelGaugeObj=pMfdR.createText(0,0,0.0001)FuelGaugeObj.setPositionIsRelative(true)FuelGaugeObj.setFontColor('green')FuelGaugeObj.setFontSize(6)FuelGaugeObj.move(-90,25)FuelGaugeObj.setAlignmentX('start')FuelGaugeObj.setAlignmentY('middle')FuelGaugeObj.setText('Atmo Fuel')FuelGaugeObj.setWeight(0.002)FuelGaugeObj.setScale(1/600)DestArrivalTeleObj=pMfdR.createText(0,0,0.00021)DestArrivalTeleObj.setPositionIsRelative(true)DestArrivalTeleObj.setFontColor('green')DestArrivalTeleObj.setFontSize(6)DestArrivalTeleObj.move(-90,5)DestArrivalTeleObj.setAlignmentX('start')DestArrivalTeleObj.setAlignmentY('middle')DestArrivalTeleObj.setText('Space Fuel')DestArrivalTeleObj.setWeight(0.002)DestArrivalTeleObj.setScale(1/600)AnnounceFuelAtmoObj=pMfdR.createCustomDraw(0,0,0.0003)AnnounceFuelAtmoObj.usePathBuilder(AnnounceFuelAtmoPath)AnnounceFuelAtmoObj.setPositionIsRelative(true)AnnounceFuelAtmoObj.setScale(1/600)AnnounceFuelAtmoObj.build()AnnounceFuelSpaceObj=pMfdR.createCustomDraw(0,0,0.0004)AnnounceFuelSpaceObj.usePathBuilder(AnnounceFuelSpacePath)AnnounceFuelSpaceObj.setPositionIsRelative(true)AnnounceFuelSpaceObj.setScale(1/600)AnnounceFuelSpaceObj.build()AnnounceFuelAtmoText=pMfdR.createText(0,0,0.0005)AnnounceFuelAtmoText.setPositionIsRelative(true)AnnounceFuelAtmoText.setFontColor('black')AnnounceFuelAtmoText.setFontSize(6)AnnounceFuelAtmoText.move(-50,40)AnnounceFuelAtmoText.setAlignmentX('middle')AnnounceFuelAtmoText.setAlignmentY('middle')AnnounceFuelAtmoText.setText('Atmo Fuel')AnnounceFuelAtmoText.setWeight(0.002)AnnounceFuelAtmoText.setScale(1/600)AnnounceFuelSpaceText=pMfdR.createText(0,0,0.0006)AnnounceFuelSpaceText.setPositionIsRelative(true)AnnounceFuelSpaceText.setFontColor('black')AnnounceFuelSpaceText.setFontSize(6)AnnounceFuelSpaceText.move(50,40)AnnounceFuelSpaceText.setAlignmentX('middle')AnnounceFuelSpaceText.setAlignmentY('middle')AnnounceFuelSpaceText.setText('Space Fuel')AnnounceFuelSpaceText.setWeight(0.002)AnnounceFuelSpaceText.setScale(1/600)AnnounceLoAltiPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(-98,48).lineTo(-2,48).lineTo(-2,33).lineTo(-98,33).closePath()AnnounceLoSpeedPath=PathBuilder().setFill('green',false).setFillOpacity(1,false).moveTo(2,48).lineTo(98,48).lineTo(98,33).lineTo(2,33).closePath()TelemetryDestNameObj=pMfdL.createText(0,0,0.0001)TelemetryDestNameObj.setPositionIsRelative(true)TelemetryDestNameObj.setFontColor('green')TelemetryDestNameObj.setFontSize(6)TelemetryDestNameObj.move(-90,25)TelemetryDestNameObj.setAlignmentX('start')TelemetryDestNameObj.setAlignmentY('middle')TelemetryDestNameObj.setText('Dest Name')TelemetryDestNameObj.setWeight(0.002)TelemetryDestNameObj.setScale(1/600)TelemetryDestInfoObj=pMfdL.createText(0,0,0.00022)TelemetryDestInfoObj.setPositionIsRelative(true)TelemetryDestInfoObj.setFontColor('green')TelemetryDestInfoObj.setFontSize(6)TelemetryDestInfoObj.move(-90,15)TelemetryDestInfoObj.setAlignmentX('start')TelemetryDestInfoObj.setAlignmentY('middle')TelemetryDestInfoObj.setText('Dest Info')TelemetryDestInfoObj.setWeight(0.002)TelemetryDestInfoObj.setScale(1/600)TelemetryBrakeDistObj=pMfdL.createText(0,0,0.00025)TelemetryBrakeDistObj.setPositionIsRelative(true)TelemetryBrakeDistObj.setFontColor('green')TelemetryBrakeDistObj.setFontSize(6)TelemetryBrakeDistObj.move(-90,-5)TelemetryBrakeDistObj.setAlignmentX('start')TelemetryBrakeDistObj.setAlignmentY('middle')TelemetryBrakeDistObj.setText('Brake Info')TelemetryBrakeDistObj.setWeight(0.002)TelemetryBrakeDistObj.setScale(1/600)AnnounceLoAltiObj=pMfdL.createCustomDraw(0,0,0.0003)AnnounceLoAltiObj.usePathBuilder(AnnounceLoAltiPath)AnnounceLoAltiObj.setPositionIsRelative(true)AnnounceLoAltiObj.setScale(1/600)AnnounceLoAltiObj.build()AnnounceLoSpeedObj=pMfdL.createCustomDraw(0,0,0.0004)AnnounceLoSpeedObj.usePathBuilder(AnnounceLoSpeedPath)AnnounceLoSpeedObj.setPositionIsRelative(true)AnnounceLoSpeedObj.setScale(1/600)AnnounceLoSpeedObj.build()AnnounceLoSpeedText=pMfdL.createText(0,0,0.0005)AnnounceLoSpeedText.setPositionIsRelative(true)AnnounceLoSpeedText.setFontColor('black')AnnounceLoSpeedText.setFontSize(6)AnnounceLoSpeedText.move(50,40)AnnounceLoSpeedText.setAlignmentX('middle')AnnounceLoSpeedText.setAlignmentY('middle')AnnounceLoSpeedText.setText('Speed')AnnounceLoSpeedText.setWeight(0.002)AnnounceLoSpeedText.setScale(1/600)AnnounceLoAltiText=pMfdL.createText(0,0,0.0006)AnnounceLoAltiText.setPositionIsRelative(true)AnnounceLoAltiText.setFontColor('black')AnnounceLoAltiText.setFontSize(6)AnnounceLoAltiText.move(-50,40)AnnounceLoAltiText.setAlignmentX('middle')AnnounceLoAltiText.setAlignmentY('middle')AnnounceLoAltiText.setText('Altitude')AnnounceLoAltiText.setWeight(0.002)AnnounceLoAltiText.setScale(1/600)local function aV(aW,aX)local aY,aZ,a_=aX.getResult()local b0,b1={},{}for b2=1,#a_,2 do b0[#b0+1]=a_[b2]b1[#b1+1]=a_[b2+1]end;aW.setPoints(b0,b1)aW.setDrawData(aZ)aW.setDefaultDraw(aY)end;local function b3(aW,aX)local aY,aZ,a_=aX.getResult()aW.setDrawData(aZ)aW.setDefaultDraw(aY)end;local function b4(ad,b5,b6)if ad<b5 then return b5 end;if ad>b6 then return b6 end;return ad end;local function b7(aj)if type(aj)~='string'then return nil end;local b8,aZ=pcall(function()return json and json.decode(aj)or nil end)if not b8 or type(aZ)~='table'then return nil end;local function b9(ad)if type(ad)~='table'then return nil end;if ad.x and ad.y and ad.z then return vec3(ad.x,ad.y,ad.z)end;if#ad>=3 then return vec3(ad[1],ad[2],ad[3])end;return nil end;local ba=b9(aZ.OLS1)local bb=b9(aZ.OLS2)local bc=b9(aZ.OLS3)if ba and bb and bc then return ba,bb,bc end;return nil end;local function bd(ag,be,ah)return ag+(be-ag)*ah end;local function bf(bg)local bh=Y.OLS1 and Y.OLS2 and Y.OLS3;if not bh then a3=false;return end;local bi=0.35;for V,ad in pairs(Y)do if ad then if not Z[V]then Z[V]=ad else Z[V]=bd(Z[V],ad,bi)end end end;local bj=Z.OLS1;local bk=Z.OLS2;local bl=Z.OLS3;if not(bj and bk and bl)then a3=false;return end;local aC=(bj-bk):normalize()if not aC or aC:len()<1e-6 then a3=false;return end;local bm=bl-bk;local bn=aC*bm:dot(aC)local bo=bk+bn;local bp=bl-bo;if bp:len()<1e-6 then a3=false;return end;bp=bp:normalize()local bq=-bp:normalize()local aD=(bq:cross(aC)):normalize()bq=(aC:cross(aD)):normalize()local br=bl;local bs=a1 or vec3(0,0,0)if a0 and a2 and bg then local bt=bg-a2;if bt and bt>0 then bs=(br-a0)/bt end end;a0=br;a1=bs;a2=bg;_.origin,_.x,_.y,_.z=br,aC,aD,bq;a3=true end;local function bu(bv)if not bv then return nil end;local bw=vec3(construct.getWorldPosition())local bx=bv-bw;local by=vec3(construct.getWorldForward())local bz=vec3(construct.getWorldRight())local bA=vec3(construct.getWorldUp())local bB=bx:dot(by)if bB<=0 then return nil end;local bC=1/600;local bD=160*bC;local bE=80*bC;local bF=70*bC;local bG=4.0*(0.3+(as or 0))if not bG or bG<1e-3 then bG=1.0 end;local bH=math.deg(math.atan(math.abs(bx:dot(bz)),bB))local bI=math.deg(math.atan(bx:dot(bA),bB))local bJ=math.deg(math.atan(bD,bG))local bK=math.deg(math.atan(bE,bG))local bL=math.deg(math.atan(bF,bG))if bH<=bJ and bI<=bK and bI>=-bL then local ah=bG/bB;local bM=bx:dot(bz)*ah/bC;local bN=bx:dot(bA)*ah/bC;bM=math.max(-160,math.min(160,bM))bN=math.max(-70,math.min(80,bN))return bM,bN end;return nil end;local function bO()local bP,bQ=0,0;local bR=tonumber(ExtraSpaceTankId)or 0;local bS=core.getElementIdList()or{}for bT,bU in ipairs(bS)do local bV=core.getElementItemIdById(bU)local bW=system.getItem(bV)if bW.name:find("FuelTank",1,true)then local bX=tonumber(bW.unitMass)or 0;local bY=tonumber(core.getElementMassById(bU))or 0;local bZ=math.max(0,bY-bX)if bW.name:find("Atmo",1,true)then bP=bP+bZ elseif bW.name:find("Space",1,true)then if bR~=0 and bU==bR then else bQ=bQ+bZ end end end end;return bP,bQ end;local function b_(c0,c1,c2,c3,l)local c4=math.rad(c2 or 0)local c5=math.rad(c3 or 0)local c6=(c1 or 0)+(l or 0)local aC=c6*math.cos(c4)*math.cos(c5)local aD=c6*math.cos(c4)*math.sin(c5)local bq=c6*math.sin(c4)return vec3((c0[1]or 0)+aC,(c0[2]or 0)+aD,(c0[3]or 0)+bq)end;local function c7(c8,c9)local ca=a7[c8]if not ca then return nil end;if c9==0 then return{0,0,0},0 end;local cb=ca[c9]if not cb then return nil end;local ai=cb.center;local aH=cb.radius or 0;return ai,aH end;local function cc(c8,c9,ag,be,ai)if c9==0 then return vec3(ag or 0,be or 0,ai or 0)end;local c0,c1=c7(c8,c9)if c0 and c1 then return b_(c0,c1,ag,be,ai)end;return nil end;local function cd(ag,be)return vec3((ag.x or ag[1]or 0)-(be.x or be[1]or 0),(ag.y or ag[2]or 0)-(be.y or be[2]or 0),(ag.z or ag[3]or 0)-(be.z or be[3]or 0))end;local function ce(c8,cf)local ca=a7[c8]if not ca or not cf then return nil end;local cg,ch=nil,nil;for bU,cb in pairs(ca)do local ai=cb and cb.center;local ci=cb and cb.name and cb.name[1]if ai and ci then local cj=cd(cf,ai)local ck=cj:dot(cj)if not ch or ck<ch then ch=ck;cg=ci end end end;return cg end;local function cl(cf)if not cf then return nil end;local cm=math.huge;local cn=nil;for co,ca in pairs(a7)do if type(ca)=='table'then for c9,cb in pairs(ca)do if type(cb)=='table'and cb.center then local ai=vec3(cb.center[1]or 0,cb.center[2]or 0,cb.center[3]or 0)local cj=cd(cf,ai)local cp=cj:len()if cp<cm then cm=cp;cn={systemId=co,bodyId=c9,body=cb,center=ai,radius=cb.radius or 0,distance=cp}end end end end end;return cn end;local function cq(cb,cr)if not cb then return nil end;local cs=tonumber(cb.GM)or 0;local aH=(tonumber(cb.radius)or 0)+(cr or 0)if cs<=0 or aH<=0 then return nil end;return math.sqrt(cs/aH)end;local function ct(cf)local ak=cf or vec3(construct.getWorldPosition())if not ak then return nil end;local cu=math.huge;for bT,ca in pairs(a7)do if type(ca)=='table'then for bT,cb in pairs(ca)do if type(cb)=='table'and cb.center and cb.hasAtmosphere and cb.atmosphereRadius then local ai=vec3(cb.center[1]or 0,cb.center[2]or 0,cb.center[3]or 0)local cj=cd(ak,ai):len()local cv=tonumber(cb.atmosphereRadius)or 0;if cv>0 and cj~=cj then else local cw=math.max(0,cj-cv)if cw<cu then cu=cw end end end end end end;if cu==math.huge then return nil end;return cu end;local function cx(c8,cf)local ca=a7[c8]if not ca or not cf then return true end;local cy,cz=math.huge,0;for bT,cb in pairs(ca)do local ai=cb and cb.center;if ai then local cj=cd(cf,ai)local ck=cj:dot(cj)if ck<cy then cy=ck;cz=cb.hasAtmosphere and cb.atmosphereRadius or(cb.radius or 0)end end end;if cy==math.huge then return true end;return math.sqrt(cy)>cz+1.0 end;local function cA()if not a8 or not s then return math.huge end;if t==0 then return math.huge end;local cb=(a7[s]or{})[t]if not cb then return math.huge end;local cv=cb.hasAtmosphere and cb.atmosphereRadius or(cb.radius or 0)local cB=cb.center;if not(cv and cv>0 and cB)then return math.huge end;local bl=vec3(cB[1],cB[2],cB[3])local cC=vec3(construct.getWorldPosition())local cD=cd(a8,cC)local cE=cD:len()if cE<=1e-6 then return math.huge end;local cF=cD/cE;local cG=cd(cC,bl)local be=cG:dot(cF)local ai=cG:dot(cG)-cv*cv;local cH=be*be-ai;if cH and cH>=0 then local cI=math.sqrt(cH)local cJ=-be-cI;local cK=-be+cI;local ah;if cJ>=0 then ah=cJ elseif cK>=0 then ah=cK end;if ah and ah>=0 then return ah end end;local cL=cd(cC,bl):len()return math.max(0,cL-cv)end;local function cM()local cN=z;z=(unit.getAtmosphereDensity()or 0)>0;if cN~=z then B=true end;local cO=A;A=Nav.axisCommandManager:getAxisCommandType(axisCommandId.longitudinal)==axisCommandType.byThrottle;if cO~=A then C=true end;if h==0 then DistIndicator.setText('555')elseif h>200 then DistIndicator.setText(string.format("%.0f su",math.ceil(h/200)))else DistIndicator.setText(string.format("%.0f",h))end;AzimIndicator.move(c,0,nil,true)VeloIndicator.move(0,e,nil,true)if a8 and not z then local bw=vec3(construct.getWorldPosition())local bx=cd(a8,bw)local by=vec3(construct.getWorldForward())local bz=vec3(construct.getWorldRight())local bA=vec3(construct.getWorldUp())local bB=bx:dot(by)if bB<=0 then DestSpaceMarkerObj.hideDraw()else local bC=1/600;local cP=160*bC;local cQ=80*bC;local cR=70*bC;local bG=4.0*(0.3+(as or 0))if bG<1e-3 or bG~=bG then bG=1.0 end;local bH=math.deg(math.atan(math.abs(bx:dot(bz)),bB))local bI=math.deg(math.atan(bx:dot(bA),bB))local bJ=math.deg(math.atan(cP,bG))local bK=math.deg(math.atan(cQ,bG))local bL=math.deg(math.atan(cR,bG))if bH<=bJ and bI<=bK and bI>=-bL then local ah=bG/bB;local bM=bx:dot(bz)*ah/bC;local bN=bx:dot(bA)*ah/bC;if bM>160 then bM=160 end;if bM<-160 then bM=-160 end;if bN>80 then bN=80 end;if bN<-70 then bN=-70 end;DestSpaceMarkerObj.move(bM,bN,nil,true)DestSpaceMarkerObj.showDraw()b3(DestSpaceMarkerObj,DestSpaceMarkerPath)else DestSpaceMarkerObj.hideDraw()end end elseif not a8 then DestSpaceMarkerObj.hideDraw()else DestSpaceMarkerObj.hideDraw()end;if z then AltIndicator.move(0,f,nil,true)else AltIndicator.move(0,d,nil,true)end;local bg=system.getArkTime()local bP,bQ=bO()n=math.floor((bP or 0)+0.5)q=math.floor((bQ or 0)+0.5)if not J then J=bg;K=bP;L=bQ;P=bg;Q=bg else local bt=bg-J;if bt>0 then local cS=math.max(0,(K or bP)-(bP or 0))local cT=math.max(0,(L or bQ)-(bQ or 0))if cS>0 then P=bg end;if cT>0 then Q=bg end;N=N+cS;O=O+cT;M=M+bt;if M>=T then local cU=M>0 and N/M*60 or 0;local cV=M>0 and O/M*60 or 0;if cU>0 then R=cU end;if cV>0 then S=cV end;if P and bg-P>=U then m=0;o=0 else local cW=cU>0 and cU or R;if cW>0 then m=math.floor(cW+0.5)local cX=cW/60;o=math.floor((bP or 0)/cX+0.5)else m=0;o=0 end end;if Q and bg-Q>=U then p=0;r=0 else local cY=cV>0 and cV or S;if cY>0 then p=math.floor(cY+0.5)local cZ=cY/60;r=math.floor((bQ or 0)/cZ+0.5)else p=0;r=0 end end;N=0;O=0;M=0 end;K=bP;L=bQ;J=bg end end;local c_=math.floor(o/3600+0.5)local d0=math.floor(o%3600/60+0.5)local d1=math.floor(o%60+0.5)local d2=math.floor(r/3600+0.5)local d3=math.floor(r%3600/60+0.5)local d4=math.floor(r%60+0.5)if z then if c_>0 then FuelGaugeObj.setText(string.format("Fuel: %01d h - %01d kg - %01d kg/min",c_,n,m))elseif d0>0 then FuelGaugeObj.setText(string.format("Fuel: %01d m - %01d kg - %01d kg/min",d0,n,m))else FuelGaugeObj.setText(string.format("Fuel: %01d s - %01d kg - %01d kg/min",d1,n,m))end else if d2>0 then FuelGaugeObj.setText(string.format("Fuel: %01d h - %01d kg - %01d kg/min",d2,q,p))elseif d3>0 then FuelGaugeObj.setText(string.format("Fuel: %01d m - %01d kg - %01d kg/min",d3,q,p))else FuelGaugeObj.setText(string.format("Fuel: %01d s - %01d kg - %01d kg/min",d4,q,p))end end;if n>bingoFuel then AnnounceFuelAtmoPath.setFill('green',false)else AnnounceFuelAtmoPath.setFill('red',false)end;if q>bingoFuel then AnnounceFuelSpacePath.setFill('green',false)else AnnounceFuelSpacePath.setFill('red',false)end;if E then CenterObjPath.setStroke('red',false)else CenterObjPath.setStroke('green',false)end;if D then DestSpaceMarkerPath.setFill('red',false)else DestSpaceMarkerPath.setFill('green',false)end;b3(AnnounceFuelAtmoObj,AnnounceFuelAtmoPath)b3(AnnounceFuelSpaceObj,AnnounceFuelSpacePath)b3(CenterObj,CenterObjPath)if x and x~=""then TelemetryDestNameObj.setText(tostring(x))else TelemetryDestNameObj.setText("No Destination")end;local d5=0;if a8 then d5=math.max(math.floor(h/j*3600+0.5),0)end;if d5==0 then d5=math.huge end;local d6=(a7[s]or{})[t]if t==0 and a7[s]then local d7=ce(s,a8)if d7 then TelemetryDestInfoObj.setText(string.format("Space - %s AOI",d7))else TelemetryDestInfoObj.setText("Space")end elseif d6 and d6.name and d6.name[1]and type(u)=='number'and type(v)=='number'and type(w)=='number'then TelemetryDestInfoObj.setText(string.format("%s - %.02f/%.02f - %.0f alt",d6.name[1],u,v,w))else TelemetryDestInfoObj.setText("--------")end;if d5>3600 then DestArrivalTeleObj.setText(string.format("Time to Target: %.0f h",math.floor(d5/3600+0.5)))elseif d5>60 then DestArrivalTeleObj.setText(string.format("Time to Target: %.0f m",math.floor(d5/60+0.5)))else DestArrivalTeleObj.setText(string.format("Time to Target: %.0f s",d5))end;if l>500 then AnnounceLoAltiPath.setFill('green',false)else AnnounceLoAltiPath.setFill('red',false)end;if j>sustenationSpeed/2 and z or(unit.getAtmosphereDensity()or 0)<=0 then AnnounceLoSpeedPath.setFill('green',false)else AnnounceLoSpeedPath.setFill('red',false)end;b3(AnnounceLoAltiObj,AnnounceLoAltiPath)b3(AnnounceLoSpeedObj,AnnounceLoSpeedPath)local function d8(aC)return aC~=nil and aC or 0 end;local function d9(aC)return aC==aC and aC~=math.huge and aC~=-math.huge end;local da=construct.getCurrentBrake()if da==nil or da<=0 then da=construct.getMaxBrake()or 0 end;local db,dc,dd=d8(i and i.x),d8(i and i.y),d8(i and i.z)local de=db*db+dc*dc+dd*dd;local df=de>=0 and d9(de)and math.sqrt(de)or 0;local dg=construct.getTotalMass()or 0;if not(da>0 and dg>0 and d9(df))then TelemetryBrakeDistObj.setText("Brake in: __ s / __ m")else if df<1e-3 then TelemetryBrakeDistObj.setText("Brake in: 0 s / 0 m")else a=math.floor(dg*df*df)/(2*da)local dh=a;local di=math.floor(dg*df/da+0.5)if dh<999 then TelemetryBrakeDistObj.setText(string.format("Brake in: %.0f s / %.0f m",math.min(di,999),math.min(dh,999)))elseif dh<199999 then dh=dh/1000;TelemetryBrakeDistObj.setText(string.format("Brake in: %.0f s / %.0f km",math.min(di,999),math.min(dh,999)))else dh=dh/200000;TelemetryBrakeDistObj.setText(string.format("Brake in: %.0f s / %.0f su",math.min(di,999),math.min(dh,999)))end end end;local aH=b;StallOrbPath=PathBuilder().setStroke('green',false).setStrokeWidth(3,false).setFillOpacity(.0,false).moveTo(ay+aH,az).cubicCurve(ay+aH,az+V*aH,ay+V*aH,az+aH,ay,az+aH).cubicCurve(ay-V*aH,az+aH,ay-aH,az+V*aH,ay-aH,az).cubicCurve(ay-aH,az-V*aH,ay-V*aH,az-aH,ay,az-aH).cubicCurve(ay+V*aH,az-aH,ay+aH,az-V*aH,ay+aH,az).closePath()g=-55+b4(unit.getAxisCommandValue(0),0,1)*100;ThrottleBarPath=PathBuilder().setStroke('green',false).setStrokeWidth(10,false).moveTo(175,-60).lineTo(175,g)aV(StallOrb,StallOrbPath)if A then aV(ThrottleBar,ThrottleBarPath)end;if B then if z then CaptureBoxObj.hideDraw()DistIndicator.showDraw()VeloLabel.showDraw()AltLabel.showDraw()CenterObj.showDraw()AltIndicator.showDraw()VeloIndicator.showDraw()AzimIndicator.showDraw()LadderLObj.showDraw()LadderRObj.showDraw()TickerObj.showDraw()StallOrb.showDraw()else CaptureBoxObj.showDraw()DistIndicator.showDraw()VeloLabel.hideDraw()AltLabel.hideDraw()CenterObj.showDraw()AltIndicator.showDraw()VeloIndicator.hideDraw()AzimIndicator.showDraw()LadderLObj.hideDraw()LadderRObj.hideDraw()TickerObj.hideDraw()StallOrb.showDraw()end end;if C then if A then ThrottleBar.showDraw()ThrottleTarget.hideDraw()else ThrottleBar.hideDraw()ThrottleTarget.showDraw()end end;B=false;C=false end;local function dj(aj)if type(aj)~='string'then return nil end;local ag,be,c4,c5,dk=aj:match('::pos{%s*([%-%d%.]+)%s*,%s*([%-%d%.]+)%s*,%s*([%-%d%.]+)%s*,%s*([%-%d%.]+)%s*,%s*([%-%d%.]+)%s*}')if not ag then return nil end;return tonumber(ag),tonumber(be),tonumber(c4),tonumber(c5),tonumber(dk)end;system:onEvent('onInputText',function(self,dl)if type(dl)~='string'then return end;do local dm=dl:match('^%s*(.-)%s*$')if dm and dm:lower()=='dock'then a4=not a4;a5=nil;if not a4 then if aU and aU.hideDraw then aU.hideDraw()end end;system.print(a4 and'Docking mode: ON'or'Docking mode: OFF')return end;local ag,be,ai=b7(dl)if ag and be and ai then Y.OLS1,Y.OLS2,Y.OLS3=ag,be,ai;bf(system.getArkTime())system.print('OLS beacons updated from input')return end end;do local dm=dl:match('^%s*(.-)%s*$')if dm and dm:lower()=='list'then if not disk then system.print("No databank 'disk' linked: cannot list")return end;local dn={}if disk.getKeyList then local dp=disk.getKeyList()if type(dp)=='table'then for bT,V in ipairs(dp)do table.insert(dn,tostring(V))end end end;if#dn==0 and disk.getNbKeys and disk.getKey then local ci=tonumber(disk.getNbKeys())or 0;for b2=0,math.max(ci-1,0)do local V=disk.getKey(b2)if V then table.insert(dn,tostring(V))end end;if#dn==0 then for b2=1,ci do local V=disk.getKey(b2)if V then table.insert(dn,tostring(V))end end end end;if#dn==0 then system.print('No keys found in databank')return end;local dq=0;for bT,dr in ipairs(dn)do local ds=disk.getStringValue and disk.getStringValue(dr)or nil;if type(ds)=='string'and ds:find('^::pos%{')then local dt,du,c4,c5,dk=dj(ds)if dt then local c0,c1=c7(dt,du)if c0 and c1 then system.print(dr)dq=dq+1 end end end end;if dq==0 then system.print('No valid waypoint entries found')else system.print(string.format('Listed %d valid waypoint entries',dq))end;return end end;local dv,dw=dl:match('^%s*([^:][%w%._%-%s]*)%s+(::pos%b{})%s*$')if dv and dw then dv=dv:match('^%s*(.-)%s*$')x,y=dv,dw;if disk and disk.setStringValue then disk.setStringValue(x,y)system.print(string.format('Saved %s -> %s',x,y))else system.print("No databank 'disk' linked: cannot save")end;s,t,u,v,w=dj(y)if s then local bv=cc(s,t,u,v,w)if bv then a8=bv;system.print(string.format('Destination set to %s',x))end end;return end;do local co,c9,c4,c5,dk=dj(dl)if co then s,t,u,v,w=co,c9,c4,c5,dk;x="Unknown"y=dl;local bv=cc(co,c9,c4,c5,dk)if bv then a8=bv;if c9==0 then system.print(string.format('Destination set to space (x %.1f, y %.1f, z %.1f)',c4,c5,dk))else system.print(string.format('Destination set to system %d body %d (lat %.4f, lon %.4f, alt %.1f)',co,c9,c4,c5,dk))end;return else system.print('Invalid ::pos body/system for atlas')return end end end;if disk and disk.getStringValue then local dr=dl:match('^%s*(.-)%s*$')local dx=disk.getStringValue(dr)if dx and dx:find('^::pos%{')then x,y=dr,dx;local co,c9,c4,c5,dk=dj(dx)if co then s,t,u,v,w=co,c9,c4,c5,dk;local bv=cc(co,c9,c4,c5,dk)if bv then a8=bv;system.print(string.format('Destination recalled: %s -> %s',dr,dx))return else system.print('Saved ::pos not valid for current atlas')return end end end end;system.print("Unrecognized input. Use 'name ::pos{...}' to save, '::pos{...}' to set, or a saved name to recall.")end)local ad=vec3(construct.getWorldVelocity())k=math.sqrt(ad.x*ad.x+ad.y*ad.y+ad.z*ad.z)if k<=10 then unit.deployLandingGears()gearExtended=true;Nav.axisCommandManager:setTargetGroundAltitude(0)Nav.axisCommandManager:resetCommand(axisCommandId.longitudinal)else gearExtended=false;Nav.axisCommandManager:setTargetGroundAltitude(200)end;unit:onEvent('onStop',function(self)system.setWaypoint(system.getWaypointFromPlayerPos(),false)if switch and switch.deactivate then switch.deactivate()end;unit.switchOffHeadlights()end)unit:onEvent('onStart',function(self)if rx then pcall(function()if rx.setChannel then rx.setChannel(X)end end)pcall(function()if rx.startListening then rx.startListening(X)end end)end end)if rx and rx.onEvent then rx:onEvent('onReceived',function(self,dy,dz)if dy==X then local ag,be,ai=b7(tostring(dz or''))if ag and be and ai then Y.OLS1,Y.OLS2,Y.OLS3=ag,be,ai end end end)end;system:onEvent('onFlush',function(self)local dA=2;pitchSpeedFactor=math.max(pitchSpeedFactor,0.01)yawSpeedFactor=math.max(yawSpeedFactor,0.01)rollSpeedFactor=math.max(rollSpeedFactor,0.01)dA=math.max(dA,0.01)brakeSpeedFactor=math.max(brakeSpeedFactor,0.01)brakeFlatFactor=math.max(brakeFlatFactor,0.01)autoRollFactor=math.max(autoRollFactor,0.01)turnAssistFactor=math.max(turnAssistFactor,0.01)local dB;do local ak=vec3(construct.getWorldPosition())local dC=G and G.center;if dC and type(dC[1])=='number'then local c0=vec3(dC[1],dC[2],dC[3])local dD=ak-c0;if dD:len()>1e-6 then dB=dD:normalize()end end;if not dB then local dE=vec3(core.getWorldGravity())if dE:len()>1e-6 then dB=-dE:normalize()else dB=vec3(construct.getWorldOrientationUp())end end end;local al=vec3(construct.getWorldOrientationForward())local dF=b4(al:dot(dB),-1,1)local dG=math.deg(math.asin(dF))local bs=vec3(construct.getWorldVelocity())local dH=bs:len()local dI=bs/dH;local al=vec3(construct.getWorldOrientationForward())local bz=vec3(construct.getWorldOrientationRight())local dJ=math.deg(math.asin(b4(dI:dot(dB),-1,1)))local dK=dJ-dG;local aC=dI:dot(al)local dL=dI:dot(bz)local dM=math.deg(math.atan(dL,aC))local dN=pitchInput+system.getControlDeviceForwardInput()local dO=rollInput+system.getControlDeviceYawInput()local dP=yawInput-system.getControlDeviceLeftRightInput()local dQ=brakeInput;if G and(dG<=1.5 and dG>=-1.5)and z and pitchInput==0 then local dJ=0;local dK=dJ-dG;local dR=0.05;local dS=b4(dK*dR,-0.25,0.25)local dT=0.1;local dU=0.05;if math.abs(dK)<dT then dS=0 elseif math.abs(dS)<dU then dS=dS>0 and dU or-dU end;dN=dS elseif G and not z and pitchInput==0 and(dG<=1.5 and dG>=-1.5 or dM<=1.5 and dM>=-1.5)then local dR=0.05;local dS=b4(dK*dR,-0.25,0.25)local dT=0.1;local dU=0.05;if math.abs(dK)<dT then dS=0 elseif math.abs(dS)<dU then dS=dS>0 and dU or-dU end;dN=dS;local dV=0.05;local dW=b4(-dV*dM,-0.25,0.25)if math.abs(dM)<dT then dW=0 elseif math.abs(dW)<dU then dW=dW>0 and dU or-dU end;dP=dW end;local dX=vec3(core.getWorldVertical())local dY=vec3(construct.getWorldOrientationUp())local dZ=vec3(construct.getWorldOrientationForward())local d_=vec3(construct.getWorldOrientationRight())i=vec3(construct.getWorldVelocity())local e0=vec3(construct.getWorldVelocity()):normalize()local e1=getRoll(dX,dZ,d_)local e2=math.abs(e1)local e3=utils.sign(e1)do if D and a8 and not z then local ak=vec3(construct.getWorldPosition())local bx=cd(a8,ak)local e4=bx:len()if e4 and e4>1e-3 then local e5=0.45;local e6=0.45;local e7=0.001;local al=dZ;local bA=dY;local bz=d_;local aC=bx:dot(al)local dL=bx:dot(bz)local e8=bx:dot(bA)local dM=math.deg(math.atan(dL,aC))local bI=math.deg(math.atan(e8,aC))local function e9(ad)if ad>1 then return 1 elseif ad<-1 then return-1 else return ad end end;local ea=math.min(math.abs(dM)/45.0,1.0)local eb=math.min(math.abs(bI)/30.0,1.0)local ec=e9(-e5*dM*ea*ea)local ed=e9(e6*bI*eb*eb)if math.abs(dM)<e7 then ec=0 end;if math.abs(bI)<e7 then ed=0 end;local dU=0.03;if math.abs(dM)>=e7 and ec~=0 and math.abs(ec)<dU then ec=(ec>0 and 1 or-1)*dU end;if math.abs(bI)>=e7 and ed~=0 and math.abs(ed)<dU then ed=(ed>0 and 1 or-1)*dU end;local bi=0.9;H=H+bi*(ec-H)I=I+bi*(ed-I)dP=H;dN=I end else H=0;I=0 end end;do local ee=e0;local al=vec3(construct.getWorldOrientationForward())local ef=b4(ee:dot(al),-1,1)local eg=math.deg(math.acos(ef))eg=math.min(eg,45)b=math.floor(eg/45*60+0.5)end;do if a8 then local ak=vec3(construct.getWorldPosition())local bx=cd(a8,ak)local bA=vec3(construct.getWorldOrientationUp())local bz=vec3(construct.getWorldOrientationRight())local eh=bx-bA*bx:dot(bA)local ei=bx-bz*bx:dot(bz)local ej=eh:len()local ek=ei:len()if ej>1e-6 then eh=eh/ej;local al=vec3(construct.getWorldOrientationForward())local bz=vec3(construct.getWorldOrientationRight())local aC=eh:dot(al)local aD=eh:dot(bz)local dM=math.deg(math.atan(aD,aC))local el=math.max(-90,math.min(90,dM))c=math.floor(el/90*130+0.5)end;if ek>1e-6 then ei=ei/ek;local al=vec3(construct.getWorldOrientationForward())local bA=vec3(construct.getWorldOrientationUp())local aC=ei:dot(al)local aD=ei:dot(bA)local bI=math.deg(math.atan(aD,aC))local em=b4(bI,-45,45)local en=(em+45)/90;d=math.floor(en*110+0.5)end end end;do local al=vec3(construct.getWorldOrientationForward())j=i:dot(al)*3.6;if j<0 then j=0 end;local aj=math.min(j,1000)/1000*110;e=math.floor(aj+0.5)end;do local ak=vec3(construct.getWorldPosition())local eo=math.huge;local ep=0;for co,ca in pairs(a7)do if type(ca)=='table'then for c9,cb in pairs(ca)do if type(cb)=='table'and cb.center then local ai=cb.center;local cj=cd(ak,vec3(ai[1],ai[2],ai[3])):len()if cj<eo then eo=cj;ep=cb.radius or 0 end end end end end;l=math.max(eo-ep,0)local aj=math.min(l,3500)/3500*110;f=math.floor(aj+0.5)end;do if a8 then local ak=vec3(construct.getWorldPosition())h=cd(a8,ak):len()/1000 end end;do local cj;if altimeter and altimeter.getMaxDistance then cj=altimeter.getMaxDistance()end;if type(cj)=='number'and cj<2 then Nav.axisCommandManager:deactivateGroundEngineAltitudeStabilization()end end;local eq=vec3(construct.getWorldAngularVelocity())local er=dN*pitchSpeedFactor*d_+dO*rollSpeedFactor*dZ+dP*yawSpeedFactor*dY;if dX:len()>0.01 and unit.getAtmosphereDensity()>0.0 then local es=1.0;if autoRoll==true and e2>es and dO==0 then local et=utils.clamp(0,e2-30,e2+30)if rollPID==nil then rollPID=pid.new(autoRollFactor*0.01,0,autoRollFactor*0.1)end;rollPID:inject(et-e1)local eu=rollPID:get()er=er+eu*dZ end;local ev=20.0;if turnAssist==true and e2>ev and dN==0 and dP==0 then local ew=turnAssistFactor*0.1;local ex=turnAssistFactor*0.025;local ey=(e2-ev)/(180-ev)*180;local ez=0;if ey<90 then ez=ey/90 elseif ey<180 then ez=(180-ey)/90 end;ez=ez*ez;local eA=-e3*ex*(1.0-ez)local eB=ew*ez;er=er+eB*d_+eA*dY end end;local eC=1;local eD=0;local eE=1;local eF=dA*(er-eq)local eG=vec3(construct.getWorldAirFrictionAngularAcceleration())eF=eF-eG;Nav:setEngineTorqueCommand('torque',eF,eC,'airfoil','','',eE)local eH=-dQ*(brakeSpeedFactor*i+brakeFlatFactor*e0)Nav:setEngineForceCommand('brake',eH)local eI=''local eJ=vec3()local eK=false;local eL='thrust analog longitudinal'local eM=Nav.axisCommandManager:getAxisCommandType(axisCommandId.longitudinal)if eM==axisCommandType.byThrottle then local eN=Nav.axisCommandManager:composeAxisAccelerationFromThrottle(eL,axisCommandId.longitudinal)Nav:setEngineForceCommand(eL,eN,eC)elseif eM==axisCommandType.byTargetSpeed then local eN=Nav.axisCommandManager:composeAxisAccelerationFromTargetSpeed(axisCommandId.longitudinal)eI=eI..' , '..eL;eJ=eJ+eN;if Nav.axisCommandManager:getTargetSpeed(axisCommandId.longitudinal)==0 or Nav.axisCommandManager:getCurrentToTargetDeltaSpeed(axisCommandId.longitudinal)<-Nav.axisCommandManager:getTargetSpeedCurrentStep(axisCommandId.longitudinal)*0.5 then eK=true end end;local eO='thrust analog lateral'local eP=Nav.axisCommandManager:getAxisCommandType(axisCommandId.lateral)if eP==axisCommandType.byThrottle then local eQ=Nav.axisCommandManager:composeAxisAccelerationFromThrottle(eO,axisCommandId.lateral)Nav:setEngineForceCommand(eO,eQ,eC)elseif eP==axisCommandType.byTargetSpeed then local eR=Nav.axisCommandManager:composeAxisAccelerationFromTargetSpeed(axisCommandId.lateral)eI=eI..' , '..eO;eJ=eJ+eR end;local eS='thrust analog vertical'local eT=Nav.axisCommandManager:getAxisCommandType(axisCommandId.vertical)if eT==axisCommandType.byThrottle then local eU=Nav.axisCommandManager:composeAxisAccelerationFromThrottle(eS,axisCommandId.vertical)Nav:setEngineForceCommand(eS,eU,eC,'airfoil','ground','',eE)elseif eT==axisCommandType.byTargetSpeed then local eV=Nav.axisCommandManager:composeAxisAccelerationFromTargetSpeed(axisCommandId.vertical)if gearExtended then Nav:setEngineForceCommand(eS,eV,eC,'airfoil','ground','',eE)else eI=eI..' , '..eS;eJ=eJ+eV end end;if eJ:len()>constants.epsilon then if brakeInput~=0 or eK or math.abs(e0:dot(dZ))<0.95 then eI=eI..', brake'end;Nav:setEngineForceCommand(eI,eJ,eD,'','','',eE)end;Nav:setBoosterCommand('rocket_engine')end)system:onEvent('onUpdate',function(self)local ad=vec3(construct.getWorldVelocity())k=math.sqrt(ad.x*ad.x+ad.y*ad.y+ad.z*ad.z)Nav:update()G=cl(vec3(construct.getWorldPosition())).body;local eW=cq(G,G.atmosphereThickness+F)local eX=ct()<10*1000;local eY=unit.getAtmosphereDensity()>=0.05;if not A then if eY then Nav.axisCommandManager:setTargetSpeedCommand(axisCommandId.longitudinal,1250)ThrottleTarget.setText("Body")elseif eX then Nav.axisCommandManager:setTargetSpeedCommand(axisCommandId.longitudinal,eW*3.6)ThrottleTarget.setText("Atmo")else Nav.axisCommandManager:setTargetSpeedCommand(axisCommandId.longitudinal,construct.getMaxSpeed()*3.6)ThrottleTarget.setText("Space")end end;do local bg=system.getArkTime()if a4 and tx and tx.setChannel and tx.send then if not a5 or bg-a5>1.0 then pcall(function()tx.setChannel(W)end)pcall(function()tx.send("ping")end)a5=bg end end;if a4 and k<=0.5 then a4=false;if aU and aU.hideDraw then aU.hideDraw()end end;bf(bg)if a4 and a3 and _.origin and _.x and _.y and _.z then pcall(function()ab.setPosition(_.origin.x,_.origin.y,_.origin.z)ab.rotateXYZ({_.y.x,_.y.y,_.y.z},{_.x.x,_.x.y,_.x.z},{_.z.x,_.z.y,_.z.z})if aP and aP.showDraw then aP.showDraw()end;if aQ and aQ.showDraw then aQ.showDraw()end;if aR and aR.showDraw then aR.showDraw()end;if aS and aS.showDraw then aS.showDraw()end end)local eZ=_.origin+_.z*2;local bM,bN=bu(eZ)if bM and bN then aU.move(bM,bN,nil,true)aU.showDraw()else aU.hideDraw()end else if aP and aP.hideDraw then aP.hideDraw()end;if aQ and aQ.hideDraw then aQ.hideDraw()end;if aR and aR.hideDraw then aR.hideDraw()end;if aS and aS.hideDraw then aS.hideDraw()end;if aU and aU.hideDraw then aU.hideDraw()end end end;cM()local e_=projector.getSVG()if e_ then system.setScreen(e_)end;if z then D=false;if E then brakeInput=0 end;E=false end;if a8 then if cx(s,a8)then if E and math.floor(h)<math.ceil(a/1000)+9 and k>10 then brakeInput=1 elseif E and k==0 then brakeInput=0;E=false end else if E and math.floor(cA())<math.ceil(a+49000)and k>10 then brakeInput=1 elseif E and k==0 then brakeInput=0;E=false end end end end)system:onEvent('onActionStart',function(self,f0)if f0=='stopengines'then Nav.axisCommandManager:resetCommand(axisCommandId.longitudinal)elseif f0=='strafeleft'then Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.lateral,-1.0)elseif f0=='gear'then gearExtended=not gearExtended;if gearExtended then unit.deployLandingGears()Nav.axisCommandManager:setTargetGroundAltitude(0)Nav.axisCommandManager:resetCommand(axisCommandId.longitudinal)else unit.retractLandingGears()Nav.axisCommandManager:setTargetGroundAltitude(200)end elseif f0=='brake'then brakeInput=brakeInput+1;local eM=Nav.axisCommandManager:getAxisCommandType(axisCommandId.longitudinal)if eM==axisCommandType.byTargetSpeed then local f1=Nav.axisCommandManager:getTargetSpeed(axisCommandId.longitudinal)if math.abs(f1)>constants.epsilon then Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.longitudinal,-utils.sign(f1))end end elseif f0=='groundaltitudedown'then Nav.axisCommandManager:updateTargetGroundAltitudeFromActionStart(-1.0)elseif f0=='backward'then pitchInput=pitchInput+1 elseif f0=='speedup'then Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.longitudinal,5.0)elseif f0=='light'then if unit.isAnyHeadlightSwitchedOn()then unit.switchOffHeadlights()if switch and switch.deactivate then switch.deactivate()end else unit.switchOnHeadlights()if switch and switch.activate then switch.activate()end end elseif f0=='left'then rollInput=rollInput-1 elseif f0=='forward'then pitchInput=pitchInput-1 elseif f0=='speeddown'then Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.longitudinal,-5.0)elseif f0=='groundaltitudeup'then Nav.axisCommandManager:updateTargetGroundAltitudeFromActionStart(1.0)elseif f0=='right'then rollInput=rollInput+1 elseif f0=='booster'then Nav:toggleBoosters()elseif f0=='yawright'then yawInput=yawInput-1 elseif f0=='straferight'then Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.lateral,1.0)elseif f0=='yawleft'then yawInput=yawInput+1 elseif f0=='down'then Nav.axisCommandManager:deactivateGroundEngineAltitudeStabilization()Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.vertical,-1.0)elseif f0=='up'then Nav.axisCommandManager:deactivateGroundEngineAltitudeStabilization()Nav.axisCommandManager:updateCommandFromActionStart(axisCommandId.vertical,1.0)elseif f0=='antigravity'then if antigrav~=nil then antigrav.toggle()end elseif f0=='option1'and a8 and not z then brakeInput=0;E=not E elseif f0=='option2'and a8 and not z then D=not D end end)system:onEvent('onActionStop',function(self,f0)if f0=='backward'then pitchInput=pitchInput-1 elseif f0=='left'then rollInput=rollInput+1 elseif f0=='down'then Nav.axisCommandManager:updateCommandFromActionStop(axisCommandId.vertical,1.0)Nav.axisCommandManager:activateGroundEngineAltitudeStabilization(currentGroundAltitudeStabilization)elseif f0=='yawright'then yawInput=yawInput+1 elseif f0=='yawleft'then yawInput=yawInput-1 elseif f0=='forward'then pitchInput=pitchInput+1 elseif f0=='straferight'then Nav.axisCommandManager:updateCommandFromActionStop(axisCommandId.lateral,-1.0)elseif f0=='up'then Nav.axisCommandManager:updateCommandFromActionStop(axisCommandId.vertical,-1.0)Nav.axisCommandManager:activateGroundEngineAltitudeStabilization(currentGroundAltitudeStabilization)elseif f0=='strafeleft'then Nav.axisCommandManager:updateCommandFromActionStop(axisCommandId.lateral,1.0)elseif f0=='brake'then brakeInput=brakeInput-1 elseif f0=='right'then rollInput=rollInput-1 end end)system:onEvent('onActionLoop',function(self,f0)if f0=='brake'then local eM=Nav.axisCommandManager:getAxisCommandType(axisCommandId.longitudinal)if eM==axisCommandType.byTargetSpeed then local f1=Nav.axisCommandManager:getTargetSpeed(axisCommandId.longitudinal)if math.abs(f1)>constants.epsilon then Nav.axisCommandManager:updateCommandFromActionLoop(axisCommandId.longitudinal,-utils.sign(f1))end end elseif f0=='speeddown'then Nav.axisCommandManager:updateCommandFromActionLoop(axisCommandId.longitudinal,-1.0)elseif f0=='speedup'then Nav.axisCommandManager:updateCommandFromActionLoop(axisCommandId.longitudinal,1.0)elseif f0=='groundaltitudeup'then Nav.axisCommandManager:updateTargetGroundAltitudeFromActionLoop(1.0)elseif f0=='groundaltitudedown'then Nav.axisCommandManager:updateTargetGroundAltitudeFromActionLoop(-1.0)end end)system.print("PRIMED")
